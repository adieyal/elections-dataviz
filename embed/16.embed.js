(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{154:function(e,t,r){"use strict";var o,i=r(4),n=r(11),s=r(156),a=r(113),u=r(83),c=r(112),l=r(111),h=r(151);!function(e){e[e.normal=1]="normal",e[e.refetch=2]="refetch",e[e.poll=3]="poll"}(o||(o={}));var y,p=r(150),f=r(149),d=r(148);function v(e){return e<7}!function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"}(y||(y={}));var b=r(36),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.b(t,e),t.prototype[b.a]=function(){return this},t.prototype["@@observable"]=function(){return this},t}(n.b);var Q=function(e){var t="";return Array.isArray(e.graphQLErrors)&&0!==e.graphQLErrors.length&&e.graphQLErrors.forEach(function(e){var r=e?e.message:"Error message not found.";t+="GraphQL error: "+r+"\n"}),e.networkError&&(t+="Network error: "+e.networkError.message+"\n"),t=t.replace(/\n$/,"")},w=function(e){function t(r){var o=r.graphQLErrors,i=r.networkError,n=r.errorMessage,s=r.extraInfo,a=e.call(this,n)||this;return a.graphQLErrors=o||[],a.networkError=i||null,a.message=n||Q(a),a.extraInfo=s,a.__proto__=t.prototype,a}return i.b(t,e),t}(Error),m=function(e){function t(t){var r=t.scheduler,o=t.options,i=t.shouldSubscribe,n=void 0===i||i,s=e.call(this,function(e){return s.onSubscribe(e)})||this;return s.isCurrentlyPolling=!1,s.isTornDown=!1,s.options=o,s.variables=o.variables||{},s.queryId=r.queryManager.generateQueryId(),s.shouldSubscribe=n,s.scheduler=r,s.queryManager=r.queryManager,s.observers=[],s.subscriptionHandles=[],s}return i.b(t,e),t.prototype.result=function(){var e=this;return new Promise(function(t,r){var o,i={next:function(r){t(r),e.observers.some(function(e){return e!==i})||e.queryManager.removeQuery(e.queryId),setTimeout(function(){o.unsubscribe()},0)},error:function(e){r(e)}};o=e.subscribe(i)})},t.prototype.currentResult=function(){var e=this.getCurrentResult();return void 0===e.data&&(e.data={}),e},t.prototype.getCurrentResult=function(){if(this.isTornDown)return{data:this.lastError?void 0:this.lastResult?this.lastResult.data:void 0,error:this.lastError,loading:!1,networkStatus:y.error};var e=this.queryManager.queryStore.get(this.queryId);if(function(e,t){return void 0===t&&(t="none"),e&&(e.graphQLErrors&&e.graphQLErrors.length>0&&"none"===t||e.networkError)}(e,this.options.errorPolicy))return{data:void 0,loading:!1,networkStatus:e.networkStatus,error:new w({graphQLErrors:e.graphQLErrors,networkError:e.networkError})};var t,r=this.queryManager.getCurrentQueryResult(this),o=r.data,n=r.partial,s=!e||e.networkStatus===y.loading,a="network-only"===this.options.fetchPolicy&&s||n&&"cache-only"!==this.options.fetchPolicy,u={data:o,loading:v(t=e?e.networkStatus:a?y.loading:y.ready),networkStatus:t};return e&&e.graphQLErrors&&"all"===this.options.errorPolicy&&(u.errors=e.graphQLErrors),n||(this.lastResult=i.a({},u,{stale:!1}),this.lastResultSnapshot=Object(p.a)(this.lastResult)),i.a({},u,{partial:n})},t.prototype.isDifferentFromLastResult=function(e){var t=this.lastResultSnapshot;return!(t&&e&&t.networkStatus===e.networkStatus&&t.stale===e.stale&&Object(f.a)(t.data,e.data))},t.prototype.getLastResult=function(){return this.lastResult},t.prototype.getLastError=function(){return this.lastError},t.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},t.prototype.refetch=function(e){var t=this.options.fetchPolicy;if("cache-only"===t)return Promise.reject(new Error("cache-only fetchPolicy option should not be used together with query refetch."));Object(f.a)(this.variables,e)||(this.variables=Object.assign({},this.variables,e)),Object(f.a)(this.options.variables,this.variables)||(this.options.variables=Object.assign({},this.options.variables,this.variables));var r="network-only"===t||"no-cache"===t,n=i.a({},this.options,{fetchPolicy:r?t:"network-only"});return this.queryManager.fetchQuery(this.queryId,n,o.refetch).then(function(e){return e})},t.prototype.fetchMore=function(e){var t,r=this;if(!e.updateQuery)throw new Error("updateQuery option is required. This function defines how to update the query data with the new results.");return Promise.resolve().then(function(){var n=r.queryManager.generateQueryId();return(t=e.query?e:i.a({},r.options,e,{variables:Object.assign({},r.variables,e.variables)})).fetchPolicy="network-only",r.queryManager.fetchQuery(n,t,o.normal,r.queryId)}).then(function(o){return r.updateQuery(function(r){return e.updateQuery(r,{fetchMoreResult:o.data,variables:t.variables})}),o})},t.prototype.subscribeToMore=function(e){var t=this,r=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables}).subscribe({next:function(r){e.updateQuery&&t.updateQuery(function(t,o){var i=o.variables;return e.updateQuery(t,{subscriptionData:r,variables:i})})},error:function(t){e.onError?e.onError(t):console.error("Unhandled GraphQL subscription error",t)}});return this.subscriptionHandles.push(r),function(){var e=t.subscriptionHandles.indexOf(r);e>=0&&(t.subscriptionHandles.splice(e,1),r.unsubscribe())}},t.prototype.setOptions=function(e){var t=this.options;this.options=Object.assign({},this.options,e),e.pollInterval?this.startPolling(e.pollInterval):0===e.pollInterval&&this.stopPolling();var r="network-only"!==t.fetchPolicy&&"network-only"===e.fetchPolicy||"cache-only"===t.fetchPolicy&&"cache-only"!==e.fetchPolicy||"standby"===t.fetchPolicy&&"standby"!==e.fetchPolicy||!1;return this.setVariables(this.options.variables,r,e.fetchResults)},t.prototype.setVariables=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!0),this.isTornDown=!1;var o=e||this.variables;return Object(f.a)(o,this.variables)&&!t?0!==this.observers.length&&r?this.result():new Promise(function(e){return e()}):(this.variables=o,this.options.variables=o,0===this.observers.length?new Promise(function(e){return e()}):this.queryManager.fetchQuery(this.queryId,i.a({},this.options,{variables:this.variables})).then(function(e){return e}))},t.prototype.updateQuery=function(e){var t=this.queryManager.getQueryWithPreviousResult(this.queryId),r=t.previousResult,o=t.variables,i=t.document,n=Object(d.b)(function(){return e(r,{variables:o})});n&&(this.queryManager.dataStore.markUpdateQueryResult(i,o,n),this.queryManager.broadcastQueries())},t.prototype.stopPolling=function(){this.isCurrentlyPolling&&(this.scheduler.stopPollingQuery(this.queryId),this.options.pollInterval=void 0,this.isCurrentlyPolling=!1)},t.prototype.startPolling=function(e){if("cache-first"===this.options.fetchPolicy||"cache-only"===this.options.fetchPolicy)throw new Error("Queries that specify the cache-first and cache-only fetchPolicies cannot also be polling queries.");this.isCurrentlyPolling&&(this.scheduler.stopPollingQuery(this.queryId),this.isCurrentlyPolling=!1),this.options.pollInterval=e,this.isCurrentlyPolling=!0,this.scheduler.startPollingQuery(this.options,this.queryId)},t.prototype.onSubscribe=function(e){var t=this;return e._subscription&&e._subscription._observer&&!e._subscription._observer.error&&(e._subscription._observer.error=function(e){console.error("Unhandled error",e.message,e.stack)}),this.observers.push(e),e.next&&this.lastResult&&e.next(this.lastResult),e.error&&this.lastError&&e.error(this.lastError),1===this.observers.length&&this.setUpQuery(),function(){t.observers=t.observers.filter(function(t){return t!==e}),0===t.observers.length&&t.tearDownQuery()}},t.prototype.setUpQuery=function(){var e=this;if(this.shouldSubscribe&&this.queryManager.addObservableQuery(this.queryId,this),this.options.pollInterval){if("cache-first"===this.options.fetchPolicy||"cache-only"===this.options.fetchPolicy)throw new Error("Queries that specify the cache-first and cache-only fetchPolicies cannot also be polling queries.");this.isCurrentlyPolling=!0,this.scheduler.startPollingQuery(this.options,this.queryId)}var t={next:function(t){e.lastResult=t,e.lastResultSnapshot=Object(p.a)(t),e.observers.forEach(function(e){return e.next&&e.next(t)})},error:function(t){e.lastError=t,e.observers.forEach(function(e){return e.error&&e.error(t)})}};this.queryManager.startQuery(this.queryId,this.options,this.queryManager.queryListenerForObserver(this.queryId,this.options,t))},t.prototype.tearDownQuery=function(){this.isTornDown=!0,this.isCurrentlyPolling&&(this.scheduler.stopPollingQuery(this.queryId),this.isCurrentlyPolling=!1),this.subscriptionHandles.forEach(function(e){return e.unsubscribe()}),this.subscriptionHandles=[],this.queryManager.removeObservableQuery(this.queryId),this.queryManager.stopQuery(this.queryId),this.observers=[]},t}(g),q=function(){function e(e){var t=e.queryManager,r=e.ssrMode;this.inFlightQueries={},this.registeredQueries={},this.intervalQueries={},this.pollingTimers={},this.ssrMode=!1,this.queryManager=t,this.ssrMode=r||!1}return e.prototype.stop=function(){var e=this;Object.keys(this.registeredQueries).forEach(function(t){e.stopPollingQuery(t)}),Object.keys(this.intervalQueries).forEach(function(t){e.fetchQueriesOnInterval(+t)})},e.prototype.checkInFlight=function(e){var t=this.queryManager.queryStore.get(e);return t&&t.networkStatus!==y.ready&&t.networkStatus!==y.error},e.prototype.fetchQuery=function(e,t,r){var o=this;return new Promise(function(i,n){o.queryManager.fetchQuery(e,t,r).then(function(e){i(e)}).catch(function(e){n(e)})})},e.prototype.startPollingQuery=function(e,t,r){if(!e.pollInterval)throw new Error("Attempted to start a polling query without a polling interval.");return this.ssrMode?t:(this.registeredQueries[t]=e,r&&this.queryManager.addQueryListener(t,r),this.addQueryOnInterval(t,e),t)},e.prototype.stopPollingQuery=function(e){delete this.registeredQueries[e]},e.prototype.fetchQueriesOnInterval=function(e){var t=this;this.intervalQueries[e]=this.intervalQueries[e].filter(function(r){if(!t.registeredQueries.hasOwnProperty(r)||t.registeredQueries[r].pollInterval!==e)return!1;if(t.checkInFlight(r))return!0;var n=t.registeredQueries[r],s=i.a({},n);return s.fetchPolicy="network-only",t.fetchQuery(r,s,o.poll).catch(function(){}),!0}),0===this.intervalQueries[e].length&&(clearInterval(this.pollingTimers[e]),delete this.intervalQueries[e])},e.prototype.addQueryOnInterval=function(e,t){var r=this,o=t.pollInterval;if(!o)throw new Error("A poll interval is required to start polling query with id '"+e+"'.");this.intervalQueries.hasOwnProperty(o.toString())&&this.intervalQueries[o].length>0?this.intervalQueries[o].push(e):(this.intervalQueries[o]=[e],this.pollingTimers[o]=setInterval(function(){r.fetchQueriesOnInterval(o)},o))},e.prototype.registerPollingQuery=function(e){if(!e.pollInterval)throw new Error("Attempted to register a non-polling query with the scheduler.");return new m({scheduler:this,options:e})},e}(),k=function(){function e(){this.store={}}return e.prototype.getStore=function(){return this.store},e.prototype.get=function(e){return this.store[e]},e.prototype.initMutation=function(e,t,r){this.store[e]={mutation:t,variables:r||{},loading:!0,error:null}},e.prototype.markMutationError=function(e,t){var r=this.store[e];r&&(r.loading=!1,r.error=t)},e.prototype.markMutationResult=function(e){var t=this.store[e];t&&(t.loading=!1,t.error=null)},e.prototype.reset=function(){this.store={}},e}(),O=function(){function e(){this.store={}}return e.prototype.getStore=function(){return this.store},e.prototype.get=function(e){return this.store[e]},e.prototype.initQuery=function(e){var t=this.store[e.queryId];if(t&&t.document!==e.document&&!Object(f.a)(t.document,e.document))throw new Error("Internal Error: may not update existing query string in store");var r,o=!1,i=null;e.storePreviousVariables&&t&&t.networkStatus!==y.loading&&(Object(f.a)(t.variables,e.variables)||(o=!0,i=t.variables)),r=o?y.setVariables:e.isPoll?y.poll:e.isRefetch?y.refetch:y.loading;var n=[];t&&t.graphQLErrors&&(n=t.graphQLErrors),this.store[e.queryId]={document:e.document,variables:e.variables,previousVariables:i,networkError:null,graphQLErrors:n,networkStatus:r,metadata:e.metadata},"string"==typeof e.fetchMoreForQueryId&&this.store[e.fetchMoreForQueryId]&&(this.store[e.fetchMoreForQueryId].networkStatus=y.fetchMore)},e.prototype.markQueryResult=function(e,t,r){this.store&&this.store[e]&&(this.store[e].networkError=null,this.store[e].graphQLErrors=t.errors&&t.errors.length?t.errors:[],this.store[e].previousVariables=null,this.store[e].networkStatus=y.ready,"string"==typeof r&&this.store[r]&&(this.store[r].networkStatus=y.ready))},e.prototype.markQueryError=function(e,t,r){this.store&&this.store[e]&&(this.store[e].networkError=t,this.store[e].networkStatus=y.error,"string"==typeof r&&this.markQueryResultClient(r,!0))},e.prototype.markQueryResultClient=function(e,t){this.store&&this.store[e]&&(this.store[e].networkError=null,this.store[e].previousVariables=null,this.store[e].networkStatus=t?y.ready:y.loading)},e.prototype.stopQuery=function(e){delete this.store[e]},e.prototype.reset=function(e){var t=this;this.store=Object.keys(this.store).filter(function(t){return e.indexOf(t)>-1}).reduce(function(e,r){return e[r]=i.a({},t.store[r],{networkStatus:y.loading}),e},{})},e}(),S=function(){function e(e){var t=e.link,r=e.queryDeduplication,o=void 0!==r&&r,i=e.store,s=e.onBroadcast,a=void 0===s?function(){}:s,c=e.ssrMode,l=void 0!==c&&c,h=e.clientAwareness,y=void 0===h?{}:h;this.mutationStore=new k,this.queryStore=new O,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.queryIdsByName={},this.link=t,this.deduplicator=n.a.from([new u.a,t]),this.queryDeduplication=o,this.dataStore=i,this.onBroadcast=a,this.clientAwareness=y,this.scheduler=new q({queryManager:this,ssrMode:l})}return e.prototype.stop=function(){this.scheduler.stop(),this.fetchQueryRejectFns.forEach(function(e){e(new Error("QueryManager stopped while query was in flight"))})},e.prototype.mutate=function(e){var t=this,r=e.mutation,o=e.variables,s=e.optimisticResponse,a=e.updateQueries,u=e.refetchQueries,h=void 0===u?[]:u,y=e.awaitRefetchQueries,p=void 0!==y&&y,f=e.update,v=e.errorPolicy,b=void 0===v?"none":v,g=e.fetchPolicy,Q=e.context,m=void 0===Q?{}:Q;if(!r)throw new Error("mutation option is required. You must specify your GraphQL document in the mutation option.");if(g&&"no-cache"!==g)throw new Error("fetchPolicy for mutations currently only supports the 'no-cache' policy");var q=this.generateQueryId(),k=this.dataStore.getCache();r=k.transformDocument(r),o=Object(c.a)({},Object(l.c)(Object(l.f)(r)),o),this.setQuery(q,function(){return{document:r}});var O=function(){var e={};return a&&Object.keys(a).forEach(function(r){return(t.queryIdsByName[r]||[]).forEach(function(o){e[o]={updater:a[r],query:t.queryStore.get(o)}})}),e};return this.mutationStore.initMutation(q,r,o),this.dataStore.markMutationInit({mutationId:q,document:r,variables:o||{},updateQueries:O(),update:f,optimisticResponse:s}),this.broadcastQueries(),new Promise(function(e,a){var u,c,l=t.buildOperationForLink(r,o,i.a({},m,{optimisticResponse:s}));Object(n.c)(t.link,l).subscribe({next:function(e){Object(d.a)(e)&&"none"===b?c=new w({graphQLErrors:e.errors}):(t.mutationStore.markMutationResult(q),"no-cache"!==g&&t.dataStore.markMutationResult({mutationId:q,result:e,document:r,variables:o||{},updateQueries:O(),update:f}),u=e)},error:function(e){t.mutationStore.markMutationError(q,e),t.dataStore.markMutationComplete({mutationId:q,optimisticResponse:s}),t.broadcastQueries(),t.setQuery(q,function(){return{document:null}}),a(new w({networkError:e}))},complete:function(){return function(){if(c&&t.mutationStore.markMutationError(q,c),t.dataStore.markMutationComplete({mutationId:q,optimisticResponse:s}),t.broadcastQueries(),c)return Promise.reject(c);"function"==typeof h&&(h=h(u));for(var e=[],r=0,o=h;r<o.length;r++){var i=o[r];if("string"!=typeof i){var n={query:i.query,variables:i.variables,fetchPolicy:"network-only"};i.context&&(n.context=i.context),e.push(t.query(n))}else{var a=t.refetchQueryByName(i);a&&e.push(a)}}return Promise.all(p?e:[]).then(function(){return t.setQuery(q,function(){return{document:null}}),"ignore"===b&&u&&Object(d.a)(u)&&delete u.errors,u})}().then(e,a)}})})},e.prototype.fetchQuery=function(e,t,r,i){var n,s=this,a=t.variables,u=void 0===a?{}:a,c=t.metadata,l=void 0===c?null:c,y=t.fetchPolicy,p=void 0===y?"cache-first":y,f=this.dataStore.getCache().transformDocument(t.query),d="network-only"===p||"no-cache"===p;if(r!==o.refetch&&"network-only"!==p&&"no-cache"!==p){var v=this.dataStore.getCache().diff({query:f,variables:u,returnPartialData:!0,optimistic:!1}),b=v.complete,g=v.result;d=!b||"cache-and-network"===p,n=g}var Q=d&&"cache-only"!==p&&"standby"!==p;Object(h.b)(["live"],f)&&(Q=!0);var m=this.generateRequestId(),q=this.updateQueryWatch(e,f,t);if(this.setQuery(e,function(){return{document:f,lastRequestId:m,invalidated:!0,cancel:q}}),this.invalidate(!0,i),this.queryStore.initQuery({queryId:e,document:f,storePreviousVariables:Q,variables:u,isPoll:r===o.poll,isRefetch:r===o.refetch,metadata:l,fetchMoreForQueryId:i}),this.broadcastQueries(),(!Q||"cache-and-network"===p)&&(this.queryStore.markQueryResultClient(e,!Q),this.invalidate(!0,e,i),this.broadcastQueries()),Q){var k=this.fetchRequest({requestId:m,queryId:e,document:f,options:t,fetchMoreForQueryId:i}).catch(function(t){if(function(e){return e.hasOwnProperty("graphQLErrors")}(t))throw t;var r=s.getQuery(e).lastRequestId;throw m>=(r||1)&&(s.queryStore.markQueryError(e,t,i),s.invalidate(!0,e,i),s.broadcastQueries()),new w({networkError:t})});if("cache-and-network"!==p)return k;k.catch(function(){})}return Promise.resolve({data:n})},e.prototype.queryListenerForObserver=function(e,t,r){var o=this,i=!1;return function(n,s){if(o.invalidate(!1,e),n){var u=o.getQuery(e).observableQuery,c=u?u.options.fetchPolicy:t.fetchPolicy;if("standby"!==c){var l=u?u.options.errorPolicy:t.errorPolicy,h=u?u.getLastResult():null,y=u?u.getLastError():null,p=!s&&null!=n.previousVariables||"cache-only"===c||"cache-and-network"===c,f=Boolean(h&&n.networkStatus!==h.networkStatus),d=l&&(y&&y.graphQLErrors)!==n.graphQLErrors&&"none"!==l;if(!v(n.networkStatus)||f&&t.notifyOnNetworkStatusChange||p){if((!l||"none"===l)&&n.graphQLErrors&&n.graphQLErrors.length>0||n.networkError){var b=new w({graphQLErrors:n.graphQLErrors,networkError:n.networkError});if(i=!0,r.error)try{r.error(b)}catch(e){setTimeout(function(){throw e},0)}else setTimeout(function(){throw b},0),Object(a.a)()||console.info("An unhandled error was thrown because no error handler is registered for the query "+JSON.stringify(n.document));return}try{var g=void 0,Q=void 0;if(s)"no-cache"!==c&&o.setQuery(e,function(){return{newData:null}}),g=s.result,Q=!s.complete||!1;else if(h&&h.data&&!d)g=h.data,Q=!1;else{var m=o.getQuery(e).document,q=o.dataStore.getCache().diff({query:m,variables:n.previousVariables||n.variables,optimistic:!0});g=q.result,Q=!q.complete}var k=void 0;if(k=Q&&"cache-only"!==c?{data:h&&h.data,loading:v(n.networkStatus),networkStatus:n.networkStatus,stale:!0}:{data:g,loading:v(n.networkStatus),networkStatus:n.networkStatus,stale:!1},"all"===l&&n.graphQLErrors&&n.graphQLErrors.length>0&&(k.errors=n.graphQLErrors),r.next&&(i||!u||u.isDifferentFromLastResult(k)))try{r.next(k)}catch(e){setTimeout(function(){throw e},0)}i=!1}catch(e){return i=!0,void(r.error&&r.error(new w({networkError:e})))}}}}}},e.prototype.watchQuery=function(e,t){if(void 0===t&&(t=!0),"standby"===e.fetchPolicy)throw new Error('client.watchQuery cannot be called with fetchPolicy set to "standby"');var r=Object(l.j)(e.query);if(r.variableDefinitions&&r.variableDefinitions.length){var o=Object(l.c)(r);e.variables=Object(c.a)({},o,e.variables)}void 0===e.notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var n=i.a({},e);return new m({scheduler:this.scheduler,options:n,shouldSubscribe:t})},e.prototype.query=function(e){var t=this;if(!e.query)throw new Error("query option is required. You must specify your GraphQL document in the query option.");if("Document"!==e.query.kind)throw new Error('You must wrap the query string in a "gql" tag.');if(e.returnPartialData)throw new Error("returnPartialData option only supported on watchQuery.");if(e.pollInterval)throw new Error("pollInterval option only supported on watchQuery.");return new Promise(function(r,o){var i=t.watchQuery(e,!1);t.fetchQueryRejectFns.set("query:"+i.queryId,o),i.result().then(r,o).then(function(){return t.fetchQueryRejectFns.delete("query:"+i.queryId)})})},e.prototype.generateQueryId=function(){var e=this.idCounter.toString();return this.idCounter++,e},e.prototype.stopQueryInStore=function(e){this.queryStore.stopQuery(e),this.invalidate(!0,e),this.broadcastQueries()},e.prototype.addQueryListener=function(e,t){this.setQuery(e,function(e){var r=e.listeners;return{listeners:(void 0===r?[]:r).concat([t]),invalidated:!1}})},e.prototype.updateQueryWatch=function(e,t,r){var o=this,i=this.getQuery(e).cancel;i&&i();return this.dataStore.getCache().watch({query:t,variables:r.variables,optimistic:!0,previousResult:function(){var t=null,r=o.getQuery(e).observableQuery;if(r){var i=r.getLastResult();i&&(t=i.data)}return t},callback:function(t){o.setQuery(e,function(){return{invalidated:!0,newData:t}})}})},e.prototype.addObservableQuery=function(e,t){this.setQuery(e,function(){return{observableQuery:t}});var r=Object(l.j)(t.options.query);if(r.name&&r.name.value){var o=r.name.value;this.queryIdsByName[o]=this.queryIdsByName[o]||[],this.queryIdsByName[o].push(t.queryId)}},e.prototype.removeObservableQuery=function(e){var t=this.getQuery(e),r=t.observableQuery,o=t.cancel;if(o&&o(),r){var i=Object(l.j)(r.options.query),n=i.name?i.name.value:null;this.setQuery(e,function(){return{observableQuery:null}}),n&&(this.queryIdsByName[n]=this.queryIdsByName[n].filter(function(e){return!(r.queryId===e)}))}},e.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach(function(e){e(new Error("Store reset while query was in flight(not completed in link chain)"))});var e=[];return this.queries.forEach(function(t,r){t.observableQuery&&e.push(r)}),this.queryStore.reset(e),this.mutationStore.reset(),this.dataStore.reset()},e.prototype.resetStore=function(){var e=this;return this.clearStore().then(function(){return e.reFetchObservableQueries()})},e.prototype.reFetchObservableQueries=function(e){var t=this.getObservableQueryPromises(e);return this.broadcastQueries(),Promise.all(t)},e.prototype.startQuery=function(e,t,r){return this.addQueryListener(e,r),this.fetchQuery(e,t).catch(function(){}),e},e.prototype.startGraphQLSubscription=function(e){var t,r=this,o=e.query,i=!(e.fetchPolicy&&"no-cache"===e.fetchPolicy),s=this.dataStore.getCache().transformDocument(o),a=Object(c.a)({},Object(l.c)(Object(l.g)(o)),e.variables),u=[];return new g(function(e){if(u.push(e),1===u.length){var o={next:function(e){i&&(r.dataStore.markSubscriptionResult(e,s,a),r.broadcastQueries()),u.forEach(function(t){Object(d.a)(e)&&t.error?t.error(new w({graphQLErrors:e.errors})):t.next&&t.next(e)})},error:function(e){u.forEach(function(t){t.error&&t.error(e)})},complete:function(){u.forEach(function(e){e.complete&&e.complete()})}},c=r.buildOperationForLink(s,a);t=Object(n.c)(r.link,c).subscribe(o)}return function(){0===(u=u.filter(function(t){return t!==e})).length&&t&&t.unsubscribe()}})},e.prototype.stopQuery=function(e){this.stopQueryInStore(e),this.removeQuery(e)},e.prototype.removeQuery=function(e){var t=this.getQuery(e).subscriptions;this.fetchQueryRejectFns.delete("query:"+e),this.fetchQueryRejectFns.delete("fetchRequest:"+e),t.forEach(function(e){return e.unsubscribe()}),this.queries.delete(e)},e.prototype.getCurrentQueryResult=function(e,t){void 0===t&&(t=!0);var r=e.options,o=r.variables,i=r.query,n=e.getLastResult(),s=this.getQuery(e.queryId).newData;if(s&&s.complete)return{data:s.result,partial:!1};try{return{data:this.dataStore.getCache().read({query:i,variables:o,previousResult:n?n.data:void 0,optimistic:t})||void 0,partial:!1}}catch(e){return{data:void 0,partial:!0}}},e.prototype.getQueryWithPreviousResult=function(e){var t;if("string"==typeof e){var r=this.getQuery(e).observableQuery;if(!r)throw new Error("ObservableQuery with this id doesn't exist: "+e);t=r}else t=e;var o=t.options,i=o.variables,n=o.query;return{previousResult:this.getCurrentQueryResult(t,!1).data,variables:i,document:n}},e.prototype.broadcastQueries=function(){var e=this;this.onBroadcast(),this.queries.forEach(function(t,r){t.invalidated&&t.listeners&&t.listeners.filter(function(e){return!!e}).forEach(function(o){o(e.queryStore.get(r),t.newData)})})},e.prototype.getObservableQueryPromises=function(e){var t=this,r=[];return this.queries.forEach(function(o,i){var n=o.observableQuery;if(n){var s=n.options.fetchPolicy;n.resetLastResults(),"cache-only"===s||!e&&"standby"===s||r.push(n.refetch()),t.setQuery(i,function(){return{newData:null}}),t.invalidate(!0,i)}}),r},e.prototype.fetchRequest=function(e){var t,r,o=this,s=e.requestId,a=e.queryId,u=e.document,c=e.options,l=e.fetchMoreForQueryId,h=c.variables,p=c.context,f=c.errorPolicy,d=void 0===f?"none":f,v=c.fetchPolicy,b=this.buildOperationForLink(u,h,i.a({},p,{forceFetch:!this.queryDeduplication}));return new Promise(function(e,i){o.fetchQueryRejectFns.set("fetchRequest:"+a,i);var c=Object(n.c)(o.deduplicator,b).subscribe({next:function(e){var n=o.getQuery(a).lastRequestId;if(s>=(n||1)){if("no-cache"!==v)try{o.dataStore.markQueryResult(e,u,h,l,"ignore"===d||"all"===d)}catch(e){return void i(e)}else o.setQuery(a,function(){return{newData:{result:e.data,complete:!0}}});o.queryStore.markQueryResult(a,e,l),o.invalidate(!0,a,l),o.broadcastQueries()}if(e.errors&&"none"===d)i(new w({graphQLErrors:e.errors}));else if("all"===d&&(r=e.errors),l||"no-cache"===v)t=e.data;else try{t=o.dataStore.getCache().read({variables:h,query:u,optimistic:!1})}catch(e){}},error:function(e){o.fetchQueryRejectFns.delete("fetchRequest:"+a),o.setQuery(a,function(e){return{subscriptions:e.subscriptions.filter(function(e){return e!==c})}}),i(e)},complete:function(){o.fetchQueryRejectFns.delete("fetchRequest:"+a),o.setQuery(a,function(e){return{subscriptions:e.subscriptions.filter(function(e){return e!==c})}}),e({data:t,errors:r,loading:!1,networkStatus:y.ready,stale:!1})}});o.setQuery(a,function(e){return{subscriptions:e.subscriptions.concat([c])}})}).catch(function(e){throw o.fetchQueryRejectFns.delete("fetchRequest:"+a),e})},e.prototype.refetchQueryByName=function(e){var t=this,r=this.queryIdsByName[e];if(void 0!==r)return Promise.all(r.map(function(e){return t.getQuery(e).observableQuery}).filter(function(e){return!!e}).map(function(e){return e.refetch()}))},e.prototype.generateRequestId=function(){var e=this.idCounter;return this.idCounter++,e},e.prototype.getQuery=function(e){return this.queries.get(e)||{listeners:[],invalidated:!1,document:null,newData:null,lastRequestId:null,observableQuery:null,subscriptions:[]}},e.prototype.setQuery=function(e,t){var r=this.getQuery(e),o=i.a({},r,t(r));this.queries.set(e,o)},e.prototype.invalidate=function(e,t,r){t&&this.setQuery(t,function(){return{invalidated:e}}),r&&this.setQuery(r,function(){return{invalidated:e}})},e.prototype.buildOperationForLink=function(e,t,r){var o=this.dataStore.getCache();return{query:o.transformForLink?o.transformForLink(e):e,variables:t,operationName:Object(l.i)(e)||void 0,context:i.a({},r,{cache:o,getCacheKey:function(e){if(o.config)return o.config.dataIdFromObject(e);throw new Error("To use context.getCacheKey, you need to use a cache that has a configurable dataIdFromObject, like apollo-cache-inmemory.")},clientAwareness:this.clientAwareness})}},e}(),P=function(){function e(e){this.cache=e}return e.prototype.getCache=function(){return this.cache},e.prototype.markQueryResult=function(e,t,r,o,i){void 0===i&&(i=!1);var n=!Object(d.a)(e);i&&Object(d.a)(e)&&e.data&&(n=!0),!o&&n&&this.cache.write({result:e.data,dataId:"ROOT_QUERY",query:t,variables:r})},e.prototype.markSubscriptionResult=function(e,t,r){Object(d.a)(e)||this.cache.write({result:e.data,dataId:"ROOT_SUBSCRIPTION",query:t,variables:r})},e.prototype.markMutationInit=function(e){var t=this;if(e.optimisticResponse){var r;r="function"==typeof e.optimisticResponse?e.optimisticResponse(e.variables):e.optimisticResponse;this.cache.recordOptimisticTransaction(function(o){var i=t.cache;t.cache=o;try{t.markMutationResult({mutationId:e.mutationId,result:{data:r},document:e.document,variables:e.variables,updateQueries:e.updateQueries,update:e.update})}finally{t.cache=i}},e.mutationId)}},e.prototype.markMutationResult=function(e){var t=this;if(!Object(d.a)(e.result)){var r=[];r.push({result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),e.updateQueries&&Object.keys(e.updateQueries).filter(function(t){return e.updateQueries[t]}).forEach(function(o){var i=e.updateQueries[o],n=i.query,s=i.updater,a=t.cache.diff({query:n.document,variables:n.variables,returnPartialData:!0,optimistic:!1}),u=a.result;if(a.complete){var c=Object(d.b)(function(){return s(u,{mutationResult:e.result,queryName:Object(l.i)(n.document)||void 0,queryVariables:n.variables})});c&&r.push({result:c,dataId:"ROOT_QUERY",query:n.document,variables:n.variables})}}),this.cache.performTransaction(function(e){r.forEach(function(t){return e.write(t)})});var o=e.update;o&&this.cache.performTransaction(function(t){Object(d.b)(function(){return o(t,e.result)})})}},e.prototype.markMutationComplete=function(e){var t=e.mutationId;e.optimisticResponse&&this.cache.removeOptimistic(t)},e.prototype.markUpdateQueryResult=function(e,t,r){this.cache.write({result:r,dataId:"ROOT_QUERY",variables:t,query:e})},e.prototype.reset=function(){return this.cache.reset()},e}(),E=r(82),I=!1,R=function(){function e(e){var t=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[],this.clientAwareness={};var r=e.link,o=e.cache,i=e.ssrMode,u=void 0!==i&&i,c=e.ssrForceFetchDelay,l=void 0===c?0:c,h=e.connectToDevTools,y=e.queryDeduplication,p=void 0===y||y,f=e.defaultOptions,d=e.name,v=e.version;if(!r||!o)throw new Error("\n        In order to initialize Apollo Client, you must specify link & cache properties on the config object.\n        This is part of the required upgrade when migrating from Apollo Client 1.0 to Apollo Client 2.0.\n        For more information, please visit:\n          https://www.apollographql.com/docs/react/basics/setup.html\n        to help you get started.\n      ");var b=new Map,g=new n.a(function(e,t){var r=b.get(e.query);return r||(r=Object(s.b)(e.query),b.set(e.query,r),b.set(r,r)),e.query=r,t(e)});this.link=g.concat(r),this.cache=o,this.store=new P(o),this.disableNetworkFetches=u||l>0,this.queryDeduplication=p,this.ssrMode=u,this.defaultOptions=f||{},l&&setTimeout(function(){return t.disableNetworkFetches=!1},l),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);var Q=!Object(a.a)()&&"undefined"!=typeof window&&!window.__APOLLO_CLIENT__;(void 0===h?Q:h&&"undefined"!=typeof window)&&(window.__APOLLO_CLIENT__=this),I||Object(a.a)()||(I=!0,"undefined"!=typeof window&&window.document&&window.top===window.self&&void 0===window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("Chrome")>-1&&console.debug("Download the Apollo DevTools for a better development experience: https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm")),this.version=E.version,d&&(this.clientAwareness.name=d),v&&(this.clientAwareness.version=v)}return e.prototype.stop=function(){this.queryManager&&this.queryManager.stop()},e.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=i.a({},this.defaultOptions.watchQuery,e)),!this.disableNetworkFetches||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e=i.a({},e,{fetchPolicy:"cache-first"})),this.initQueryManager().watchQuery(e)},e.prototype.query=function(e){if(this.defaultOptions.query&&(e=i.a({},this.defaultOptions.query,e)),"cache-and-network"===e.fetchPolicy)throw new Error("cache-and-network fetchPolicy can only be used with watchQuery");return this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=i.a({},e,{fetchPolicy:"cache-first"})),this.initQueryManager().query(e)},e.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=i.a({},this.defaultOptions.mutate,e)),this.initQueryManager().mutate(e)},e.prototype.subscribe=function(e){return this.initQueryManager().startGraphQLSubscription(e)},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.initProxy().readQuery(e,t)},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.initProxy().readFragment(e,t)},e.prototype.writeQuery=function(e){var t=this.initProxy().writeQuery(e);return this.initQueryManager().broadcastQueries(),t},e.prototype.writeFragment=function(e){var t=this.initProxy().writeFragment(e);return this.initQueryManager().broadcastQueries(),t},e.prototype.writeData=function(e){var t=this.initProxy().writeData(e);return this.initQueryManager().broadcastQueries(),t},e.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},e.prototype.__requestRaw=function(e){return Object(n.c)(this.link,e)},e.prototype.initQueryManager=function(){var e=this;return this.queryManager||(this.queryManager=new S({link:this.link,store:this.store,queryDeduplication:this.queryDeduplication,ssrMode:this.ssrMode,clientAwareness:this.clientAwareness,onBroadcast:function(){e.devToolsHookCb&&e.devToolsHookCb({action:{},state:{queries:e.queryManager?e.queryManager.queryStore.getStore():{},mutations:e.queryManager?e.queryManager.mutationStore.getStore():{}},dataWithOptimisticResults:e.cache.extract(!0)})}})),this.queryManager},e.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager?e.queryManager.clearStore():Promise.resolve(null)}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(e){return e()}))}).then(function(){return e.queryManager&&e.queryManager.reFetchObservableQueries?e.queryManager.reFetchObservableQueries():Promise.resolve(null)})},e.prototype.clearStore=function(){var e=this,t=this.queryManager;return Promise.resolve().then(function(){return Promise.all(e.clearStoreCallbacks.map(function(e){return e()}))}).then(function(){return t?t.clearStore():Promise.resolve(null)})},e.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter(function(t){return t!==e})}},e.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter(function(t){return t!==e})}},e.prototype.reFetchObservableQueries=function(e){return this.queryManager?this.queryManager.reFetchObservableQueries(e):Promise.resolve(null)},e.prototype.extract=function(e){return this.initProxy().extract(e)},e.prototype.restore=function(e){return this.initProxy().restore(e)},e.prototype.initProxy=function(){return this.proxy||(this.initQueryManager(),this.proxy=this.cache),this.proxy},e}();t.a=R},82:function(e,t){t.version="2.4.13"}}]);