(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{117:function(t,e,n){(t.exports=n(48)(!1)).push([t.i,".ELVIZ_chart-title {\n  font-weight: bold;\n  text-align: center;\n}\n\n.ELVIZ_percentage-label {\n  font-style: italic;\n}\n\n.ELVIZ_tooltip {\t\n  position: absolute;\t\t\t\n  text-align: center;\t\t\t\t\n  display: inline-block;\t\t\n  padding: 4px;\t\t\t\t\n  font: 12px sans-serif;\t\t\n  background: white;\t\n  display: inline-block;\n  border: 0px;\t\t\n  border-radius: 3px;\t\t\t\n  pointer-events: none;\t\t\t\n}\n\n.ELVIZ_grouprect {\t\n  fill: #DEDEDE;\n}\n\n.ELVIZ_stylesheet-tv {\n  background: rgb(0, 53, 97);\n  color: white;\n  overflow: hidden;\n}\n\n.ELVIZ_stylesheet-tv .ELVIZ_grouprect{\n  fill: rgb(21, 73, 117);\n}\n\n.ELVIZ_stylesheet-tv svg {\n  color: white;\n}\n.ELVIZ_stylesheet-tv text {\n  fill: white;\n  color: white;\n}\n",""])},119:function(t,e,n){(t.exports=n(48)(!1)).push([t.i,"text {\n    user-select: none;\n}\n.ELVIZ_map-title {\n    font-weight: bold;\n    text-align: center;\n}\n\n.ELVIZ_loading-spinner {\n    position: absolute;\n    left: calc(50% - 50px);\n    top: calc(50% - 50px);\n}\n\n.ELVIZ_tooltip {\t\n    position: absolute;\t\t\t\n    text-align: center;\t\t\t\t\n    display: inline-block;\t\t\n    padding: 4px;\t\t\t\t\n    font: 12px sans-serif;\t\t\n    background: white;\t\n    display: inline-block;\n    border: 0px;\t\t\n    border-radius: 3px;\t\t\t\n    pointer-events: none;\t\t\t\n}\n\n.ELVIZ_stylesheet-tv {\n  background: rgb(0, 53, 97);\n  color: white;\n  overflow: hidden;\n}\n\n.ELVIZ_stylesheet-tv a{\n  color: white;\n}\n.ELVIZ_stylesheet-tv a:hover{\n  color: white;\n}\n\n.ELVIZ_stylesheet-tv .legend {\n    fill: white;\n}\n\n.ELVIZ_stylesheet-tv .legend text{\n    fill: white;\n}\n\n.ELVIZ_stylesheet-web a{\n  color: black;\n}\n\n.ELVIZ_stylesheet-none a{\n  color: black;\n}\n\n.ELVIZ_stylesheet-web a:hover{\n  color: purple;\n}\n\n.ELVIZ_stylesheet-none a:hover{\n  color: purple;\n}",""])},12:function(t,e,n){"use strict";n.d(e,"g",function(){return i}),n.d(e,"a",function(){return a}),n.d(e,"d",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"b",function(){return u}),n.d(e,"f",function(){return l}),n.d(e,"e",function(){return h});var r=n(0);function i(t){return[Object(r.e)(t[1],t[0]),Object(r.c)(t[2])]}function a(t){var e=t[0],n=t[1],i=Object(r.g)(n);return[i*Object(r.g)(e),i*Object(r.t)(e),Object(r.t)(n)]}function o(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function s(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function u(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function l(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function h(t){var e=Object(r.u)(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}},120:function(t,e,n){(t.exports=n(48)(!1)).push([t.i,".ELVIZ_tooltip {\t\n    position: absolute;\t\t\t\n    text-align: center;\t\t\t\t\n    display: inline-block;\t\t\n    padding: 4px;\t\t\t\t\n    font: 12px sans-serif;\t\t\n    background: white;\t\n    display: inline-block;\n    border: 0px;\t\t\n    border-radius: 3px;\t\t\t\n    pointer-events: none;\t\t\t\n  }\n\n  .ELVIZ_stylesheet-tv {\n    background: rgb(0, 53, 97);\n    color: white;\n    overflow: hidden;\n  }",""])},126:function(t,e,n){(t.exports=n(48)(!1)).push([t.i,'.ELVIZ_tooltip {\t\n    position: absolute;\t\t\t\n    text-align: center;\t\t\t\t\n    display: inline-block;\t\t\n    padding: 4px;\t\t\t\t\n    font: 12px sans-serif;\t\t\n    background: white;\t\n    display: inline-block;\n    border: 0px;\t\t\n    border-radius: 3px;\t\t\t\n    pointer-events: none;\t\t\t\n}\n.ELVIZ_component-transition-menu {\n  padding: 15px;\n}\n.ELVIZ_component-transition-menu .label {\n  font-size: 12px;\n  line-height: 45px;\n}\n\n.ELVIZ_component-transition-menu button {\n  font-size: 14px;\n  height: 45px;\n  border-radius: 4px;\n  width: 100%;\n  outline: none;\n  color: black;\n}\n\n.ELVIZ_component-transition-menu button.active {\n  border: solid green 1px;\n}\n\n.ELVIZ_stylesheet-tv {\n  background: rgb(0, 53, 97);\n  color: white;\n  overflow: hidden;\n}\n.ELVIZ_stylesheet-tv .main-left-part {\n}\n.ELVIZ_stylesheet-tv .main-right-part {\n}\n\n\n.ELVIZ_row {\n  margin-right: -15px;\n  margin-left: -15px;\n}\n\n.ELVIZ_row::before {\n  display: table;\n  content: " ";\n}\n\n.ELVIZ_row::after {    \n  clear: both;\n  display: table;\n  content: " ";\n}\n\n@media (min-width: 992px) {\n  .ELVIZ_col-md-2 {\n    width: 14%;\n    float: left;\n    position: relative;\n    min-height: 1px;\n    padding-right: 15px;\n    padding-left: 15px;\n  }\n  \n  .ELVIZ_col-md-4 {\n    width: 32%;\n    float: left;\n    position: relative;\n    min-height: 1px;\n    padding-right: 15px;\n    padding-left: 15px;\n  }\n  \n  .ELVIZ_col-md-8 {\n    width: 62%;\n    float: left;\n    position: relative;\n    min-height: 1px;\n    padding-right: 15px;\n    padding-left: 15px;\n  }\n}',""])},127:function(t,e,n){(t.exports=n(48)(!1)).push([t.i,".ELVIZ_chart-title {\n    font-weight: bold;\n    text-align: center;\n}\n\n.ELVIZ_stylesheet-tv {\n  background: rgb(0, 53, 97);\n  color: white;\n  overflow: hidden;\n}\n\n.ELVIZ_stylesheet-tv svg {\n  color: white;\n}\n.ELVIZ_stylesheet-tv text {\n  fill: white;\n  color: white;\n}",""])},13:function(t,e,n){"use strict";var r=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function a(){}var o="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3})$/,h=/^#([0-9a-f]{6})$/,c=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),f=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),p=new RegExp("^rgba\\("+[o,o,o,s]+"\\)$"),d=new RegExp("^rgba\\("+[u,u,u,s]+"\\)$"),y=new RegExp("^hsl\\("+[s,u,u]+"\\)$"),m=new RegExp("^hsla\\("+[s,u,u,s]+"\\)$"),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(t){var e;return t=(t+"").trim().toLowerCase(),(e=l.exec(t))?new P((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=h.exec(t))?b(parseInt(e[1],16)):(e=c.exec(t))?new P(e[1],e[2],e[3],1):(e=f.exec(t))?new P(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=p.exec(t))?x(e[1],e[2],e[3],e[4]):(e=d.exec(t))?x(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=y.exec(t))?C(e[1],e[2]/100,e[3]/100,1):(e=m.exec(t))?C(e[1],e[2]/100,e[3]/100,e[4]):v.hasOwnProperty(t)?b(v[t]):"transparent"===t?new P(NaN,NaN,NaN,0):null}function b(t){return new P(t>>16&255,t>>8&255,255&t,1)}function x(t,e,n,r){return r<=0&&(t=e=n=NaN),new P(t,e,n,r)}function w(t){return t instanceof a||(t=g(t)),t?new P((t=t.rgb()).r,t.g,t.b,t.opacity):new P}function E(t,e,n,r){return 1===arguments.length?w(t):new P(t,e,n,null==r?1:r)}function P(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function A(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function C(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new T(t,e,n,r)}function O(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof T)return new T(t.h,t.s,t.l,t.opacity);if(t instanceof a||(t=g(t)),!t)return new T;if(t instanceof T)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,u=o-i,l=(o+i)/2;return u?(s=e===o?(n-r)/u+6*(n<r):n===o?(r-e)/u+2:(e-n)/u+4,u/=l<.5?o+i:2-o-i,s*=60):u=l>0&&l<1?0:s,new T(s,u,l,t.opacity)}(t):new T(t,e,n,null==r?1:r)}function T(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function S(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}r(a,g,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),r(P,E,i(a,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new P(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new P(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+A(this.r)+A(this.g)+A(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),r(T,O,i(a,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new T(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new T(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new P(S(t>=240?t-240:t+120,i,r),S(t,i,r),S(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var M=Math.PI/180,N=180/Math.PI,k=.96422,B=1,I=.82521,V=4/29,R=6/29,j=3*R*R,_=R*R*R;function D(t){if(t instanceof U)return new U(t.l,t.a,t.b,t.opacity);if(t instanceof Z){if(isNaN(t.h))return new U(t.l,0,0,t.opacity);var e=t.h*M;return new U(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof P||(t=w(t));var n,r,i=X(t.r),a=X(t.g),o=X(t.b),s=z((.2225045*i+.7168786*a+.0606169*o)/B);return i===a&&a===o?n=r=s:(n=z((.4360747*i+.3850649*a+.1430804*o)/k),r=z((.0139322*i+.0971045*a+.7141733*o)/I)),new U(116*s-16,500*(n-s),200*(s-r),t.opacity)}function L(t,e,n,r){return 1===arguments.length?D(t):new U(t,e,n,null==r?1:r)}function U(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function z(t){return t>_?Math.pow(t,1/3):t/j+V}function G(t){return t>R?t*t*t:j*(t-V)}function F(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function X(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Y(t){if(t instanceof Z)return new Z(t.h,t.c,t.l,t.opacity);if(t instanceof U||(t=D(t)),0===t.a&&0===t.b)return new Z(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*N;return new Z(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function W(t,e,n,r){return 1===arguments.length?Y(t):new Z(t,e,n,null==r?1:r)}function Z(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}r(U,L,i(a,{brighter:function(t){return new U(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new U(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new P(F(3.1338561*(e=k*G(e))-1.6168667*(t=B*G(t))-.4906146*(n=I*G(n))),F(-.9787684*e+1.9161415*t+.033454*n),F(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),r(Z,W,i(a,{brighter:function(t){return new Z(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Z(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return D(this).rgb()}}));var $=-.14861,H=1.78277,q=-.29227,J=-.90649,Q=1.97294,K=Q*J,tt=Q*H,et=H*q-J*$;function nt(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof rt)return new rt(t.h,t.s,t.l,t.opacity);t instanceof P||(t=w(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(et*r+K*e-tt*n)/(et+K-tt),a=r-i,o=(Q*(n-i)-q*a)/J,s=Math.sqrt(o*o+a*a)/(Q*i*(1-i)),u=s?Math.atan2(o,a)*N-120:NaN;return new rt(u<0?u+360:u,s,i,t.opacity)}(t):new rt(t,e,n,null==r?1:r)}function rt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}r(rt,nt,i(a,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new rt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new rt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*M,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new P(255*(e+n*($*r+H*i)),255*(e+n*(q*r+J*i)),255*(e+n*(Q*r)),this.opacity)}})),n.d(e,"a",function(){return g}),n.d(e,"f",function(){return E}),n.d(e,"d",function(){return O}),n.d(e,"e",function(){return L}),n.d(e,"c",function(){return W}),n.d(e,"b",function(){return nt})},131:function(t,e,n){(t.exports=n(48)(!1)).push([t.i,".ELVIZ_menu-widget {\n    max-height: 80vh;\n    overflow-y: scroll;\n}\n\n.ELVIZ_menu-widget::-webkit-scrollbar-track\n{\n\tbackground-color: transparent;\n}\n\n.ELVIZ_menu-widget::-webkit-scrollbar\n{\n\twidth: 6px;\n\tbackground-color: transparent;\n}\n\n.ELVIZ_menu-widget::-webkit-scrollbar-thumb\n{\n\tbackground-color: #000000;\n}",""])},132:function(t,e,n){(t.exports=n(48)(!1)).push([t.i,".ELVIZ_chart-title {\n  font-weight: bold;\n  text-align: center;\n}\n\n.ELVIZ_tooltip {\t\n  position: absolute;\t\t\t\n  text-align: center;\t\t\t\t\n  display: inline-block;\t\t\n  padding: 4px;\t\t\t\t\n  font: 12px sans-serif;\t\t\n  background: white;\t\n  display: inline-block;\n  border: 0px;\t\t\n  border-radius: 3px;\t\t\t\n  pointer-events: none;\t\t\t\n}\n\n.ELVIZ_stylesheet-tv {\n  background: rgb(0, 53, 97);\n  color: white;\n  overflow: hidden;\n}\n\n.ELVIZ_stylesheet-tv svg {\n  color: white;\n}\n.ELVIZ_stylesheet-tv text {\n  fill: white;\n  color: white;\n}",""])},177:function(t,e,n){"use strict";n(58);n(37);n(29),n(32);Math.PI,Math.sqrt(5)},178:function(t,e,n){"use strict";var r,i,a,o,s,u=n(27),l=n(0),h=n(14),c=(n(19),Object(u.a)()),f=Object(u.a)(),p={point:h.a,lineStart:h.a,lineEnd:h.a,polygonStart:function(){c.reset(),p.lineStart=d,p.lineEnd=y},polygonEnd:function(){var t=+c;f.add(t<0?l.w+t:t),this.lineStart=this.lineEnd=this.point=h.a},sphere:function(){f.add(l.w)}};function d(){p.point=m}function y(){v(r,i)}function m(t,e){p.point=v,r=t,i=e,t*=l.r,e*=l.r,a=t,o=Object(l.g)(e=e/2+l.q),s=Object(l.t)(e)}function v(t,e){t*=l.r,e=(e*=l.r)/2+l.q;var n=t-a,r=n>=0?1:-1,i=r*n,u=Object(l.g)(e),h=Object(l.t)(e),f=s*h,p=o*u+f*Object(l.g)(i),d=f*r*Object(l.t)(i);c.add(Object(l.e)(d,p)),a=t,o=u,s=h}n(12),Object(u.a)();var g,b,x,w,E,P,A,C,O,T={sphere:h.a,point:S,lineStart:N,lineEnd:I,polygonStart:function(){T.lineStart=V,T.lineEnd=R},polygonEnd:function(){T.lineStart=N,T.lineEnd=I}};function S(t,e){t*=l.r,e*=l.r;var n=Object(l.g)(e);M(n*Object(l.g)(t),n*Object(l.t)(t),Object(l.t)(e))}function M(t,e,n){b+=(t-b)/++g,x+=(e-x)/g,w+=(n-w)/g}function N(){T.point=k}function k(t,e){t*=l.r,e*=l.r;var n=Object(l.g)(e);A=n*Object(l.g)(t),C=n*Object(l.t)(t),O=Object(l.t)(e),T.point=B,M(A,C,O)}function B(t,e){t*=l.r,e*=l.r;var n=Object(l.g)(e),r=n*Object(l.g)(t),i=n*Object(l.t)(t),a=Object(l.t)(e),o=Object(l.e)(Object(l.u)((o=C*a-O*i)*o+(o=O*r-A*a)*o+(o=A*i-C*r)*o),A*r+C*i+O*a);o,o*(A+(A=r)),o*(C+(C=i)),o*(O+(O=a)),M(A,C,O)}function I(){T.point=S}function V(){T.point=j}function R(){_(E,P),T.point=S}function j(t,e){E=t,P=e,t*=l.r,e*=l.r,T.point=_;var n=Object(l.g)(e);A=n*Object(l.g)(t),C=n*Object(l.t)(t),O=Object(l.t)(e),M(A,C,O)}function _(t,e){t*=l.r,e*=l.r;var n=Object(l.g)(e),r=n*Object(l.g)(t),i=n*Object(l.t)(t),a=Object(l.t)(e),o=C*a-O*i,s=O*r-A*a,u=A*i-C*r,h=Object(l.u)(o*o+s*s+u*u),c=Object(l.c)(h),f=h&&-c/h;f*o,f*s,f*u,c,c*(A+(A=r)),c*(C+(C=i)),c*(O+(O=a)),M(A,C,O)}n(93),n(76),n(84),n(44),n(97);var D,L,U,z=Object(u.a)(),G={sphere:h.a,point:h.a,lineStart:function(){G.point=X,G.lineEnd=F},lineEnd:h.a,polygonStart:h.a,polygonEnd:h.a};function F(){G.point=G.lineEnd=h.a}function X(t,e){t*=l.r,e*=l.r,D=t,L=Object(l.t)(e),U=Object(l.g)(e),G.point=Y}function Y(t,e){t*=l.r,e*=l.r;var n=Object(l.t)(e),r=Object(l.g)(e),i=Object(l.a)(t-D),a=Object(l.g)(i),o=r*Object(l.t)(i),s=U*n-L*r*a,u=L*n+U*r*a;z.add(Object(l.e)(Object(l.u)(o*o+s*s),u)),D=t,L=n,U=r}n(6);var W=n(182),Z=(n(85),n(136),n(107),n(108),n(109),n(45),n(110),n(111),n(74),n(112),n(137),n(17),n(51));n(113),n(114),n(115),n(116),n(43),n(36);n.d(e,"b",function(){return W.a}),n.d(e,"a",function(){return Z.a})},179:function(t,e,n){"use strict";n(6),Array.prototype.slice},180:function(t,e,n){"use strict";var r=n(62);function i(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var a=function(t,e){return fetch(t,e).then(i)};function o(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),a(e,n).then(function(e){return t(e,r)})}}o(r.a),o(r.c);function s(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}var u=function(t,e){return fetch(t,e).then(s)};function l(t){return function(e,n){return a(e,n).then(function(e){return(new DOMParser).parseFromString(e,t)})}}l("application/xml"),l("text/html"),l("image/svg+xml");n.d(e,"a",function(){return u})},181:function(t,e,n){"use strict";n(6),Math.cos,Math.sin,Math.PI,Math.max;Array.prototype.slice,n(26)},183:function(t,e,n){"use strict";n(29),n(46),n(15),n(3),n(39);["e","w"].map(r),["n","s"].map(r),["n","e","s","w","nw","ne","se","sw"].map(r);function r(t){return{type:t}}},184:function(t,e,n){"use strict";var r=Array.prototype.slice,i=function(t){return t},a=1,o=2,s=3,u=4,l=1e-6;function h(t){return"translate("+(t+.5)+",0)"}function c(t){return"translate(0,"+(t+.5)+")"}function f(){return!this.__axis}function p(t,e){var n=[],p=null,d=null,y=6,m=6,v=3,g=t===a||t===u?-1:1,b=t===u||t===o?"x":"y",x=t===a||t===s?h:c;function w(r){var h=null==p?e.ticks?e.ticks.apply(e,n):e.domain():p,c=null==d?e.tickFormat?e.tickFormat.apply(e,n):i:d,w=Math.max(y,0)+v,E=e.range(),P=+E[0]+.5,A=+E[E.length-1]+.5,C=(e.bandwidth?function(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}:function(t){return function(e){return+t(e)}})(e.copy()),O=r.selection?r.selection():r,T=O.selectAll(".domain").data([null]),S=O.selectAll(".tick").data(h,e).order(),M=S.exit(),N=S.enter().append("g").attr("class","tick"),k=S.select("line"),B=S.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(N),k=k.merge(N.append("line").attr("stroke","currentColor").attr(b+"2",g*y)),B=B.merge(N.append("text").attr("fill","currentColor").attr(b,g*w).attr("dy",t===a?"0em":t===s?"0.71em":"0.32em")),r!==O&&(T=T.transition(r),S=S.transition(r),k=k.transition(r),B=B.transition(r),M=M.transition(r).attr("opacity",l).attr("transform",function(t){return isFinite(t=C(t))?x(t):this.getAttribute("transform")}),N.attr("opacity",l).attr("transform",function(t){var e=this.parentNode.__axis;return x(e&&isFinite(e=e(t))?e:C(t))})),M.remove(),T.attr("d",t===u||t==o?m?"M"+g*m+","+P+"H0.5V"+A+"H"+g*m:"M0.5,"+P+"V"+A:m?"M"+P+","+g*m+"V0.5H"+A+"V"+g*m:"M"+P+",0.5H"+A),S.attr("opacity",1).attr("transform",function(t){return x(C(t))}),k.attr(b+"2",g*y),B.attr(b,g*w).text(c),O.filter(f).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===o?"start":t===u?"end":"middle"),O.each(function(){this.__axis=C})}return w.scale=function(t){return arguments.length?(e=t,w):e},w.ticks=function(){return n=r.call(arguments),w},w.tickArguments=function(t){return arguments.length?(n=null==t?[]:r.call(t),w):n.slice()},w.tickValues=function(t){return arguments.length?(p=null==t?null:r.call(t),w):p&&p.slice()},w.tickFormat=function(t){return arguments.length?(d=t,w):d},w.tickSize=function(t){return arguments.length?(y=m=+t,w):y},w.tickSizeInner=function(t){return arguments.length?(y=+t,w):y},w.tickSizeOuter=function(t){return arguments.length?(m=+t,w):m},w.tickPadding=function(t){return arguments.length?(v=+t,w):v},w}function d(t){return p(s,t)}function y(t){return p(u,t)}n.d(e,"a",function(){return d}),n.d(e,"b",function(){return y})},2:function(t,e,n){"use strict";e.a={REGION_CHANGE:"region-change",CHART_PREVIEW:"chart-preview",MAP_PREVIEW:"map-preview",QUICK_RESULTS_PREVIEW:"quick-results-preview",EXPORT_PNG:"export-png"}},22:function(t,e,n){"use strict";var r=n(57),i=n(86),a=n(87),o=n(38),s=n(88),u=n(89),l=n(146),h=n(188),c=n(92),f=n(174),p=n(187),d=n(1),y=n.n(d),m=n(5),v=n(18),g=n.n(v),b=n(20),x=n(10),w=n.n(x),E=n(2),P=n(9),A=n(8),C=n(4);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var k;Object(A.e)();function B(t){return g.a[t]||t}function I(t){return B(P.a.CSS_PREFIX+t)}var V="Race For Votes Comparison",R=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?N(t):e}(this,S(e).call(this,t))).state={partyAbbr:"ANC",eventDescriptions:["National Elections 1999","14 Apr 2004 National Election","22 Apr 2009 National Election","2014 National Election","2019 NATIONAL ELECTION"],regionType:"national",provinceName:"",muniName:"",muniCode:"",iecId:"",stylesheetFor:"web",componentID:16},t.partyAbbr&&(n.state.partyAbbr=t.partyAbbr),t.regionType&&(n.state.regionType=t.regionType),t.provinceName&&(n.state.provinceName=t.provinceName),t.muniName&&(n.state.muniName=t.muniName),t.muniCode&&(n.state.muniCode=t.muniCode),t.iecId&&(n.state.iecId=t.iecId),t.componentID&&(n.state.componentID=t.componentID),n.chart=null,n.refreshIntervalID=0,n.exportAsPNG=n.exportAsPNG.bind(N(N(n))),n.exportAsPNGUri=n.exportAsPNGUri.bind(N(N(n))),n.handleRegionChange=n.handleRegionChange.bind(N(N(n))),n.handlePreviewEvent=n.handlePreviewEvent.bind(N(N(n))),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(e,d["Component"]),function(t,e,n){e&&T(t.prototype,e),n&&T(t,n)}(e,[{key:"componentDidMount",value:function(){var t=this;this.draw(this.getContainer(),this.state),this.refreshIntervalID=setInterval(function(){t.draw(t.getContainer(),t.state)},3e4),document.addEventListener(E.a.EXPORT_PNG,this.exportAsPNG),document.addEventListener(E.a.REGION_CHANGE,this.handleRegionChange),document.addEventListener(E.a.CHART_PREVIEW,this.handlePreviewEvent)}},{key:"componentDidUpdate",value:function(){this.draw(this.getContainer(),this.state)}},{key:"componentWillUnmount",value:function(){this.chart&&(this.chart.destroy(),this.chart=null),document.removeEventListener(E.a.EXPORT_PNG,this.exportAsPNG),document.removeEventListener(E.a.REGION_CHANGE,this.handleRegionChange),document.removeEventListener(E.a.CHART_PREVIEW,this.handlePreviewEvent),clearInterval(this.refreshIntervalID)}},{key:"exportAsPNGUri",value:function(){var t=this;return new Promise(function(e,n){w.a.svgAsPngUri(t.refs.vizcontainer.childNodes[0],{},function(t){e(t.split(",")[1])})})}},{key:"exportAsPNG",value:function(t){t.detail.componentID==this.state.componentID&&w.a.saveSvgAsPng(this.refs.vizcontainer.childNodes[0],"race-for-votes-comparison-barchart(".concat(Object(C.h)(this.state),").png"))}},{key:"handleRegionChange",value:function(t){var e=t.detail;this.setState(e)}},{key:"handlePreviewEvent",value:function(t){var e=t.detail;this.chart&&this.chart.destroy(),this.chart=new b.a(this.getContainer(),null,null,B),this.setState(e)}},{key:"getContainer",value:function(){return m.o(this.refs.vizcontainer)}},{key:"render",value:function(){var t=this.state.stylesheetFor;return y.a.createElement("div",{className:B("barchart")+" "+I("stylesheet-".concat(t))},y.a.createElement("div",{className:I("chart-title")},V," (",Object(C.h)(this.state),"): "),y.a.createElement("div",{ref:"vizcontainer",className:B("chart-body")}))}},{key:"draw",value:function(t,e){var n=this,r=[Object(A.k)(e)];if(!k){var i=Object(A.c)();r.push(i)}Promise.all(r).then(function(r){var i=r[0];k=k||r[1],n.drawGraph(t,e,i,k)}).catch(function(t){return console.error(t)})}},{key:"drawGraph",value:function(t,e,n,r){var i=Object(C.r)(n,e);this.chart||(this.chart=new b.a(t,null,null,B)),this.chart.draw(i,r)}}]),e}(),j=n(175),_=n(176),D=n(67);function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G(t,e){return(G=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function F(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var X;Object(A.e)();function Y(t){return g.a[t]||t}var W={topLabel:"NATIONAL ASSEMBLY: 2009, 2014, 2019",usedValue:"% VDS COUNTED",yValue:function(t){return t.percOfVotes},yValueFormat:function(t){return t+"%"},dynamicYAxisFromValues:!0},Z=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==L(e)&&"function"!=typeof e?F(t):e}(this,z(e).call(this,t))).state={partyAbbrs:["ANC","DA","EFF","ID"],eventDescriptions:["14 Apr 2004 National Election","22 Apr 2009 National Election","2014 National Election","2019 NATIONAL ELECTION"],regionType:"national",provinceName:"",muniName:"",muniCode:"",iecId:"",stylesheetFor:"web",componentID:14},t.partyAbbrs&&(n.state.partyAbbrs=t.partyAbbrs),t.regionType&&(n.state.regionType=t.regionType),t.provinceName&&(n.state.provinceName=t.provinceName),t.muniName&&(n.state.muniName=t.muniName),t.muniCode&&(n.state.muniCode=t.muniCode),t.iecId&&(n.state.iecId=t.iecId),t.componentID&&(n.state.componentID=t.componentID),n.chart=null,n.refreshIntervalID=0,n.exportAsPNG=n.exportAsPNG.bind(F(F(n))),n.exportAsPNGUri=n.exportAsPNGUri.bind(F(F(n))),n.handleRegionChange=n.handleRegionChange.bind(F(F(n))),n.handlePreviewEvent=n.handlePreviewEvent.bind(F(F(n))),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&G(t,e)}(e,d["Component"]),function(t,e,n){e&&U(t.prototype,e),n&&U(t,n)}(e,[{key:"componentDidMount",value:function(){var t=this;this.draw(this.getContainer(),this.state),this.refreshIntervalID=setInterval(function(){t.draw(t.getContainer(),t.state)},3e4),document.addEventListener(E.a.EXPORT_PNG,this.exportAsPNG),document.addEventListener(E.a.REGION_CHANGE,this.handleRegionChange),document.addEventListener(E.a.CHART_PREVIEW,this.handlePreviewEvent)}},{key:"componentDidUpdate",value:function(){this.draw(this.getContainer(),this.state)}},{key:"componentWillUnmount",value:function(){this.chart&&(this.chart.destroy(),this.chart=null),document.removeEventListener(E.a.EXPORT_PNG,this.exportAsPNG),document.removeEventListener(E.a.REGION_CHANGE,this.handleRegionChange),document.removeEventListener(E.a.CHART_PREVIEW,this.handlePreviewEvent),clearInterval(this.refreshIntervalID)}},{key:"exportAsPNGUri",value:function(){var t=this;return new Promise(function(e,n){w.a.svgAsPngUri(t.refs.vizcontainer.childNodes[0],{},function(t){e(t.split(",")[1])})})}},{key:"exportAsPNG",value:function(t){t.detail.componentID==this.state.componentID&&w.a.saveSvgAsPng(this.refs.vizcontainer.childNodes[0],"race-for-votes-comparison-barchart(".concat(Object(C.h)(this.state),").png"))}},{key:"handleRegionChange",value:function(t){var e=t.detail;this.setState(e)}},{key:"handlePreviewEvent",value:function(t){var e=t.detail;this.chart&&this.chart.destroy(),this.chart=new D.a(this.getContainer(),null,null,Y,W),this.setState(e)}},{key:"getContainer",value:function(){return m.o(this.refs.vizcontainer)}},{key:"render",value:function(){var t=this.state.stylesheetFor;return y.a.createElement("div",{className:Y("barchart")+" "+function(t){return Y(P.a.CSS_PREFIX+t)}("stylesheet-".concat(t))},y.a.createElement("div",{ref:"vizcontainer",className:Y("chart-body")}))}},{key:"draw",value:function(t,e){var n=this,r=[Object(A.k)(e)];if(W.topLabel="".concat(e.regionType.toUpperCase()," ASSEMBLY: ").concat(e.eventDescriptions.map(function(t){return/(19|20)\d{2}/g.exec(t)[0]}).join(", ")),"national"==e.regionType?W.topLabel="Race for Votes Comparison - National Assembly":W.topLabel="Race for Votes Comparison - ".concat(Object(C.h)(e)),!X){var i=Object(A.c)();r.push(i)}Promise.all(r).then(function(r){var i=r[0];X=X||r[1],n.drawGraph(t,e,i,X)}).catch(function(t){return console.error(t)})}},{key:"drawGraph",value:function(t,e,n,r){var i=Object(C.s)(n,e);this.chart||(this.chart=new D.a(t,null,null,Y,W)),this.chart.draw(i,r)}}]),e}(),$=n(68);function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function K(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var tt;Object(A.e)();function et(t){return g.a[t]||t}var nt={topLabel:"NATIONAL ASSEMBLY: 2009, 2014, 2019",usedValue:"% VDS COUNTED",yValue:function(t){return t.percOfVotes},yValueFormat:function(t){return(t>0?"+":"")+t.toFixed(2)+"%"},dynamicYAxisFromValues:!0},rt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==H(e)&&"function"!=typeof e?K(t):e}(this,J(e).call(this,t))).state={partyAbbrs:["ANC","DA","EFF","ID"],eventDescriptions:["22 Apr 2009 National Election","2014 National Election"],regionType:"national",provinceName:"",muniName:"",muniCode:"",iecId:"",stylesheetFor:"web",componentID:15},t.partyAbbrs&&(n.state.partyAbbrs=t.partyAbbrs),t.regionType&&(n.state.regionType=t.regionType),t.provinceName&&(n.state.provinceName=t.provinceName),t.muniName&&(n.state.muniName=t.muniName),t.muniCode&&(n.state.muniCode=t.muniCode),t.iecId&&(n.state.iecId=t.iecId),t.componentID&&(n.state.componentID=t.componentID),n.chart=null,n.refreshIntervalID=0,n.exportAsPNG=n.exportAsPNG.bind(K(K(n))),n.exportAsPNGUri=n.exportAsPNGUri.bind(K(K(n))),n.handleRegionChange=n.handleRegionChange.bind(K(K(n))),n.handlePreviewEvent=n.handlePreviewEvent.bind(K(K(n))),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}(e,d["Component"]),function(t,e,n){e&&q(t.prototype,e),n&&q(t,n)}(e,[{key:"componentDidMount",value:function(){var t=this;this.draw(this.getContainer(),this.state),this.refreshIntervalID=setInterval(function(){t.draw(t.getContainer(),t.state)},3e4),document.addEventListener(E.a.EXPORT_PNG,this.exportAsPNG),document.addEventListener(E.a.REGION_CHANGE,this.handleRegionChange),document.addEventListener(E.a.CHART_PREVIEW,this.handlePreviewEvent)}},{key:"componentDidUpdate",value:function(){this.draw(this.getContainer(),this.state)}},{key:"componentWillUnmount",value:function(){this.chart&&(this.chart.destroy(),this.chart=null),document.removeEventListener(E.a.EXPORT_PNG,this.exportAsPNG),document.removeEventListener(E.a.REGION_CHANGE,this.handleRegionChange),document.removeEventListener(E.a.CHART_PREVIEW,this.handlePreviewEvent),clearInterval(this.refreshIntervalID)}},{key:"exportAsPNGUri",value:function(){var t=this;return new Promise(function(e,n){w.a.svgAsPngUri(t.refs.vizcontainer.childNodes[0],{},function(t){e(t.split(",")[1])})})}},{key:"exportAsPNG",value:function(t){t.detail.componentID==this.state.componentID&&w.a.saveSvgAsPng(this.refs.vizcontainer.childNodes[0],"race-for-votes-swing-barchart(".concat(Object(C.h)(this.state),").png"))}},{key:"handleRegionChange",value:function(t){var e=t.detail;this.setState(e)}},{key:"handlePreviewEvent",value:function(t){var e=t.detail;this.chart&&this.chart.destroy(),this.chart=new $.a(this.getContainer(),null,null,et,nt),this.setState(e)}},{key:"getContainer",value:function(){return m.o(this.refs.vizcontainer)}},{key:"render",value:function(){var t=this.state.stylesheetFor;return y.a.createElement("div",{className:et("barchart")+" "+function(t){return et(P.a.CSS_PREFIX+t)}("stylesheet-".concat(t))},y.a.createElement("div",{ref:"vizcontainer",className:et("chart-body")}))}},{key:"draw",value:function(t,e){var n=this,r=[Object(A.k)(e)],i=e.eventDescriptions.map(function(t){return/(19|20)\d{2}/g.exec(t)[0]}).join("/");if("national"==e.regionType?nt.topLabel="National Assembly: Swing ".concat(i):nt.topLabel="".concat(Object(C.h)(e),": Swing ").concat(i),!tt){var a=Object(A.c)();r.push(a)}Promise.all(r).then(function(r){var i=r[0];tt=tt||r[1],n.drawGraph(t,e,i,tt)}).catch(function(t){return console.error(t)})}},{key:"drawGraph",value:function(t,e,n,r){var i=Object(C.s)(n,e);this.chart||(this.chart=new $.a(t,null,null,et,nt)),this.chart.draw(i,r)}}]),e}();n.d(e,"a",function(){return r.a}),n.d(e,"f",function(){return i.a}),n.d(e,"i",function(){return a.a}),n.d(e,"c",function(){return o.a}),n.d(e,"o",function(){return s.a}),n.d(e,"n",function(){return u.a}),n.d(e,"b",function(){return l.a}),n.d(e,"e",function(){return h.a}),n.d(e,"d",function(){return c.a}),n.d(e,"g",function(){return f.a}),n.d(e,"h",function(){return p.a}),n.d(e,"p",function(){return R}),n.d(e,"j",function(){return j.a}),n.d(e,"k",function(){return _.a}),n.d(e,"l",function(){return Z}),n.d(e,"m",function(){return rt})},233:function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=l(t),r=n[0],o=n[1],s=new a(function(t,e,n){return 3*(e+n)/4-n}(0,r,o)),u=0,h=o>0?r-4:r,c=0;c<h;c+=4)e=i[t.charCodeAt(c)]<<18|i[t.charCodeAt(c+1)]<<12|i[t.charCodeAt(c+2)]<<6|i[t.charCodeAt(c+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=255&e;2===o&&(e=i[t.charCodeAt(c)]<<2|i[t.charCodeAt(c+1)]>>4,s[u++]=255&e);1===o&&(e=i[t.charCodeAt(c)]<<10|i[t.charCodeAt(c+1)]<<4|i[t.charCodeAt(c+2)]>>2,s[u++]=e>>8&255,s[u++]=255&e);return s},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(c(t,o,o+16383>s?s:o+16383));1===i?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function h(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function c(t,e,n){for(var r,i=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),i.push(h(r));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},27:function(t,e,n){"use strict";function r(){this.reset()}e.a=function(){return new r},r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(t){a(i,t,this.t),a(this,i.s,this.s),this.s?this.t+=i.t:this.s=i.t},valueOf:function(){return this.s}};var i=new r;function a(t,e,n){var r=t.s=e+n,i=r-e,a=r-i;t.t=e-a+(n-i)}},29:function(t,e,n){"use strict";var r={value:function(){}};function i(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new a(r)}function a(t){this._=t}function o(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function s(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=r,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}a.prototype=i.prototype={constructor:a,on:function(t,e){var n,r=this._,i=function(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}(t+"",r),a=-1,u=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<u;)if(n=(t=i[a]).type)r[n]=s(r[n],t.name,e);else if(null==e)for(n in r)r[n]=s(r[n],t.name,null);return this}for(;++a<u;)if((n=(t=i[a]).type)&&(n=o(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new a(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var u=i;n.d(e,"a",function(){return u})},33:function(t,e,n){"use strict";var r=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},i=function(t){return(t=r(Math.abs(t)))?t[1]:NaN},a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(t){return new s(t)}function s(t){if(!(e=a.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}o.prototype=s.prototype,s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var u,l,h,c,f=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t},p=function(t,e){var n=r(t,e);if(!n)return t+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")},d={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return p(100*t,e)},r:p,s:function(t,e){var n=r(t,e);if(!n)return t+"";var i=n[0],a=n[1],o=a-(u=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+r(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},y=function(t){return t},m=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],v=function(t){var e=t.grouping&&t.thousands?function(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}(t.grouping,t.thousands):y,n=t.currency,r=t.decimal,a=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):y,s=t.percent||"%";function l(t){var i=(t=o(t)).fill,l=t.align,h=t.sign,c=t.symbol,p=t.zero,y=t.width,v=t.comma,g=t.precision,b=t.trim,x=t.type;"n"===x?(v=!0,x="g"):d[x]||(null==g&&(g=12),b=!0,x="g"),(p||"0"===i&&"="===l)&&(p=!0,i="0",l="=");var w="$"===c?n[0]:"#"===c&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",E="$"===c?n[1]:/[%p]/.test(x)?s:"",P=d[x],A=/[defgprs%]/.test(x);function C(t){var n,o,s,c=w,d=E;if("c"===x)d=P(t)+d,t="";else{var C=(t=+t)<0;if(t=P(Math.abs(t),g),b&&(t=f(t)),C&&0==+t&&(C=!1),c=(C?"("===h?h:"-":"-"===h||"("===h?"":h)+c,d=("s"===x?m[8+u/3]:"")+d+(C&&"("===h?")":""),A)for(n=-1,o=t.length;++n<o;)if(48>(s=t.charCodeAt(n))||s>57){d=(46===s?r+t.slice(n+1):t.slice(n))+d,t=t.slice(0,n);break}}v&&!p&&(t=e(t,1/0));var O=c.length+t.length+d.length,T=O<y?new Array(y-O+1).join(i):"";switch(v&&p&&(t=e(T+t,T.length?y-d.length:1/0),T=""),l){case"<":t=c+t+d+T;break;case"=":t=c+T+t+d;break;case"^":t=T.slice(0,O=T.length>>1)+c+t+d+T.slice(O);break;default:t=T+c+t+d}return a(t)}return g=null==g?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),C.toString=function(){return t+""},C}return{format:l,formatPrefix:function(t,e){var n=l(((t=o(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(i(e)/3))),a=Math.pow(10,-r),s=m[8+r/3];return function(t){return n(a*t)+s}}}};!function(t){l=v(t),h=l.format,c=l.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var g=function(t){return Math.max(0,-i(Math.abs(t)))},b=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(i(e)/3)))-i(Math.abs(t)))},x=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,i(e)-i(t))+1};n.d(e,"a",function(){return h}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return g}),n.d(e,"e",function(){return b}),n.d(e,"f",function(){return x})},35:function(t,e,n){"use strict";e.a=function(t){return t}},37:function(t,e,n){"use strict";function r(){}function i(t,e){var n=new r;if(t instanceof r)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,a=-1,o=t.length;if(null==e)for(;++a<o;)n.set(a,t[a]);else for(;++a<o;)n.set(e(i=t[a],a,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}r.prototype=i.prototype={constructor:r,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var a=i;function o(){}var s=a.prototype;function u(t,e){var n=new o;if(t instanceof o)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}o.prototype=u.prototype={constructor:o,has:s.has,add:function(t){return this["$"+(t+="")]=t,this},remove:s.remove,clear:s.clear,values:s.keys,size:s.size,empty:s.empty,each:s.each};n.d(e,"a",function(){return a})},4:function(t,e,n){"use strict";n.d(e,"t",function(){return u}),n.d(e,"r",function(){return l}),n.d(e,"s",function(){return h}),n.d(e,"k",function(){return c}),n.d(e,"j",function(){return f}),n.d(e,"n",function(){return p}),n.d(e,"l",function(){return d}),n.d(e,"m",function(){return y}),n.d(e,"p",function(){return m}),n.d(e,"q",function(){return v}),n.d(e,"o",function(){return g}),n.d(e,"h",function(){return b}),n.d(e,"f",function(){return x}),n.d(e,"a",function(){return w}),n.d(e,"b",function(){return E}),n.d(e,"u",function(){return P}),n.d(e,"c",function(){return A}),n.d(e,"i",function(){return C}),n.d(e,"d",function(){return O}),n.d(e,"e",function(){return T}),n.d(e,"g",function(){return S});var r=n(5),i=n(9);function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){o(t,e,n[e])})}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){return 0==e?0:(t/e*100).toFixed(2)}function u(t,e){var n,r=e.regionType;if(!(n="national"==r?t.data.allBallots.edges[0]:"province"==r?t.data.allProvincialBallots.edges[0]:"municipality"==r?t.data.allMunicipalBallots.edges[0]:t.data.allVotingDistrictBallots.edges[0]))return console.error("party data is empty!!"),null;var i=n.node;return(i.partyResults||i.topResult).edges.sort(function(t,e){return e.node.percOfVotes-t.node.percOfVotes}).slice(0,e.numParties).map(function(t){var e=t.node;return{name:e.party.abbreviation,validVotes:e.validVotes,percOfVotes:e.percOfVotes,partyInfo:e.party}})}function l(t,e){for(var n=e.regionType,r=("national"==n?t.data.allBallots.edges:"province"==n?t.data.allProvincialBallots.edges:"municipality"==n?t.data.allMunicipalBallots.edges:t.data.allVotingDistrictBallots.edges).map(function(t){var n=t.node,i=n.partyResults||n.topResult,a=(r=i.edges.filter(function(t){return t.node.party.abbreviation==e.partyAbbr}))[0];if(a){var o=a.node;return{name:n.event.description,percOfVotes:o.percOfVotes,partyInfo:o.party}}return{name:n.event.description,percOfVotes:0,partyInfo:{name:e.partyAbbr,abbreviation:e.partyAbbr}}}).filter(function(t){return-1!=e.eventDescriptions.indexOf(t.name)}).reverse(),i=[],a=0;a<e.eventDescriptions.length;a++){for(var o=!1,s=0;s<r.length;s++)if(r[s].name==e.eventDescriptions[a]){o=!0;i.push(r[s]);break}o||i.push({name:e.eventDescriptions[a],percOfVotes:0,partyInfo:{name:e.partyAbbr,abbreviation:e.partyAbbr}})}return i}function h(t,e){return e.partyAbbrs.map(function(n){var r=a({},e);return r.partyAbbr=n,{partyAbbr:n,data:l(t,r)}})}function c(t,e){var n,r=e.regionType;if(!(n="national"==r?t.data.allBallots.edges[0]:"province"==r?t.data.allProvincialBallots.edges[0]:"municipality"==r?t.data.allMunicipalBallots.edges[0]:t.data.allVotingDistrictBallots.edges[0]))return console.error("progress votes count data is empty!!"),null;var i=n.node;return[{name:"Completed",percent:s(i.vdWithResultsCaptured,i.vdCount),totalCount:i.vdCount,count:i.vdWithResultsCaptured},{name:"Not Completed",percent:100-s(i.vdWithResultsCaptured,i.vdCount),totalCount:i.vdCount,count:i.vdCount-i.vdWithResultsCaptured}]}function f(t,e){if(!t)return null;var n={},r=e.regionType;return"national"===r?t.data.topPartiesByProvince.edges.forEach(function(t){var e=t.node,r=e.location.name,i=e.topParty.party.name;n[r]=i}):"province"===r?t.data.topPartiesByMunicipality.edges.forEach(function(t){var e=t.node,r=e.location.code,i=e.topParty.party.name;n[r]=i}):t.data.topPartiesByVotingDistrict.edges.forEach(function(t){var e=t.node,r=e.location.iecId,i=e.topParty.party.name;n[r]=i}),n}function p(t,e){if(!t)return null;var n=t.data.allSeatCalculations.edges,r=e.regionType;return n.map(function(t){var e=t.node;return{seats:"national"===r?e.nationalPr+e.regional:e.regional,name:e.party.abbreviation,partyInfo:e.party}}).slice(0,e.numParties)}function d(t,e){if(!t)return null;for(var n=t.data.allSeatCalculations.edges,r=e.regionType,i=n.map(function(t){var e=t.node;return{seats:"national"===r?e.nationalPr+e.regional:e.regional,name:e.party.event.description,partyInfo:e.party}}).filter(function(t){return-1!=e.eventDescriptions.indexOf(t.name)}).filter(function(t){return t.partyInfo.abbreviation==e.partyAbbr}),a=[],o=0;o<e.eventDescriptions.length;o++){for(var s=!1,u=0;u<i.length;u++)if(i[u].name==e.eventDescriptions[o]){s=!0;a.push(i[u]);break}s||a.push({name:e.eventDescriptions[o],seats:0,partyInfo:{name:e.partyAbbr,abbreviation:e.partyAbbr}})}return a}function y(t,e){return e.partyAbbrs.map(function(n){var r=a({},e);return r.partyAbbr=n,{partyAbbr:n,data:d(t,r)}})}function m(t,e){if(!t)return null;var n={},r=e.regionType;return"national"===r?t.data.allProvincialBallots.edges.forEach(function(t){var e=t.node,r=e.location.name,i=e.percVoterTurnout;n[r]=i}):"province"===r?t.data.allMunicipalBallots.edges.forEach(function(t){var e=t.node,r=e.location.code,i=e.percVoterTurnout;n[r]=i}):t.data.allVotingDistrictBallots.edges.forEach(function(t){var e=t.node,r=e.location.iecId,i=e.percVoterTurnout;n[r]=i}),n}function v(t,e){if(!t)return null;var n,r=e.regionType;return"national"==r?n=t.data.allBallots.edges:"province"==r?n=t.data.allProvincialBallots.edges:"municipality"==r?n=t.data.allMunicipalBallots.edges:"municipality-vd"==r&&(n=t.data.allVotingDistrictBallots.edges),n.map(function(t){var e=t.node;return{name:e.event.description,percVoterTurnout:e.percVoterTurnout}}).filter(function(t){return-1!=t.name.toLowerCase().indexOf(e.eventType)})}function g(t,e){var n,r=e.regionType;if(!(n="national"==r?t.data.allBallots.edges[0]:"province"==r?t.data.allProvincialBallots.edges[0]:"municipality"==r?t.data.allMunicipalBallots.edges[0]:t.data.allVotingDistrictBallots.edges[0]))return console.error("spoilt data is empty!!"),null;var i=n.node;return[{name:"Valid",percent:s(i.totalValidVotes,i.totalVotesCast)},{name:"Spoilt",percent:s(i.spoiltVotes,i.totalVotesCast)}]}function b(t){function e(t){return-1!=t.indexOf(" - ")&&(t=t.split(" - ")[1]),-1!=t.indexOf("[")&&(t=t.split("[")[0]),t}return"national"==t.regionType?"South Africa":"province"==t.regionType?t.provinceName:"municipality"==t.regionType?e(t.muniName):"municipality-vd"==t.regionType?e(t.muniName)+"-"+t.iecId:void 0}function x(t){return"national"==t.regionType?"South Africa":t.provinceName}function w(t){var e=t(i.a.CSS_PREFIX+"tooltip");return document.getElementsByClassName(e)[0]?r.o(".".concat(e)):r.o("body").append("div").attr("class",e).style("opacity",0)}function E(){var t,e=document.getElementsByClassName("place-label"),n={},r={};for(t=0;t<e.length;t++)n[t]=e[t].getBoundingClientRect();for(t=0;t<e.length;t++){for(var i=0;i<t;i++){var a=n[t],o=n[i];!(a.right<o.left||a.left>o.right||a.bottom<o.top||a.top>o.bottom)&&(r[t]=r[t]?r[t]+1:1)}r[t]>2?e[t].setAttribute("opacity",0):r[t]>0&&(e[t].innerHTML=e[t].innerHTML.slice(0,3)+"...")}}function P(t,e){var n=new CustomEvent(t,{detail:e});document.dispatchEvent(n)}function A(t){return t.split("/")[0].toLowerCase().replace(/\b\w/g,function(t){return t.toUpperCase()})}function C(t,e){return"national"===e.regionType?t.SPROVINCE:"province"===e.regionType?t.smunicipal&&t.smunicipal.split(" - ")[1].split("[")[0]:t.Municipali?t.Municipali.split(" - ")[1].split("[")[0]:t.SMUNICIPAL&&t.SMUNICIPAL.split(" - ")[1].split("[")[0]}function O(t){return t.code||t.smunicipal&&t.smunicipal.split(" - ")[0].replace(/\s/g,"")}function T(t){return t.VDNumber||t.PKLVDNUMBE}function S(t){switch(t.regionType){case"national":return"province_lo-res.geojson";case"province":return function(t){return{Limpopo:"lim_lo-res.geojson",Mpumalanga:"mp_lo-res.geojson",Gauteng:"gt_lo-res.geojson","KwaZulu-Natal":"kzn_lo-res.geojson","North West":"nw_lo-res.geojson","Free State":"fs_lo-res.geojson","Eastern Cape":"ec_lo-res.geojson","Northern Cape":"nc_lo-res.geojson","Western Cape":"wc_lo-res.geojson"}[t]}(t.provinceName);case"municipality":return t.muniCode+".topojson";case"municipality-vd":return"vd-data/"+t.muniCode+"-"+t.iecId+".topojson";default:return null}}},44:function(t,e,n){"use strict";var r=n(0),i=n(95),a=function(t,e,n,r,i,a){var o,s=t[0],u=t[1],l=0,h=1,c=e[0]-s,f=e[1]-u;if(o=n-s,c||!(o>0)){if(o/=c,c<0){if(o<l)return;o<h&&(h=o)}else if(c>0){if(o>h)return;o>l&&(l=o)}if(o=i-s,c||!(o<0)){if(o/=c,c<0){if(o>h)return;o>l&&(l=o)}else if(c>0){if(o<l)return;o<h&&(h=o)}if(o=r-u,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>l&&(l=o)}if(o=a-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<h&&(h=o)}return l>0&&(t[0]=s+l*c,t[1]=u+l*f),h<1&&(e[0]=s+h*c,e[1]=u+h*f),!0}}}}},o=n(96),s=n(6);n.d(e,"a",function(){return h});var u=1e9,l=-u;function h(t,e,n,h){function c(r,i){return t<=r&&r<=n&&e<=i&&i<=h}function f(r,i,a,o){var s=0,u=0;if(null==r||(s=p(r,a))!==(u=p(i,a))||y(r,i)<0^a>0)do{o.point(0===s||3===s?t:n,s>1?h:e)}while((s=(s+a+4)%4)!==u);else o.point(i[0],i[1])}function p(i,a){return Object(r.a)(i[0]-t)<r.i?a>0?0:3:Object(r.a)(i[0]-n)<r.i?a>0?2:1:Object(r.a)(i[1]-e)<r.i?a>0?1:0:a>0?3:2}function d(t,e){return y(t.x,e.x)}function y(t,e){var n=p(t,1),r=p(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){var p,y,m,v,g,b,x,w,E,P,A,C=r,O=Object(i.a)(),T={point:S,lineStart:function(){T.point=M,y&&y.push(m=[]);P=!0,E=!1,x=w=NaN},lineEnd:function(){p&&(M(v,g),b&&E&&O.rejoin(),p.push(O.result()));T.point=S,E&&C.lineEnd()},polygonStart:function(){C=O,p=[],y=[],A=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=y.length;n<r;++n)for(var i,a,o=y[n],s=1,u=o.length,l=o[0],c=l[0],f=l[1];s<u;++s)i=c,a=f,l=o[s],c=l[0],f=l[1],a<=h?f>h&&(c-i)*(h-a)>(f-a)*(t-i)&&++e:f<=h&&(c-i)*(h-a)<(f-a)*(t-i)&&--e;return e}(),n=A&&e,i=(p=Object(s.f)(p)).length;(n||i)&&(r.polygonStart(),n&&(r.lineStart(),f(null,null,1,r),r.lineEnd()),i&&Object(o.a)(p,d,e,f,r),r.polygonEnd());C=r,p=y=m=null}};function S(t,e){c(t,e)&&C.point(t,e)}function M(r,i){var o=c(r,i);if(y&&m.push([r,i]),P)v=r,g=i,b=o,P=!1,o&&(C.lineStart(),C.point(r,i));else if(o&&E)C.point(r,i);else{var s=[x=Math.max(l,Math.min(u,x)),w=Math.max(l,Math.min(u,w))],f=[r=Math.max(l,Math.min(u,r)),i=Math.max(l,Math.min(u,i))];a(s,f,t,e,n,h)?(E||(C.lineStart(),C.point(s[0],s[1])),C.point(f[0],f[1]),o||C.lineEnd(),A=!1):o&&(C.lineStart(),C.point(r,i),A=!1)}x=r,w=i,E=o}return T}}},46:function(t,e,n){"use strict";n(29);var r=n(3);var i=function(){r.b.preventDefault(),r.b.stopImmediatePropagation()},a=function(t){var e=t.document.documentElement,n=Object(r.f)(t).on("dragstart.drag",i,!0);"onselectstart"in e?n.on("selectstart.drag",i,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function o(t,e){var n=t.document.documentElement,a=Object(r.f)(t).on("dragstart.drag",null);e&&(a.on("click.drag",i,!0),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in n?a.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function s(t,e,n,r,i,a,o,s,u,l){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=s,this.dy=u,this._=l}s.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o})},48:function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),a=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(a).concat([i]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},6:function(t,e,n){"use strict";var r=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},i=function(t){return 1===t.length&&(t=function(t){return function(e,n){return r(t(e),n)}}(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}};var a=i(r),o=a.right,s=(a.left,o);var u=function(t){return null===t?NaN:+t},l=function(t,e){var n,r,i,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=i=n;++o<a;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},h=Array.prototype,c=(h.slice,h.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}),f=Math.sqrt(50),p=Math.sqrt(10),d=Math.sqrt(2),y=function(t,e,n){var r,i,a,o,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=m(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(t-s)/o;return r&&a.reverse(),a};function m(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=f?10:a>=p?5:a>=d?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=f?10:a>=p?5:a>=d?2:1)}function v(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=f?i*=10:a>=p?i*=5:a>=d&&(i*=2),e<t?-i:i}var g=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},b=function(t,e,n){if(null==n&&(n=u),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(i-a)}},x=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r},w=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--o]=r[e];return n},E=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&r>n&&(r=n);return r};n.d(e,"b",function(){return s}),n.d(e,"a",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"d",function(){return l}),n.d(e,"j",function(){return g}),n.d(e,"e",function(){return x}),n.d(e,"f",function(){return w}),n.d(e,"g",function(){return E}),n.d(e,"h",function(){return b}),n.d(e,"i",function(){return c}),n.d(e,"m",function(){return y}),n.d(e,"k",function(){return m}),n.d(e,"l",function(){return v})},62:function(t,e,n){"use strict";var r={},i={},a=34,o=10,s=13;function u(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function l(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function h(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function c(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+h(-t,6):t>9999?"+"+h(t,6):h(t,4)}(t.getUTCFullYear())+"-"+h(t.getUTCMonth()+1,2)+"-"+h(t.getUTCDate(),2)+(i?"T"+h(e,2)+":"+h(n,2)+":"+h(r,2)+"."+h(i,3)+"Z":r?"T"+h(e,2)+":"+h(n,2)+":"+h(r,2)+"Z":n||e?"T"+h(e,2)+":"+h(n,2)+"Z":"")}var f=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function h(t,e){var u,l=[],h=t.length,c=0,f=0,p=h<=0,d=!1;function y(){if(p)return i;if(d)return d=!1,r;var e,u,l=c;if(t.charCodeAt(l)===a){for(;c++<h&&t.charCodeAt(c)!==a||t.charCodeAt(++c)===a;);return(e=c)>=h?p=!0:(u=t.charCodeAt(c++))===o?d=!0:u===s&&(d=!0,t.charCodeAt(c)===o&&++c),t.slice(l+1,e-1).replace(/""/g,'"')}for(;c<h;){if((u=t.charCodeAt(e=c++))===o)d=!0;else if(u===s)d=!0,t.charCodeAt(c)===o&&++c;else if(u!==n)continue;return t.slice(l,e)}return p=!0,t.slice(l,h)}for(t.charCodeAt(h-1)===o&&--h,t.charCodeAt(h-1)===s&&--h;(u=y())!==i;){for(var m=[];u!==r&&u!==i;)m.push(u),u=y();e&&null==(m=e(m,f++))||l.push(m)}return l}function f(e,n){return e.map(function(e){return n.map(function(t){return d(e[t])}).join(t)})}function p(e){return e.map(d).join(t)}function d(t){return null==t?"":t instanceof Date?c(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,i=h(t,function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=u(t);return function(r,i){return e(n(r),i,t)}}(t,e):u(t)});return i.columns=r||[],i},parseRows:h,format:function(e,n){return null==n&&(n=l(e)),[n.map(d).join(t)].concat(f(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=l(t)),f(t,e).join("\n")},formatRows:function(t){return t.map(p).join("\n")}}},p=f(","),d=p.parse,y=(p.parseRows,p.format,p.formatBody,p.formatRows,f("\t")),m=y.parse;y.parseRows,y.format,y.formatBody,y.formatRows;n.d(e,"b",function(){return f}),n.d(e,"a",function(){return d}),n.d(e,"c",function(){return m})},65:function(t,e,n){t.exports=function(t,e){"use strict";var n;return t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e,function(n){var r;function i(){return document.createElement("canvas")}n.exports,(r=window).DOMParser=window.DOMParser;var a,o=function(n,s,u){if(null!=n||null!=s||null!=u){var l=function(n){var o={opts:n,FRAMERATE:30,MAX_VIRTUAL_PIXELS:3e4,rootEmSize:12,emSize:12,log:function(t){}};1==o.opts.log&&"undefined"!=typeof console&&(o.log=function(t){console.log(t)}),o.init=function(t){var e=0;o.UniqueId=function(){return"canvg"+ ++e},o.Definitions={},o.Styles={},o.StylesSpecificity={},o.Animations=[],o.Images=[],o.ctx=t,o.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},o.init(),o.ImagesLoaded=function(){for(var t=0;t<o.Images.length;t++)if(!o.Images[t].loaded)return!1;return!0},o.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},o.compressSpaces=function(t){return t.replace(/(?!\u3000)\s+/gm," ")},o.ajax=function(t){var e;return(e=r.XMLHttpRequest?new r.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(e.open("GET",t,!1),e.send(null),e.responseText):null},o.parseXml=function(t){if("undefined"!=typeof Windows&&void 0!==Windows.Data&&void 0!==Windows.Data.Xml){var e=new Windows.Data.Xml.Dom.XmlDocument,i=new Windows.Data.Xml.Dom.XmlLoadSettings;return i.prohibitDtd=!1,e.loadXml(t,i),e}if(!r.DOMParser){t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}try{var a=n.xmldom?new r.DOMParser(n.xmldom):new r.DOMParser;return a.parseFromString(t,"image/svg+xml")}catch(e){return(a=n.xmldom?new r.DOMParser(n.xmldom):new r.DOMParser).parseFromString(t,"text/xml")}},o.Property=function(t,e){this.name=t,this.value=e},o.Property.prototype.getValue=function(){return this.value},o.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},o.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},o.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},o.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},o.Property.prototype.addOpacity=function(e){var n=this.value;if(null!=e.value&&""!=e.value&&"string"==typeof this.value){var r=new t(this.value);r.ok&&(n="rgba("+r.r+", "+r.g+", "+r.b+", "+e.numValue()+")")}return new o.Property(this.name,n)},o.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),o.Definitions[t]},o.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},o.Property.prototype.getFillStyleDefinition=function(t,e){var n=this.getDefinition();if(null!=n&&n.createGradient)return n.createGradient(o.ctx,t,e);if(null!=n&&n.createPattern){if(n.getHrefAttribute().hasValue()){var r=n.attribute("patternTransform");n=n.getHrefAttribute().getDefinition(),r.hasValue()&&(n.attribute("patternTransform",!0).value=r.value)}return n.createPattern(o.ctx,t)}return null},o.Property.prototype.getDPI=function(t){return 96},o.Property.prototype.getREM=function(t){return o.rootEmSize},o.Property.prototype.getEM=function(t){return o.emSize},o.Property.prototype.getUnits=function(){var t=this.value+"";return t.replace(/[0-9\.\-]/g,"")},o.Property.prototype.isPixels=function(){if(!this.hasValue())return!1;var t=this.value+"";return!!t.match(/px$/)||!!t.match(/^[0-9]+$/)},o.Property.prototype.toPixels=function(t,e){if(!this.hasValue())return 0;var n=this.value+"";if(n.match(/rem$/))return this.numValue()*this.getREM(t);if(n.match(/em$/))return this.numValue()*this.getEM(t);if(n.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(n.match(/px$/))return this.numValue();if(n.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(n.match(/pc$/))return 15*this.numValue();if(n.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(n.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(n.match(/in$/))return this.numValue()*this.getDPI(t);if(n.match(/%$/))return this.numValue()*o.ViewPort.ComputeSize(t);var r=this.numValue();return e&&r<1?r*o.ViewPort.ComputeSize(t):r},o.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():(t.match(/ms$/),this.numValue())},o.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var s={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return o.Property.prototype.toTextBaseline=function(){return this.hasValue()?s[this.value]:null},o.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(t,e,n,r,i,a){var s=null!=a?this.Parse(a):this.CreateFont("","","","","",o.ctx.font);return{fontFamily:i=i||s.fontFamily,fontSize:r||s.fontSize,fontStyle:t||s.fontStyle,fontWeight:n||s.fontWeight,fontVariant:e||s.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(e){for(var n={},r=o.trim(o.compressSpaces(e||"")).split(" "),i={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},a="",s=0;s<r.length;s++)i.fontStyle||-1==t.Styles.indexOf(r[s])?i.fontVariant||-1==t.Variants.indexOf(r[s])?i.fontWeight||-1==t.Weights.indexOf(r[s])?i.fontSize?"inherit"!=r[s]&&(a+=r[s]):("inherit"!=r[s]&&(n.fontSize=r[s].split("/")[0]),i.fontStyle=i.fontVariant=i.fontWeight=i.fontSize=!0):("inherit"!=r[s]&&(n.fontWeight=r[s]),i.fontStyle=i.fontVariant=i.fontWeight=!0):("inherit"!=r[s]&&(n.fontVariant=r[s]),i.fontStyle=i.fontVariant=!0):("inherit"!=r[s]&&(n.fontStyle=r[s]),i.fontStyle=!0);return""!=a&&(n.fontFamily=a),n}},o.ToNumberArray=function(t){for(var e=o.trim(o.compressSpaces((t||"").replace(/,/g," "))).split(" "),n=0;n<e.length;n++)e[n]=parseFloat(e[n]);return e},o.Point=function(t,e){this.x=t,this.y=e},o.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},o.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],n=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=n},o.CreatePoint=function(t){var e=o.ToNumberArray(t);return new o.Point(e[0],e[1])},o.CreatePath=function(t){for(var e=o.ToNumberArray(t),n=[],r=0;r<e.length;r+=2)n.push(new o.Point(e[r],e[r+1]));return n},o.BoundingBox=function(t,e,n,r){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,n,r,i,a){var o=t+2/3*(n-t),s=e+2/3*(r-e),u=o+1/3*(i-t),l=s+1/3*(a-e);this.addBezierCurve(t,e,o,u,s,l,i,a)},this.addBezierCurve=function(t,e,n,r,i,a,o,s){var u=[t,e],l=[n,r],h=[i,a],c=[o,s];this.addPoint(u[0],u[1]),this.addPoint(c[0],c[1]);for(var f=0;f<=1;f++){var p=function(t){return Math.pow(1-t,3)*u[f]+3*Math.pow(1-t,2)*t*l[f]+3*(1-t)*Math.pow(t,2)*h[f]+Math.pow(t,3)*c[f]},d=6*u[f]-12*l[f]+6*h[f],y=-3*u[f]+9*l[f]-9*h[f]+3*c[f],m=3*l[f]-3*u[f];if(0!=y){var v=Math.pow(d,2)-4*m*y;if(!(v<0)){var g=(-d+Math.sqrt(v))/(2*y);0<g&&g<1&&(0==f&&this.addX(p(g)),1==f&&this.addY(p(g)));var b=(-d-Math.sqrt(v))/(2*y);0<b&&b<1&&(0==f&&this.addX(p(b)),1==f&&this.addY(p(b)))}}else{if(0==d)continue;var x=-m/d;0<x&&x<1&&(0==f&&this.addX(p(x)),1==f&&this.addY(p(x)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,r)},o.Transform=function(t){var e=this;this.Type={},this.Type.translate=function(t){this.p=o.CreatePoint(t),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var e=o.ToNumberArray(t);this.angle=new o.Property("angle",e[0]),this.cx=e[1]||0,this.cy=e[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=o.CreatePoint(t),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=o.ToNumberArray(t),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var e=this.m[0],n=this.m[2],r=this.m[4],i=this.m[1],a=this.m[3],o=this.m[5],s=1/(e*(1*a-0*o)-n*(1*i-0*o)+r*(0*i-0*a));t.transform(s*(1*a-0*o),s*(0*o-1*i),s*(0*r-1*n),s*(1*e-0*r),s*(n*o-r*a),s*(r*i-e*o))},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=e.Type.matrix,this.base(t),this.angle=new o.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=e.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=e.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;0<=e;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var n=o.trim(o.compressSpaces(t)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),r=0;r<n.length;r++)if("none"!==n[r]){var i=o.trim(n[r].split("(")[0]),a=n[r].split("(")[1].replace(")",""),s=this.Type[i];if(void 0!==s){var u=new s(a);u.type=i,this.transforms.push(u)}}},o.AspectRatio=function(t,e,n,r,i,a,s,u,l,h){var c=(e=(e=o.compressSpaces(e)).replace(/^defer\s/,"")).split(" ")[0]||"xMidYMid",f=e.split(" ")[1]||"meet",p=n/r,d=i/a,y=Math.min(p,d),m=Math.max(p,d);"meet"==f&&(r*=y,a*=y),"slice"==f&&(r*=m,a*=m),l=new o.Property("refX",l),h=new o.Property("refY",h),l.hasValue()&&h.hasValue()?t.translate(-y*l.toPixels("x"),-y*h.toPixels("y")):(c.match(/^xMid/)&&("meet"==f&&y==d||"slice"==f&&m==d)&&t.translate(n/2-r/2,0),c.match(/YMid$/)&&("meet"==f&&y==p||"slice"==f&&m==p)&&t.translate(0,i/2-a/2),c.match(/^xMax/)&&("meet"==f&&y==d||"slice"==f&&m==d)&&t.translate(n-r,0),c.match(/YMax$/)&&("meet"==f&&y==p||"slice"==f&&m==p)&&t.translate(0,i-a)),"none"==c?t.scale(p,d):"meet"==f?t.scale(y,y):"slice"==f&&t.scale(m,m),t.translate(null==s?0:-s,null==u?0:-u)},o.Element={},o.EmptyProperty=new o.Property("EMPTY",""),o.Element.ElementBase=function(t){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(t,e){var n=this.attributes[t];return null!=n?n:(1==e&&(n=new o.Property(t,""),this.attributes[t]=n),n||o.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if("href"==t||t.match(/:href$/))return this.attributes[t];return o.EmptyProperty},this.style=function(t,e,n){var r=this.styles[t];if(null!=r)return r;var i=this.attribute(t);if(null!=i&&i.hasValue())return this.styles[t]=i;if(1!=n){var a=this.parent;if(null!=a){var s=a.style(t);if(null!=s&&s.hasValue())return s}}return 1==e&&(r=new o.Property(t,""),this.styles[t]=r),r||o.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(t.save(),this.style("mask").hasValue()){var e=this.style("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(t,e){var n=t;e&&(n=o.CreateElement(t)),n.parent=this,"title"!=n.type&&this.children.push(n)},this.addStylesFromStyleDefinition=function(){for(var e in o.Styles)if("@"!=e[0]&&a(t,e)){var n=o.Styles[e],r=o.StylesSpecificity[e];if(null!=n)for(var i in n){var s=this.stylesSpecificity[i];void 0===s&&(s="000"),s<r&&(this.styles[i]=n[i],this.stylesSpecificity[i]=r)}}};var e,n=new RegExp("^[A-Z-]+$");if(null!=t&&1==t.nodeType){for(var r=0;r<t.attributes.length;r++){var i=t.attributes[r],s=(e=i.nodeName,n.test(e)?e.toLowerCase():e);this.attributes[s]=new o.Property(s,i.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue()){var u=this.attribute("style").value.split(";");for(r=0;r<u.length;r++)if(""!=o.trim(u[r])){var l=u[r].split(":"),h=o.trim(l[0]),c=o.trim(l[1]);this.styles[h]=new o.Property(h,c)}}for(this.attribute("id").hasValue()&&null==o.Definitions[this.attribute("id").value]&&(o.Definitions[this.attribute("id").value]=this),r=0;r<t.childNodes.length;r++){var f=t.childNodes[r];if(1==f.nodeType&&this.addChild(f,!0),this.captureTextNodes&&(3==f.nodeType||4==f.nodeType)){var p=f.value||f.text||f.textContent||"";""!=o.compressSpaces(p)&&this.addChild(new o.Element.tspan(f),!1)}}}},o.Element.RenderedElementBase=function(t){this.base=o.Element.ElementBase,this.base(t),this.calculateOpacity=function(){for(var t=1,e=this;null!=e;){var n=e.style("opacity",!1,!0);n.hasValue()&&(t*=n.numValue()),e=e.parent}return t},this.setContext=function(t,e){if(!e){var n;if(this.style("fill").isUrlDefinition())null!=(n=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity")))&&(t.fillStyle=n);else if(this.style("fill").hasValue()){var r;"currentColor"==(r=this.style("fill")).value&&(r.value=this.style("color").value),"inherit"!=r.value&&(t.fillStyle="none"==r.value?"rgba(0,0,0,0)":r.value)}if(this.style("fill-opacity").hasValue()&&(r=(r=new o.Property("fill",t.fillStyle)).addOpacity(this.style("fill-opacity")),t.fillStyle=r.value),this.style("stroke").isUrlDefinition())null!=(n=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity")))&&(t.strokeStyle=n);else if(this.style("stroke").hasValue()){var i;"currentColor"==(i=this.style("stroke")).value&&(i.value=this.style("color").value),"inherit"!=i.value&&(t.strokeStyle="none"==i.value?"rgba(0,0,0,0)":i.value)}if(this.style("stroke-opacity").hasValue()&&(i=(i=new o.Property("stroke",t.strokeStyle)).addOpacity(this.style("stroke-opacity")),t.strokeStyle=i.value),this.style("stroke-width").hasValue()){var a=this.style("stroke-width").toPixels();t.lineWidth=0==a?.001:a}if(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),this.style("paint-order").hasValue()&&(t.paintOrder=this.style("paint-order").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var s=o.ToNumberArray(this.style("stroke-dasharray").value);void 0!==t.setLineDash?t.setLineDash(s):void 0!==t.webkitLineDash?t.webkitLineDash=s:void 0===t.mozDash||1==s.length&&0==s[0]||(t.mozDash=s);var u=this.style("stroke-dashoffset").toPixels();void 0!==t.lineDashOffset?t.lineDashOffset=u:void 0!==t.webkitLineDashOffset?t.webkitLineDashOffset=u:void 0!==t.mozDashOffset&&(t.mozDashOffset=u)}}if(void 0!==t.font){t.font=o.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString();var l=this.style("font-size",!1,!1);l.isPixels()&&(o.emSize=l.toPixels())}if(this.style("transform",!1,!0).hasValue()&&new o.Transform(this.style("transform",!1,!0).value).apply(t),this.style("clip-path",!1,!0).hasValue()){var h=this.style("clip-path",!1,!0).getDefinition();null!=h&&h.apply(t)}t.globalAlpha=this.calculateOpacity()}},o.Element.RenderedElementBase.prototype=new o.Element.ElementBase,o.Element.PathElementBase=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.path=function(t){return null!=t&&t.beginPath(),new o.BoundingBox},this.renderChildren=function(t){this.path(t),o.Mouse.checkPath(this,t),""!=t.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?t.fill(this.style("fill-rule").value):t.fill()),""!=t.strokeStyle&&t.stroke();var e=this.getMarkers();if(null!=e){if(this.style("marker-start").isUrlDefinition()&&(n=this.style("marker-start").getDefinition()).render(t,e[0][0],e[0][1]),this.style("marker-mid").isUrlDefinition())for(var n=this.style("marker-mid").getDefinition(),r=1;r<e.length-1;r++)n.render(t,e[r][0],e[r][1]);this.style("marker-end").isUrlDefinition()&&(n=this.style("marker-end").getDefinition()).render(t,e[e.length-1][0],e[e.length-1][1])}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},o.Element.PathElementBase.prototype=new o.Element.RenderedElementBase,o.Element.svg=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.baseClearContext=this.clearContext,this.clearContext=function(t){this.baseClearContext(t),o.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(t){if(t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.canvas.style&&void 0!==t.font&&void 0!==r.getComputedStyle){t.font=r.getComputedStyle(t.canvas).getPropertyValue("font");var e=new o.Property("fontSize",o.Font.Parse(t.font).fontSize);e.hasValue()&&(o.rootEmSize=o.emSize=e.toPixels("y"))}this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var n=o.ViewPort.width(),i=o.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),void 0===this.root){n=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");var a=0,s=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(a=-this.attribute("refX").toPixels("x"),s=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(t.beginPath(),t.moveTo(a,s),t.lineTo(n,s),t.lineTo(n,i),t.lineTo(a,i),t.closePath(),t.clip())}if(o.ViewPort.SetCurrent(n,i),this.attribute("viewBox").hasValue()){var u=o.ToNumberArray(this.attribute("viewBox").value),l=u[0],h=u[1];n=u[2],i=u[3],o.AspectRatio(t,this.attribute("preserveAspectRatio").value,o.ViewPort.width(),n,o.ViewPort.height(),i,l,h,this.attribute("refX").value,this.attribute("refY").value),o.ViewPort.RemoveCurrent(),o.ViewPort.SetCurrent(u[2],u[3])}}},o.Element.svg.prototype=new o.Element.RenderedElementBase,o.Element.rect=function(t){this.base=o.Element.PathElementBase,this.base(t),this.path=function(t){var e=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y"),a=this.attribute("rx").toPixels("x"),s=this.attribute("ry").toPixels("y");if(this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(s=a),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(a=s),a=Math.min(a,r/2),s=Math.min(s,i/2),null!=t){var u=(Math.sqrt(2)-1)/3*4;t.beginPath(),t.moveTo(e+a,n),t.lineTo(e+r-a,n),t.bezierCurveTo(e+r-a+u*a,n,e+r,n+s-u*s,e+r,n+s),t.lineTo(e+r,n+i-s),t.bezierCurveTo(e+r,n+i-s+u*s,e+r-a+u*a,n+i,e+r-a,n+i),t.lineTo(e+a,n+i),t.bezierCurveTo(e+a-u*a,n+i,e,n+i-s+u*s,e,n+i-s),t.lineTo(e,n+s),t.bezierCurveTo(e,n+s-u*s,e+a-u*a,n,e+a,n),t.closePath()}return new o.BoundingBox(e,n,e+r,n+i)}},o.Element.rect.prototype=new o.Element.PathElementBase,o.Element.circle=function(t){this.base=o.Element.PathElementBase,this.base(t),this.path=function(t){var e=this.attribute("cx").toPixels("x"),n=this.attribute("cy").toPixels("y"),r=this.attribute("r").toPixels();return null!=t&&(t.beginPath(),t.arc(e,n,r,0,2*Math.PI,!1),t.closePath()),new o.BoundingBox(e-r,n-r,e+r,n+r)}},o.Element.circle.prototype=new o.Element.PathElementBase,o.Element.ellipse=function(t){this.base=o.Element.PathElementBase,this.base(t),this.path=function(t){var e=(Math.sqrt(2)-1)/3*4,n=this.attribute("rx").toPixels("x"),r=this.attribute("ry").toPixels("y"),i=this.attribute("cx").toPixels("x"),a=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(i+n,a),t.bezierCurveTo(i+n,a+e*r,i+e*n,a+r,i,a+r),t.bezierCurveTo(i-e*n,a+r,i-n,a+e*r,i-n,a),t.bezierCurveTo(i-n,a-e*r,i-e*n,a-r,i,a-r),t.bezierCurveTo(i+e*n,a-r,i+n,a-e*r,i+n,a),t.closePath()),new o.BoundingBox(i-n,a-r,i+n,a+r)}},o.Element.ellipse.prototype=new o.Element.PathElementBase,o.Element.line=function(t){this.base=o.Element.PathElementBase,this.base(t),this.getPoints=function(){return[new o.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new o.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(t){var e=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y)),new o.BoundingBox(e[0].x,e[0].y,e[1].x,e[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},o.Element.line.prototype=new o.Element.PathElementBase,o.Element.polyline=function(t){this.base=o.Element.PathElementBase,this.base(t),this.points=o.CreatePath(this.attribute("points").value),this.path=function(t){var e=new o.BoundingBox(this.points[0].x,this.points[0].y);null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y));for(var n=1;n<this.points.length;n++)e.addPoint(this.points[n].x,this.points[n].y),null!=t&&t.lineTo(this.points[n].x,this.points[n].y);return e},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return 0<t.length&&t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},o.Element.polyline.prototype=new o.Element.PathElementBase,o.Element.polygon=function(t){this.base=o.Element.polyline,this.base(t),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},o.Element.polygon.prototype=new o.Element.polyline,o.Element.path=function(t){this.base=o.Element.PathElementBase,this.base(t);var e=this.attribute("d").value;e=e.replace(/,/gm," ");for(var n=0;n<2;n++)e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");for(e=(e=e.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2"),n=0;n<2;n++)e=e.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");e=e.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),e=o.compressSpaces(e),e=o.trim(e),this.PathParser=new function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new o.Point(0,0),this.control=new o.Point(0,0),this.current=new o.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new o.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new o.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,n){null!=n&&0<this.angles.length&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(e),this.path=function(t){var e=this.PathParser;e.reset();var n=new o.BoundingBox;for(null!=t&&t.beginPath();!e.isEnd();)switch(e.nextCommand(),e.command){case"M":case"m":var r=e.getAsCurrentPoint();for(e.addMarker(r),n.addPoint(r.x,r.y),null!=t&&t.moveTo(r.x,r.y),e.start=e.current;!e.isCommandOrEnd();)r=e.getAsCurrentPoint(),e.addMarker(r,e.start),n.addPoint(r.x,r.y),null!=t&&t.lineTo(r.x,r.y);break;case"L":case"l":for(;!e.isCommandOrEnd();){var i=e.current;r=e.getAsCurrentPoint(),e.addMarker(r,i),n.addPoint(r.x,r.y),null!=t&&t.lineTo(r.x,r.y)}break;case"H":case"h":for(;!e.isCommandOrEnd();){var a=new o.Point((e.isRelativeCommand()?e.current.x:0)+e.getScalar(),e.current.y);e.addMarker(a,e.current),e.current=a,n.addPoint(e.current.x,e.current.y),null!=t&&t.lineTo(e.current.x,e.current.y)}break;case"V":case"v":for(;!e.isCommandOrEnd();)a=new o.Point(e.current.x,(e.isRelativeCommand()?e.current.y:0)+e.getScalar()),e.addMarker(a,e.current),e.current=a,n.addPoint(e.current.x,e.current.y),null!=t&&t.lineTo(e.current.x,e.current.y);break;case"C":case"c":for(;!e.isCommandOrEnd();){var s=e.current,u=e.getPoint(),l=e.getAsControlPoint(),h=e.getAsCurrentPoint();e.addMarker(h,l,u),n.addBezierCurve(s.x,s.y,u.x,u.y,l.x,l.y,h.x,h.y),null!=t&&t.bezierCurveTo(u.x,u.y,l.x,l.y,h.x,h.y)}break;case"S":case"s":for(;!e.isCommandOrEnd();)s=e.current,u=e.getReflectedControlPoint(),l=e.getAsControlPoint(),h=e.getAsCurrentPoint(),e.addMarker(h,l,u),n.addBezierCurve(s.x,s.y,u.x,u.y,l.x,l.y,h.x,h.y),null!=t&&t.bezierCurveTo(u.x,u.y,l.x,l.y,h.x,h.y);break;case"Q":case"q":for(;!e.isCommandOrEnd();)s=e.current,l=e.getAsControlPoint(),h=e.getAsCurrentPoint(),e.addMarker(h,l,l),n.addQuadraticCurve(s.x,s.y,l.x,l.y,h.x,h.y),null!=t&&t.quadraticCurveTo(l.x,l.y,h.x,h.y);break;case"T":case"t":for(;!e.isCommandOrEnd();)s=e.current,l=e.getReflectedControlPoint(),e.control=l,h=e.getAsCurrentPoint(),e.addMarker(h,l,l),n.addQuadraticCurve(s.x,s.y,l.x,l.y,h.x,h.y),null!=t&&t.quadraticCurveTo(l.x,l.y,h.x,h.y);break;case"A":case"a":for(;!e.isCommandOrEnd();){s=e.current;var c=e.getScalar(),f=e.getScalar(),p=e.getScalar()*(Math.PI/180),d=e.getScalar(),y=e.getScalar(),m=(h=e.getAsCurrentPoint(),new o.Point(Math.cos(p)*(s.x-h.x)/2+Math.sin(p)*(s.y-h.y)/2,-Math.sin(p)*(s.x-h.x)/2+Math.cos(p)*(s.y-h.y)/2)),v=Math.pow(m.x,2)/Math.pow(c,2)+Math.pow(m.y,2)/Math.pow(f,2);1<v&&(c*=Math.sqrt(v),f*=Math.sqrt(v));var g=(d==y?-1:1)*Math.sqrt((Math.pow(c,2)*Math.pow(f,2)-Math.pow(c,2)*Math.pow(m.y,2)-Math.pow(f,2)*Math.pow(m.x,2))/(Math.pow(c,2)*Math.pow(m.y,2)+Math.pow(f,2)*Math.pow(m.x,2)));isNaN(g)&&(g=0);var b=new o.Point(g*c*m.y/f,g*-f*m.x/c),x=new o.Point((s.x+h.x)/2+Math.cos(p)*b.x-Math.sin(p)*b.y,(s.y+h.y)/2+Math.sin(p)*b.x+Math.cos(p)*b.y),w=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},E=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(w(t)*w(e))},P=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(E(t,e))},A=P([1,0],[(m.x-b.x)/c,(m.y-b.y)/f]),C=[(m.x-b.x)/c,(m.y-b.y)/f],O=[(-m.x-b.x)/c,(-m.y-b.y)/f],T=P(C,O);E(C,O)<=-1&&(T=Math.PI),1<=E(C,O)&&(T=0);var S=1-y?1:-1,M=A+S*(T/2),N=new o.Point(x.x+c*Math.cos(M),x.y+f*Math.sin(M));if(e.addMarkerAngle(N,M-S*Math.PI/2),e.addMarkerAngle(h,M-S*Math.PI),n.addPoint(h.x,h.y),null!=t){E=f<c?c:f;var k=f<c?1:c/f,B=f<c?f/c:1;t.translate(x.x,x.y),t.rotate(p),t.scale(k,B),t.arc(0,0,E,A,A+T,1-y),t.scale(1/k,1/B),t.rotate(-p),t.translate(-x.x,-x.y)}}break;case"Z":case"z":null!=t&&n.x1!==n.x2&&n.y1!==n.y2&&t.closePath(),e.current=e.start}return n},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),n=[],r=0;r<t.length;r++)n.push([t[r],e[r]]);return n}},o.Element.path.prototype=new o.Element.PathElementBase,o.Element.pattern=function(t){this.base=o.Element.ElementBase,this.base(t),this.createPattern=function(t,e){var n=this.attribute("width").toPixels("x",!0),r=this.attribute("height").toPixels("y",!0),a=new o.Element.svg;a.attributes.viewBox=new o.Property("viewBox",this.attribute("viewBox").value),a.attributes.width=new o.Property("width",n+"px"),a.attributes.height=new o.Property("height",r+"px"),a.attributes.transform=new o.Property("transform",this.attribute("patternTransform").value),a.children=this.children;var s=i();s.width=n,s.height=r;var u=s.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&u.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var l=-1;l<=1;l++)for(var h=-1;h<=1;h++)u.save(),a.attributes.x=new o.Property("x",l*s.width),a.attributes.y=new o.Property("y",h*s.height),a.render(u),u.restore();return t.createPattern(s,"repeat")}},o.Element.pattern.prototype=new o.Element.ElementBase,o.Element.marker=function(t){this.base=o.Element.ElementBase,this.base(t),this.baseRender=this.render,this.render=function(t,e,n){if(e){t.translate(e.x,e.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(n),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth),t.save();var r=new o.Element.svg;r.attributes.viewBox=new o.Property("viewBox",this.attribute("viewBox").value),r.attributes.refX=new o.Property("refX",this.attribute("refX").value),r.attributes.refY=new o.Property("refY",this.attribute("refY").value),r.attributes.width=new o.Property("width",this.attribute("markerWidth").value),r.attributes.height=new o.Property("height",this.attribute("markerHeight").value),r.attributes.fill=new o.Property("fill",this.attribute("fill").valueOrDefault("black")),r.attributes.stroke=new o.Property("stroke",this.attribute("stroke").valueOrDefault("none")),r.children=this.children,r.render(t),t.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(-n),t.translate(-e.x,-e.y)}}},o.Element.marker.prototype=new o.Element.ElementBase,o.Element.defs=function(t){this.base=o.Element.ElementBase,this.base(t),this.render=function(t){}},o.Element.defs.prototype=new o.Element.ElementBase,o.Element.GradientBase=function(t){this.base=o.Element.ElementBase,this.base(t),this.stops=[];for(var e=0;e<this.children.length;e++){var n=this.children[e];"stop"==n.type&&this.stops.push(n)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(t){for(var e=0;e<this.attributesToInherit.length;e++){var n=this.attributesToInherit[e];!this.attribute(n).hasValue()&&t.attribute(n).hasValue()&&(this.attribute(n,!0).value=t.attribute(n).value)}},this.createGradient=function(t,e,n){var r=this;this.getHrefAttribute().hasValue()&&(r=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(r));var a=function(t){return n.hasValue()?new o.Property("color",t).addOpacity(n).value:t},s=this.getGradient(t,e);if(null==s)return a(r.stops[r.stops.length-1].color);for(var u=0;u<r.stops.length;u++)s.addColorStop(r.stops[u].offset,a(r.stops[u].color));if(this.attribute("gradientTransform").hasValue()){var l=o.ViewPort.viewPorts[0],h=new o.Element.rect;h.attributes.x=new o.Property("x",-o.MAX_VIRTUAL_PIXELS/3),h.attributes.y=new o.Property("y",-o.MAX_VIRTUAL_PIXELS/3),h.attributes.width=new o.Property("width",o.MAX_VIRTUAL_PIXELS),h.attributes.height=new o.Property("height",o.MAX_VIRTUAL_PIXELS);var c=new o.Element.g;c.attributes.transform=new o.Property("transform",this.attribute("gradientTransform").value),c.children=[h];var f=new o.Element.svg;f.attributes.x=new o.Property("x",0),f.attributes.y=new o.Property("y",0),f.attributes.width=new o.Property("width",l.width),f.attributes.height=new o.Property("height",l.height),f.children=[c];var p=i();p.width=l.width,p.height=l.height;var d=p.getContext("2d");return d.fillStyle=s,f.render(d),d.createPattern(p,"no-repeat")}return s}},o.Element.GradientBase.prototype=new o.Element.ElementBase,o.Element.linearGradient=function(t){this.base=o.Element.GradientBase,this.base(t),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(t,e){var n="objectBoundingBox"==this.gradientUnits()?e.getBoundingBox(t):null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var r="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),i="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),a="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),o="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return r==a&&i==o?null:t.createLinearGradient(r,i,a,o)}},o.Element.linearGradient.prototype=new o.Element.GradientBase,o.Element.radialGradient=function(t){this.base=o.Element.GradientBase,this.base(t),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(t,e){var n=e.getBoundingBox(t);this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var r="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),i="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),a=r,o=i;this.attribute("fx").hasValue()&&(a="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(o="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var s="objectBoundingBox"==this.gradientUnits()?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(a,o,0,r,i,s)}},o.Element.radialGradient.prototype=new o.Element.GradientBase,o.Element.stop=function(t){this.base=o.Element.ElementBase,this.base(t),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),1<this.offset&&(this.offset=1);var e=this.style("stop-color",!0);""===e.value&&(e.value="#000"),this.style("stop-opacity").hasValue()&&(e=e.addOpacity(this.style("stop-opacity"))),this.color=e.value},o.Element.stop.prototype=new o.Element.ElementBase,o.Element.AnimateBase=function(t){this.base=o.Element.ElementBase,this.base(t),o.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var n=this.calcValue();this.attribute("type").hasValue()&&(n=this.attribute("type").value+"("+n+")"),this.getProperty().value=n,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var e=t.progress*(this.values.value.length-1),n=Math.floor(e),r=Math.ceil(e);t.from=new o.Property("from",parseFloat(this.values.value[n])),t.to=new o.Property("to",parseFloat(this.values.value[r])),t.progress=(e-n)/(r-n)}else t.from=this.from,t.to=this.to;return t}},o.Element.AnimateBase.prototype=new o.Element.ElementBase,o.Element.animate=function(t){this.base=o.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress();return t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress+this.initialUnits}},o.Element.animate.prototype=new o.Element.AnimateBase,o.Element.animateColor=function(e){this.base=o.Element.AnimateBase,this.base(e),this.calcValue=function(){var e=this.progress(),n=new t(e.from.value),r=new t(e.to.value);if(n.ok&&r.ok){var i=n.r+(r.r-n.r)*e.progress,a=n.g+(r.g-n.g)*e.progress,o=n.b+(r.b-n.b)*e.progress;return"rgb("+parseInt(i,10)+","+parseInt(a,10)+","+parseInt(o,10)+")"}return this.attribute("from").value}},o.Element.animateColor.prototype=new o.Element.AnimateBase,o.Element.animateTransform=function(t){this.base=o.Element.AnimateBase,this.base(t),this.calcValue=function(){for(var t=this.progress(),e=o.ToNumberArray(t.from.value),n=o.ToNumberArray(t.to.value),r="",i=0;i<e.length;i++)r+=e[i]+(n[i]-e[i])*t.progress+" ";return r}},o.Element.animateTransform.prototype=new o.Element.animate,o.Element.font=function(t){this.base=o.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var e=0;e<this.children.length;e++){var n=this.children[e];"font-face"==n.type?(this.fontFace=n).style("font-family").hasValue()&&(o.Definitions[n.style("font-family").value]=this):"missing-glyph"==n.type?this.missingGlyph=n:"glyph"==n.type&&(""!=n.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[n.unicode]&&(this.glyphs[n.unicode]=[]),this.glyphs[n.unicode][n.arabicForm]=n):this.glyphs[n.unicode]=n)}},o.Element.font.prototype=new o.Element.ElementBase,o.Element.fontface=function(t){this.base=o.Element.ElementBase,this.base(t),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},o.Element.fontface.prototype=new o.Element.ElementBase,o.Element.missingglyph=function(t){this.base=o.Element.path,this.base(t),this.horizAdvX=0},o.Element.missingglyph.prototype=new o.Element.path,o.Element.glyph=function(t){this.base=o.Element.path,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},o.Element.glyph.prototype=new o.Element.path,o.Element.text=function(t){this.captureTextNodes=!0,this.base=o.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t);var e=this.style("dominant-baseline").toTextBaseline();null==e&&(e=this.style("alignment-baseline").toTextBaseline()),null!=e&&(t.textBaseline=e)},this.initializeCoordinates=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(t,this,0)},this.getBoundingBox=function(t){this.initializeCoordinates(t);for(var e=null,n=0;n<this.children.length;n++){var r=this.getChildBoundingBox(t,this,this,n);null==e?e=r:e.addBoundingBox(r)}return e},this.renderChildren=function(t){this.initializeCoordinates(t);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,this,e)},this.getAnchorDelta=function(t,e,n){var r=this.style("text-anchor").valueOrDefault("start");if("start"!=r){for(var i=0,a=n;a<e.children.length;a++){var o=e.children[a];if(n<a&&o.attribute("x").hasValue())break;i+=o.measureTextRecursive(t)}return-1*("end"==r?i:i/2)}return 0},this.adjustChildCoordinates=function(t,e,n,r){var i=n.children[r];return i.attribute("x").hasValue()?(i.x=i.attribute("x").toPixels("x")+e.getAnchorDelta(t,n,r),i.attribute("dx").hasValue()&&(i.x+=i.attribute("dx").toPixels("x"))):(i.attribute("dx").hasValue()&&(e.x+=i.attribute("dx").toPixels("x")),i.x=e.x),e.x=i.x+i.measureText(t),i.attribute("y").hasValue()?(i.y=i.attribute("y").toPixels("y"),i.attribute("dy").hasValue()&&(i.y+=i.attribute("dy").toPixels("y"))):(i.attribute("dy").hasValue()&&(e.y+=i.attribute("dy").toPixels("y")),i.y=e.y),e.y=i.y,i},this.getChildBoundingBox=function(t,e,n,r){var i=this.adjustChildCoordinates(t,e,n,r),a=i.getBoundingBox(t);for(r=0;r<i.children.length;r++){var o=e.getChildBoundingBox(t,e,i,r);a.addBoundingBox(o)}return a},this.renderChild=function(t,e,n,r){var i=this.adjustChildCoordinates(t,e,n,r);for(i.render(t),r=0;r<i.children.length;r++)e.renderChild(t,e,i,r)}},o.Element.text.prototype=new o.Element.RenderedElementBase,o.Element.TextElementBase=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.getGlyph=function(t,e,n){var r=e[n],i=null;if(t.isArabic){var a="isolated";(0==n||" "==e[n-1])&&n<e.length-2&&" "!=e[n+1]&&(a="terminal"),0<n&&" "!=e[n-1]&&n<e.length-2&&" "!=e[n+1]&&(a="medial"),0<n&&" "!=e[n-1]&&(n==e.length-1||" "==e[n+1])&&(a="initial"),void 0!==t.glyphs[r]&&null==(i=t.glyphs[r][a])&&"glyph"==t.glyphs[r].type&&(i=t.glyphs[r])}else i=t.glyphs[r];return null==i&&(i=t.missingGlyph),i},this.renderChildren=function(t){var e=this.parent.style("font-family").getDefinition();if(null==e)"stroke"==t.paintOrder?(""!=t.strokeStyle&&t.strokeText(o.compressSpaces(this.getText()),this.x,this.y),""!=t.fillStyle&&t.fillText(o.compressSpaces(this.getText()),this.x,this.y)):(""!=t.fillStyle&&t.fillText(o.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(o.compressSpaces(this.getText()),this.x,this.y));else{var n=this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize),r=this.parent.style("font-style").valueOrDefault(o.Font.Parse(o.ctx.font).fontStyle),i=this.getText();e.isRTL&&(i=i.split("").reverse().join(""));for(var a=o.ToNumberArray(this.parent.attribute("dx").value),s=0;s<i.length;s++){var u=this.getGlyph(e,i,s),l=n/e.fontFace.unitsPerEm;t.translate(this.x,this.y),t.scale(l,-l);var h=t.lineWidth;t.lineWidth=t.lineWidth*e.fontFace.unitsPerEm/n,"italic"==r&&t.transform(1,0,.4,1,0,0),u.render(t),"italic"==r&&t.transform(1,0,-.4,1,0,0),t.lineWidth=h,t.scale(1/l,-1/l),t.translate(-this.x,-this.y),this.x+=n*(u.horizAdvX||e.horizAdvX)/e.fontFace.unitsPerEm,void 0===a[s]||isNaN(a[s])||(this.x+=a[s])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),n=0;n<this.children.length;n++)e+=this.children[n].measureTextRecursive(t);return e},this.measureText=function(t){var e=this.parent.style("font-family").getDefinition();if(null!=e){var n=this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize),r=0,i=this.getText();e.isRTL&&(i=i.split("").reverse().join(""));for(var a=o.ToNumberArray(this.parent.attribute("dx").value),s=0;s<i.length;s++)r+=(this.getGlyph(e,i,s).horizAdvX||e.horizAdvX)*n/e.fontFace.unitsPerEm,void 0===a[s]||isNaN(a[s])||(r+=a[s]);return r}var u=o.compressSpaces(this.getText());if(!t.measureText)return 10*u.length;t.save(),this.setContext(t,!0);var l=t.measureText(u).width;return t.restore(),l},this.getBoundingBox=function(t){var e=this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize);return new o.BoundingBox(this.x,this.y-e,this.x+this.measureText(t),this.y)}},o.Element.TextElementBase.prototype=new o.Element.RenderedElementBase,o.Element.tspan=function(t){this.captureTextNodes=!0,this.base=o.Element.TextElementBase,this.base(t),this.text=o.compressSpaces(t.value||t.text||t.textContent||""),this.getText=function(){return 0<this.children.length?"":this.text}},o.Element.tspan.prototype=new o.Element.TextElementBase,o.Element.tref=function(t){this.base=o.Element.TextElementBase,this.base(t),this.getText=function(){var t=this.getHrefAttribute().getDefinition();if(null!=t)return t.children[0].getText()}},o.Element.tref.prototype=new o.Element.TextElementBase,o.Element.a=function(t){this.base=o.Element.TextElementBase,this.base(t),this.hasText=0<t.childNodes.length;for(var e=0;e<t.childNodes.length;e++)3!=t.childNodes[e].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].value||t.childNodes[0].data:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var e=new o.Property("fontSize",o.Font.Parse(o.ctx.font).fontSize);o.Mouse.checkBoundingBox(this,new o.BoundingBox(this.x,this.y-e.toPixels("y"),this.x+this.measureText(t),this.y))}else if(0<this.children.length){var n=new o.Element.g;n.children=this.children,n.parent=this,n.render(t)}},this.onclick=function(){r.open(this.getHrefAttribute().value)},this.onmousemove=function(){o.ctx.canvas.style.cursor="pointer"}},o.Element.a.prototype=new o.Element.TextElementBase,o.Element.image=function(t){this.base=o.Element.RenderedElementBase,this.base(t);var e=this.getHrefAttribute().value;if(""!=e){var n=e.match(/\.svg$/);if(o.Images.push(this),this.loaded=!1,n)this.img=o.ajax(e),this.loaded=!0;else{this.img=document.createElement("img"),1==o.opts.useCORS&&(this.img.crossOrigin="Anonymous");var r=this;this.img.onload=function(){r.loaded=!0},this.img.onerror=function(){o.log('ERROR: image "'+e+'" not found'),r.loaded=!0},this.img.src=e}this.renderChildren=function(t){var e=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");0!=a&&0!=s&&(t.save(),n?t.drawSvg(this.img,e,i,a,s):(t.translate(e,i),o.AspectRatio(t,this.attribute("preserveAspectRatio").value,a,this.img.width,s,this.img.height,0,0),r.loaded&&(void 0===this.img.complete||this.img.complete)&&t.drawImage(this.img,0,0)),t.restore())},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");return new o.BoundingBox(t,e,t+n,e+r)}}},o.Element.image.prototype=new o.Element.RenderedElementBase,o.Element.g=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.getBoundingBox=function(t){for(var e=new o.BoundingBox,n=0;n<this.children.length;n++)e.addBoundingBox(this.children[n].getBoundingBox(t));return e}},o.Element.g.prototype=new o.Element.RenderedElementBase,o.Element.symbol=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.render=function(t){}},o.Element.symbol.prototype=new o.Element.RenderedElementBase,o.Element.style=function(t){this.base=o.Element.ElementBase,this.base(t);for(var e="",n=0;n<t.childNodes.length;n++)e+=t.childNodes[n].data;e=e.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");var r=(e=o.compressSpaces(e)).split("}");for(n=0;n<r.length;n++)if(""!=o.trim(r[n]))for(var i=r[n].split("{"),a=i[0].split(","),s=i[1].split(";"),u=0;u<a.length;u++){var l=o.trim(a[u]);if(""!=l){for(var h=o.Styles[l]||{},c=0;c<s.length;c++){var f=s[c].indexOf(":"),p=s[c].substr(0,f),y=s[c].substr(f+1,s[c].length-f);null!=p&&null!=y&&(h[o.trim(p)]=new o.Property(o.trim(p),o.trim(y)))}if(o.Styles[l]=h,o.StylesSpecificity[l]=d(l),"@font-face"==l)for(var m=h["font-family"].value.replace(/"/g,""),v=h.src.value.split(","),g=0;g<v.length;g++)if(0<v[g].indexOf('format("svg")'))for(var b=v[g].indexOf("url"),x=v[g].indexOf(")",b),w=v[g].substr(b+5,x-b-6),E=o.parseXml(o.ajax(w)).getElementsByTagName("font"),P=0;P<E.length;P++){var A=o.CreateElement(E[P]);o.Definitions[m]=A}}}},o.Element.style.prototype=new o.Element.ElementBase,o.Element.use=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))};var e=this.getHrefAttribute().getDefinition();this.path=function(t){null!=e&&e.path(t)},this.elementTransform=function(){if(null!=e&&e.style("transform",!1,!0).hasValue())return new o.Transform(e.style("transform",!1,!0).value)},this.getBoundingBox=function(t){if(null!=e)return e.getBoundingBox(t)},this.renderChildren=function(t){if(null!=e){var n=e;"symbol"==e.type&&((n=new o.Element.svg).type="svg",n.attributes.viewBox=new o.Property("viewBox",e.attribute("viewBox").value),n.attributes.preserveAspectRatio=new o.Property("preserveAspectRatio",e.attribute("preserveAspectRatio").value),n.attributes.overflow=new o.Property("overflow",e.attribute("overflow").value),n.children=e.children),"svg"==n.type&&(this.attribute("width").hasValue()&&(n.attributes.width=new o.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(n.attributes.height=new o.Property("height",this.attribute("height").value)));var r=n.parent;n.parent=null,n.render(t),n.parent=r}}},o.Element.use.prototype=new o.Element.RenderedElementBase,o.Element.mask=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t,e){var n=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");if(0==a&&0==s){for(var u=new o.BoundingBox,l=0;l<this.children.length;l++)u.addBoundingBox(this.children[l].getBoundingBox(t));n=Math.floor(u.x1),r=Math.floor(u.y1),a=Math.floor(u.width()),s=Math.floor(u.height())}var h=e.attribute("mask").value;e.attribute("mask").value="";var c=i();c.width=n+a,c.height=r+s;var f=c.getContext("2d");this.renderChildren(f);var p=i();p.width=n+a,p.height=r+s;var d=p.getContext("2d");e.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=f.createPattern(c,"no-repeat"),d.fillRect(0,0,n+a,r+s),t.fillStyle=d.createPattern(p,"no-repeat"),t.fillRect(0,0,n+a,r+s),e.attribute("mask").value=h},this.render=function(t){}},o.Element.mask.prototype=new o.Element.ElementBase,o.Element.clipPath=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t){var e="undefined"!=typeof CanvasRenderingContext2D,n=t.beginPath,r=t.closePath;e&&(CanvasRenderingContext2D.prototype.beginPath=function(){},CanvasRenderingContext2D.prototype.closePath=function(){}),n.call(t);for(var i=0;i<this.children.length;i++){var a=this.children[i];if(void 0!==a.path){var s=void 0!==a.elementTransform&&a.elementTransform();!s&&a.style("transform",!1,!0).hasValue()&&(s=new o.Transform(a.style("transform",!1,!0).value)),s&&s.apply(t),a.path(t),e&&(CanvasRenderingContext2D.prototype.closePath=r),s&&s.unapply(t)}}r.call(t),t.clip(),e&&(CanvasRenderingContext2D.prototype.beginPath=n,CanvasRenderingContext2D.prototype.closePath=r)},this.render=function(t){}},o.Element.clipPath.prototype=new o.Element.ElementBase,o.Element.filter=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t,e){var n=e.getBoundingBox(t),r=Math.floor(n.x1),a=Math.floor(n.y1),o=Math.floor(n.width()),s=Math.floor(n.height()),u=e.style("filter").value;e.style("filter").value="";for(var l=0,h=0,c=0;c<this.children.length;c++){var f=this.children[c].extraFilterDistance||0;l=Math.max(l,f),h=Math.max(h,f)}var p=i();p.width=o+2*l,p.height=s+2*h;var d=p.getContext("2d");for(d.translate(-r+l,-a+h),e.render(d),c=0;c<this.children.length;c++)"function"==typeof this.children[c].apply&&this.children[c].apply(d,0,0,o+2*l,s+2*h);t.drawImage(p,0,0,o+2*l,s+2*h,r-l,a-h,o+2*l,s+2*h),e.style("filter",!0).value=u},this.render=function(t){}},o.Element.filter.prototype=new o.Element.ElementBase,o.Element.feMorphology=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t,e,n,r,i){}},o.Element.feMorphology.prototype=new o.Element.ElementBase,o.Element.feComposite=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t,e,n,r,i){}},o.Element.feComposite.prototype=new o.Element.ElementBase,o.Element.feColorMatrix=function(t){this.base=o.Element.ElementBase,this.base(t);var e=o.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var n=e[0];e=[.213+.787*n,.715-.715*n,.072-.072*n,0,0,.213-.213*n,.715+.285*n,.072-.072*n,0,0,.213-.213*n,.715-.715*n,.072+.928*n,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var r=e[0]*Math.PI/180,i=function(t,e,n){return t+Math.cos(r)*e+Math.sin(r)*n};e=[i(.213,.787,-.213),i(.715,-.715,-.715),i(.072,-.072,.928),0,0,i(.213,-.213,.143),i(.715,.285,.14),i(.072,-.072,-.283),0,0,i(.213,-.213,-.787),i(.715,-.715,.715),i(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}function a(t,e,n,r,i,a){return t[n*r*4+4*e+a]}function s(t,e,n,r,i,a,o){t[n*r*4+4*e+a]=o}function u(t,n){var r=e[t];return r*(r<0?n-255:n)}this.apply=function(t,e,n,r,i){var o=t.getImageData(0,0,r,i);for(n=0;n<i;n++)for(e=0;e<r;e++){var l=a(o.data,e,n,r,0,0),h=a(o.data,e,n,r,0,1),c=a(o.data,e,n,r,0,2),f=a(o.data,e,n,r,0,3);s(o.data,e,n,r,0,0,u(0,l)+u(1,h)+u(2,c)+u(3,f)+u(4,1)),s(o.data,e,n,r,0,1,u(5,l)+u(6,h)+u(7,c)+u(8,f)+u(9,1)),s(o.data,e,n,r,0,2,u(10,l)+u(11,h)+u(12,c)+u(13,f)+u(14,1)),s(o.data,e,n,r,0,3,u(15,l)+u(16,h)+u(17,c)+u(18,f)+u(19,1))}t.clearRect(0,0,r,i),t.putImageData(o,0,0)}},o.Element.feColorMatrix.prototype=new o.Element.ElementBase,o.Element.feGaussianBlur=function(t){this.base=o.Element.ElementBase,this.base(t),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(t,n,r,i,a){e&&void 0!==e.canvasRGBA?(t.canvas.id=o.UniqueId(),t.canvas.style.display="none",document.body.appendChild(t.canvas),e.canvasRGBA(t.canvas,n,r,i,a,this.blurRadius),document.body.removeChild(t.canvas)):o.log("ERROR: StackBlur.js must be included for blur to work")}},o.Element.feGaussianBlur.prototype=new o.Element.ElementBase,o.Element.title=function(t){},o.Element.title.prototype=new o.Element.ElementBase,o.Element.desc=function(t){},o.Element.desc.prototype=new o.Element.ElementBase,o.Element.MISSING=function(t){o.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},o.Element.MISSING.prototype=new o.Element.ElementBase,o.CreateElement=function(t){var e=t.nodeName.replace(/^[^:]+:/,"");e=e.replace(/\-/g,"");var n=null;return(n=void 0!==o.Element[e]?new o.Element[e](t):new o.Element.MISSING(t)).type=t.nodeName,n},o.load=function(t,e){o.loadXml(t,o.ajax(e))},o.loadXml=function(t,e){o.loadXmlDoc(t,o.parseXml(e))},o.loadXmlDoc=function(t,e){o.init(t);var n=function(e){for(var n=t.canvas;n;)e.x-=n.offsetLeft,e.y-=n.offsetTop,n=n.offsetParent;return r.scrollX&&(e.x+=r.scrollX),r.scrollY&&(e.y+=r.scrollY),e};1!=o.opts.ignoreMouse&&(t.canvas.onclick=function(t){var e=n(new o.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));o.Mouse.onclick(e.x,e.y)},t.canvas.onmousemove=function(t){var e=n(new o.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));o.Mouse.onmousemove(e.x,e.y)});var i=o.CreateElement(e.documentElement);i.root=!0,i.addStylesFromStyleDefinition();var a=!0,s=function(){o.ViewPort.Clear(),t.canvas.parentNode?o.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight):o.ViewPort.SetCurrent(800,600),1!=o.opts.ignoreDimensions&&(i.style("width").hasValue()&&(t.canvas.width=i.style("width").toPixels("x"),t.canvas.style&&(t.canvas.style.width=t.canvas.width+"px")),i.style("height").hasValue()&&(t.canvas.height=i.style("height").toPixels("y"),t.canvas.style&&(t.canvas.style.height=t.canvas.height+"px")));var n=t.canvas.clientWidth||t.canvas.width,r=t.canvas.clientHeight||t.canvas.height;if(1==o.opts.ignoreDimensions&&i.style("width").hasValue()&&i.style("height").hasValue()&&(n=i.style("width").toPixels("x"),r=i.style("height").toPixels("y")),o.ViewPort.SetCurrent(n,r),null!=o.opts.offsetX&&(i.attribute("x",!0).value=o.opts.offsetX),null!=o.opts.offsetY&&(i.attribute("y",!0).value=o.opts.offsetY),null!=o.opts.scaleWidth||null!=o.opts.scaleHeight){var s=null,u=null,l=o.ToNumberArray(i.attribute("viewBox").value);null!=o.opts.scaleWidth&&(i.attribute("width").hasValue()?s=i.attribute("width").toPixels("x")/o.opts.scaleWidth:isNaN(l[2])||(s=l[2]/o.opts.scaleWidth)),null!=o.opts.scaleHeight&&(i.attribute("height").hasValue()?u=i.attribute("height").toPixels("y")/o.opts.scaleHeight:isNaN(l[3])||(u=l[3]/o.opts.scaleHeight)),null==s&&(s=u),null==u&&(u=s),i.attribute("width",!0).value=o.opts.scaleWidth,i.attribute("height",!0).value=o.opts.scaleHeight,i.style("transform",!0,!0).value+=" scale("+1/s+","+1/u+")"}1!=o.opts.ignoreClear&&t.clearRect(0,0,n,r),i.render(t),a&&(a=!1,"function"==typeof o.opts.renderCallback&&o.opts.renderCallback(e))},u=!0;o.ImagesLoaded()&&(u=!1,s()),o.intervalID=setInterval(function(){var t=!1;if(u&&o.ImagesLoaded()&&(t=!(u=!1)),1!=o.opts.ignoreMouse&&(t|=o.Mouse.hasEvents()),1!=o.opts.ignoreAnimation)for(var e=0;e<o.Animations.length;e++)t|=o.Animations[e].update(1e3/o.FRAMERATE);"function"==typeof o.opts.forceRedraw&&1==o.opts.forceRedraw()&&(t=!0),t&&(s(),o.Mouse.runEvents())},1e3/o.FRAMERATE)},o.stop=function(){o.intervalID&&clearInterval(o.intervalID)},o.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var n=0;n<this.events.length;n++){var r=this.events[n];e.isPointInPath&&e.isPointInPath(r.x,r.y)&&(this.eventElements[n]=t)}},this.checkBoundingBox=function(t,e){for(var n=0;n<this.events.length;n++){var r=this.events[n];e.isPointInBox(r.x,r.y)&&(this.eventElements[n]=t)}},this.runEvents=function(){o.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var e=this.events[t],n=this.eventElements[t];n;)e.run(n),n=n.parent;this.events=[],this.eventElements=[]}},o}(u||{});"string"==typeof n&&(n=document.getElementById(n)),null!=n.svg&&n.svg.stop(),n.childNodes&&1==n.childNodes.length&&"OBJECT"==n.childNodes[0].nodeName||(n.svg=l);var h=n.getContext("2d");void 0!==s.documentElement?l.loadXmlDoc(h,s):"<"==s.substr(0,1)?l.loadXml(h,s):l.load(h,s)}else for(var c=document.querySelectorAll("svg"),f=0;f<c.length;f++){var p=c[f],y=document.createElement("canvas");y.width=p.clientWidth,y.height=p.clientHeight,p.parentNode.insertBefore(y,p),p.parentNode.removeChild(p);var m=document.createElement("div");m.appendChild(p),o(y,m.innerHTML)}};"undefined"==typeof Element||(void 0!==Element.prototype.matches?a=function(t,e){return t.matches(e)}:void 0!==Element.prototype.webkitMatchesSelector?a=function(t,e){return t.webkitMatchesSelector(e)}:void 0!==Element.prototype.mozMatchesSelector?a=function(t,e){return t.mozMatchesSelector(e)}:void 0!==Element.prototype.msMatchesSelector?a=function(t,e){return t.msMatchesSelector(e)}:void 0!==Element.prototype.oMatchesSelector?a=function(t,e){return t.oMatchesSelector(e)}:("function"!=typeof jQuery&&"function"!=typeof Zepto||(a=function(t,e){return $(t).is(e)}),void 0===a&&"undefined"!=typeof Sizzle&&(a=Sizzle.matchesSelector)));var s=/(\[[^\]]+\])/g,u=/(#[^\s\+>~\.\[:]+)/g,l=/(\.[^\s\+>~\.\[:]+)/g,h=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,c=/(:[\w-]+\([^\)]*\))/gi,f=/(:[^\s\+>~\.\[:]+)/g,p=/([^\s\+>~\.\[:]+)/g;function d(t){var e=[0,0,0],n=function(n,r){var i=t.match(n);null!=i&&(e[r]+=i.length,t=t.replace(n," "))};return t=(t=t.replace(/:not\(([^\)]*)\)/g,"     $1 ")).replace(/{[\s\S]*/gm," "),n(s,1),n(u,0),n(l,1),n(h,2),n(c,1),n(f,1),t=(t=t.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," "),n(p,2),e.join("")}"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,n,r,i,a){var s={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:n,scaleWidth:r,scaleHeight:i};for(var u in a)a.hasOwnProperty(u)&&(s[u]=a[u]);o(this.canvas,t,s)}),n.exports=o}(n={exports:{}}),n.exports}(n(229),n(230))},67:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(5),i=n(4),a=n(9);function o(t,e,n,o,s){s||(s={}),t.selectAll("svg").remove();var u=["blue","yellow","red"],l=t.append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 770 420").classed("svg-content",!0),h=Object(i.a)(o),c=r.m().rangeRound([70,700]),f=r.n().rangeRound([300,120]),p=l.append("g").attr("transform","translate(350,150)").append("text").attr("text-anchor","middle");this.draw=function(t,e){if(console.log("groupChartData",t),l.selectAll(".topLabel").remove(),l.append("text").attr("class","topLabel").attr("text-anchor","middle").attr("x",350).attr("y",20).text(s.topLabel),t){p.text("");var n={},d=e;d&&d.data.allParties.edges&&d.data.allParties.edges.forEach(function(t){n[t.node.name]=t.node.colour}),c.domain(t.map(function(t){return t.partyAbbr}));var y=[0,100];s.dynamicYAxisFromValues&&(y[1]=r.j(t.map(function(t){return r.j(t.data,function(t){return s.yValue(t)})}))+1),f.domain(y);var m=l.selectAll(".bar-group").data(t);m.exit().transition().duration(300).style("fill-opacity",1e-6).remove(),(g=m.enter().append("g").attr("class",function(t){return"bar-group ".concat(t.partyAbbr)}).attr("transform",function(t){return"translate(".concat(c(t.partyAbbr),", 0)")})).append("rect").attr("class",o(a.a.CSS_PREFIX+"grouprect")).attr("x",1*-c.bandwidth()/12).attr("y",35).attr("width",5*c.bandwidth()/6).attr("height",300),g.append("g").attr("class","groupname-container").attr("transform","translate(".concat(1*c.bandwidth()/3,", ").concat(70,")")).append("text").attr("text-anchor","middle").text(function(t){return t.partyAbbr}),g.append("g").attr("class","bar-container"),g.append("g").attr("class","bartext-container"),g.append("g").attr("class","baraxistext-container");for(var v=0;v<t.length;v++){var g,b=t[v].partyAbbr,x=t[v].data,w=r.m().rangeRound([0,2*c.bandwidth()/3]).domain(x.map(function(t){return t.name})),E=(g=l.selectAll(".bar-group.".concat(b))).select(".bar-container"),P=g.select(".bartext-container"),A=g.select(".baraxistext-container"),C=E.selectAll(".".concat(o("bar"))).data(x);C.exit().transition().duration(300).attr("y",function(t){return f(0)}).attr("height",0).style("fill-opacity",1e-6).remove(),C.enter().append("rect").attr("class",function(t){return o("bar")+" bar_"+t.name}).attr("x",function(t,e){return w(t.name)+w.bandwidth()/4}).attr("width",1*w.bandwidth()/2).attr("fill",function(t,e){return S(t,e)}).on("mousemove",function(t,e){r.o(this).attr("opacity",.8),h.transition().duration(200).style("opacity",.9),h.html(M(t)).style("left",r.d.pageX+"px").style("top",r.d.pageY-28+"px")}).on("mouseout",function(t){r.o(this).attr("opacity",1),h.transition().duration(200).style("opacity",0)}).attr("y",function(t){return f(0)}).attr("height",0),E.selectAll(".".concat(o("bar"))).data(x).attr("fill",function(t,e){return S(t,e)}).transition().duration(300).attr("y",function(t){return f(Number(s.yValue(t)))}).attr("height",function(t){return 300-f(Number(s.yValue(t)))});var O=A.selectAll(".".concat(o("bartext"))).data(x);O.exit().transition().duration(300).style("fill-opacity",1e-6).remove(),O.enter().append("text").attr("class",o("bartext")).attr("x",function(t){return w(t.name)+w.bandwidth()/2}).attr("text-anchor","middle").attr("font-size","7px").attr("y",function(t){return f(0)+18}),A.selectAll(".".concat(o("bartext"))).data(x).text(function(t){return/(19|20)\d{2}/g.exec(t.name)[0]});var T=P.selectAll(".".concat(o("bartext"))).data(x);T.exit().transition().duration(300).attr("y",function(t){return f(0)-5}).style("fill-opacity",1e-6).remove(),T.enter().append("text").attr("class",o("bartext")).attr("x",function(t){return w(t.name)+w.bandwidth()/2}).attr("text-anchor","middle").attr("font-size","7px").attr("y",function(t){return f(0)-5}),P.selectAll(".".concat(o("bartext"))).data(x).text(function(t){return s.yValueFormat(s.yValue(t))}).transition().duration(300).attr("y",function(t){return f(Number(s.yValue(t)))-5})}}else p.text("chart data is not available");function S(t,e){return function(t,e){return n[t.split("/")[0]]||u[e%u.length]}(t.partyInfo.name,e)}function M(t,e){return s.noXaxisByParty?t.name+" : "+s.yValueFormat(s.yValue(t)):Object(i.c)(t.partyInfo.name)+" : "+s.yValueFormat(s.yValue(t))}},this.destroy=function(){l.remove()}}},68:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(5),i=n(4);function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){o(t,e,n[e])})}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e,n,o,s){s||(s={}),t.selectAll("svg").remove();var u=["blue","yellow","red"],l=t.append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 770 420").classed("svg-content",!0),h=Object(i.a)(o),c=r.m().rangeRound([70,700]),f=r.n().rangeRound([300,120]),p=l.append("g").attr("transform","translate(350,150)").append("text").attr("text-anchor","middle");this.draw=function(t,e){if(l.selectAll(".topLabel").remove(),l.append("text").attr("text-anchor","middle").attr("class","topLabel").attr("x",350).attr("y",20).text(s.topLabel),t){p.text("");var n={},d=e;d&&d.data.allParties.edges&&d.data.allParties.edges.forEach(function(t){n[t.node.name]=t.node.colour});var y=t.map(function(t){var e=t.data;return a({},t,{data:[a({},e[1],{delta:s.yValue(e[1])-s.yValue(e[0])})]})});c.domain(t.map(function(t){return t.partyAbbr}));var m=[-100,100];s.dynamicYAxisFromValues&&(m[1]=r.j(y.map(function(t){return t.data[0].delta}))+1,m[0]=r.k(y.map(function(t){return t.data[0].delta}))-1),f.domain(m);var v=l.selectAll(".bar-group").data(y);v.exit().transition().duration(300).style("fill-opacity",1e-6).remove(),(b=v.enter().append("g").attr("class",function(t){return"bar-group ".concat(t.partyAbbr)}).attr("transform",function(t){return"translate(".concat(c(t.partyAbbr),", 0)")})).append("g").attr("class","groupname-container").attr("transform","translate(".concat(1*c.bandwidth()/3,", ").concat(70,")")).append("text").attr("text-anchor","middle").text(function(t){return t.partyAbbr}),b.append("g").attr("class","bar-container"),b.append("g").attr("class","bartext-container");for(var g=0;g<y.length;g++){var b,x=y[g].partyAbbr,w=y[g].data,E=(b=l.selectAll(".bar-group.".concat(x))).select(".bar-container"),P=b.select(".bartext-container"),A=E.selectAll(".".concat(o("bar"))).data(w);A.exit().transition().duration(300).attr("height",0).style("fill-opacity",1e-6).remove(),A.enter().append("rect").attr("class",function(t){return o("bar")+" bar_"+t.name}).attr("x",c.bandwidth()/6).attr("width",1*c.bandwidth()/3).attr("fill",function(t,e){return O(t,e)}).on("mousemove",function(t,e){r.o(this).attr("opacity",.8),h.transition().duration(200).style("opacity",.9),h.html(T(t)).style("left",r.d.pageX+"px").style("top",r.d.pageY-28+"px")}).on("mouseout",function(t){r.o(this).attr("opacity",1),h.transition().duration(200).style("opacity",0)}).attr("y",function(t){return f(0)}).attr("height",0),E.selectAll(".".concat(o("bar"))).data(w).attr("fill",function(t,e){return O(t,e)}).transition().duration(300).attr("y",function(t){return Math.min(f(Number(t.delta)),f(0))}).attr("height",function(t){return Math.abs(f(Number(t.delta))-f(0))});var C=P.selectAll(".".concat(o("bartext"))).data(w);C.exit().transition().duration(300).style("fill-opacity",1e-6).remove(),C.enter().append("text").attr("class",o("bartext")).attr("x",function(t){return c.bandwidth()/3}).attr("text-anchor","middle").attr("font-size","12px").attr("y",function(t){return t.delta>0?f(0)-5:f(0)+5}),P.selectAll(".".concat(o("bartext"))).data(w).text(function(t){return s.yValueFormat(t.delta)}).transition().duration(300).attr("y",function(t){var e=0;return e=t.delta>0?-5:15,f(Number(t.delta))+e})}l.selectAll(".xAxisLine").remove();l.append("line").attr("class","xAxisLine").attr("stroke-width",2).attr("stroke","currentColor").attr("x1",70).attr("y1",f(0)-1).attr("x2",700).attr("y2",f(0)-1)}else p.text("chart data is not available");function O(t,e){return function(t,e){return n[t.split("/")[0]]||u[e%u.length]}(t.partyInfo.name,e)}function T(t,e){return s.noXaxisByParty?t.name+" : "+s.yValueFormat(t.delta):Object(i.c)(t.partyInfo.name)+" : "+s.yValueFormat(t.delta)}},this.destroy=function(){l.remove()}}},71:function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(233),i=n(234),a=n(147);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?s(t,0):f(t,e);if("Buffer"===e.type&&a(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(h(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var a,o=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var h=-1;for(a=n;a<s;a++)if(l(t,a)===l(e,-1===h?0:a-h)){if(-1===h&&(h=a),a-h+1===u)return h*o}else-1!==h&&(a-=a-h),h=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var c=!0,f=0;f<u;f++)if(l(t,a+f)!==l(e,f)){c=!1;break}if(c)return a}return-1}function g(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function b(t,e,n,r){return G(U(e,t.length-n),t,n,r)}function x(t,e,n,r){return G(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return x(t,e,n,r)}function E(t,e,n,r){return G(z(e),t,n,r)}function P(t,e,n,r){return G(function(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function A(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function C(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,u,l=t[i],h=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c<=n)switch(c){case 1:l<128&&(h=l);break;case 2:128==(192&(a=t[i+1]))&&(u=(31&l)<<6|63&a)>127&&(h=u);break;case 3:a=t[i+1],o=t[i+2],128==(192&a)&&128==(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(h=u)}null===h?(h=65533,c=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=c}return function(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return l(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return h(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return c(null,t)},u.allocUnsafeSlow=function(t){return c(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return S(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var a=i-r,o=n-e,s=Math.min(a,o),l=this.slice(r,i),h=t.slice(e,n),c=0;c<s;++c)if(l[c]!==h[c]){a=l[c],o=h[c];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return g(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function S(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function M(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=L(t[a]);return i}function N(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function k(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,n,r,i,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function I(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function V(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function R(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,r,a){return a||R(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function _(t,e,n,r,a){return a||R(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},u.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||B(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||B(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):V(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):V(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);B(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);B(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):V(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):V(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return _(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return _(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=u.isBuffer(t)?t:U(new u(t,r).toString()),s=o.length;for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function L(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(31))},72:function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(71).Buffer)},76:function(t,e,n){"use strict";var r=n(94),i=n(0);e.a=Object(r.a)(function(){return!0},function(t){var e,n=NaN,r=NaN,a=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var u=o>0?i.o:-i.o,l=Object(i.a)(o-n);Object(i.a)(l-i.o)<i.i?(t.point(n,r=(r+s)/2>0?i.l:-i.l),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),e=0):a!==u&&l>=i.o&&(Object(i.a)(n-a)<i.i&&(n-=a*i.i),Object(i.a)(o-u)<i.i&&(o-=u*i.i),r=function(t,e,n,r){var a,o,s=Object(i.t)(t-n);return Object(i.a)(s)>i.i?Object(i.d)((Object(i.t)(e)*(o=Object(i.g)(r))*Object(i.t)(n)-Object(i.t)(r)*(a=Object(i.g)(e))*Object(i.t)(t))/(a*o*s)):(e+r)/2}(n,r,o,s),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=o,r=s),a=u},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var a;if(null==t)a=n*i.l,r.point(-i.o,a),r.point(0,a),r.point(i.o,a),r.point(i.o,0),r.point(i.o,-a),r.point(0,-a),r.point(-i.o,-a),r.point(-i.o,0),r.point(-i.o,a);else if(Object(i.a)(t[0]-e[0])>i.i){var o=t[0]<e[0]?i.o:-i.o;a=n*o/2,r.point(-o,a),r.point(0,a),r.point(o,a)}else r.point(e[0],e[1])},[-i.o,-i.l])},77:function(t,e,n){"use strict";e.a=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}},83:function(t,e,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var a=typeof r;if("string"===a||"number"===a)t.push(r);else if(Array.isArray(r)&&r.length){var o=i.apply(null,r);o&&t.push(o)}else if("object"===a)for(var s in r)n.call(r,s)&&r[s]&&t.push(s)}}return t.join(" ")}void 0!==t&&t.exports?(i.default=i,t.exports=i):void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},84:function(t,e,n){"use strict";var r=n(12),i=n(93),a=n(0),o=n(63),s=n(94);e.a=function(t){var e=Object(a.g)(t),n=6*a.r,u=e>0,l=Object(a.a)(e)>a.i;function h(t,n){return Object(a.g)(t)*Object(a.g)(n)>e}function c(t,n,i){var o=Object(r.a)(t),s=Object(r.a)(n),u=[1,0,0],l=Object(r.c)(o,s),h=Object(r.d)(l,l),c=l[0],f=h-c*c;if(!f)return!i&&t;var p=e*h/f,d=-e*c/f,y=Object(r.c)(u,l),m=Object(r.f)(u,p),v=Object(r.f)(l,d);Object(r.b)(m,v);var g=y,b=Object(r.d)(m,g),x=Object(r.d)(g,g),w=b*b-x*(Object(r.d)(m,m)-1);if(!(w<0)){var E=Object(a.u)(w),P=Object(r.f)(g,(-b-E)/x);if(Object(r.b)(P,m),P=Object(r.g)(P),!i)return P;var A,C=t[0],O=n[0],T=t[1],S=n[1];O<C&&(A=C,C=O,O=A);var M=O-C,N=Object(a.a)(M-a.o)<a.i,k=N||M<a.i;if(!N&&S<T&&(A=T,T=S,S=A),k?N?T+S>0^P[1]<(Object(a.a)(P[0]-C)<a.i?T:S):T<=P[1]&&P[1]<=S:M>a.o^(C<=P[0]&&P[0]<=O)){var B=Object(r.f)(g,(-b+E)/x);return Object(r.b)(B,m),[P,Object(r.g)(B)]}}}function f(e,n){var r=u?t:a.o-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}return Object(s.a)(h,function(t){var e,n,r,i,s;return{lineStart:function(){i=r=!1,s=1},point:function(p,d){var y,m=[p,d],v=h(p,d),g=u?v?0:f(p,d):v?f(p+(p<0?a.o:-a.o),d):0;if(!e&&(i=r=v)&&t.lineStart(),v!==r&&(!(y=c(e,m))||Object(o.a)(e,y)||Object(o.a)(m,y))&&(m[0]+=a.i,m[1]+=a.i,v=h(m[0],m[1])),v!==r)s=0,v?(t.lineStart(),y=c(m,e),t.point(y[0],y[1])):(y=c(e,m),t.point(y[0],y[1]),t.lineEnd()),e=y;else if(l&&e&&u^v){var b;g&n||!(b=c(m,e,!0))||(s=0,u?(t.lineStart(),t.point(b[0][0],b[0][1]),t.point(b[1][0],b[1][1]),t.lineEnd()):(t.point(b[1][0],b[1][1]),t.lineEnd(),t.lineStart(),t.point(b[0][0],b[0][1])))}!v||e&&Object(o.a)(e,m)||t.point(m[0],m[1]),e=m,r=v,n=g},lineEnd:function(){r&&t.lineEnd(),e=null},clean:function(){return s|(i&&r)<<1}}},function(e,r,a,o){Object(i.a)(o,t,n,a,e,r)},u?[0,-t]:[-a.o,t-a.o])}},88:function(t,e,n){"use strict";var r=n(1),i=n.n(r),a=n(5),o=n(69),s=(n(10),n(65)),u=n.n(s),l=n(9),h=n(66),c=n.n(h),f=n(99),p=n.n(f),d=n(2),y=n(100),m=n.n(y),v=n(8),g=n(4);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(t){return p.a[t]||t}function C(t){return A(l.a.CSS_PREFIX+t)}Object(v.e)();var O=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?P(t):e}(this,w(e).call(this,t))).state={disableNavigation:!1,eventDescription:"2014 National Election",regionType:"national",provinceName:"",muniName:"",muniCode:"",iecId:"",stylesheetFor:"web",componentID:11},t.regionType&&(n.state.regionType=t.regionType),t.provinceName&&(n.state.provinceName=t.provinceName),t.muniName&&(n.state.muniName=t.muniName),t.muniCode&&(n.state.muniCode=t.muniCode),t.iecId&&(n.state.iecId=t.iecId),t.componentID&&(n.state.componentID=t.componentID),t.disableNavigation&&(n.state.disableNavigation=t.disableNavigation),t.stylesheetFor&&(n.state.stylesheetFor=t.stylesheetFor),n.exportAsPNGUri=n.exportAsPNGUri.bind(P(P(n))),n.exportAsPNG=n.exportAsPNG.bind(P(P(n))),n.handlePreviewEvent=n.handlePreviewEvent.bind(P(P(n))),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(e,r["Component"]),function(t,e,n){e&&x(t.prototype,e),n&&x(t,n)}(e,[{key:"draw",value:function(t,e){this.drawGraph(t,e)}},{key:"componentDidMount",value:function(){this.draw(this.getContainer(),this.state),document.addEventListener(d.a.EXPORT_PNG,this.exportAsPNG),document.addEventListener(d.a.MAP_PREVIEW,this.handlePreviewEvent)}},{key:"componentWillUnmount",value:function(){this.getContainer().selectAll("svg").remove(),document.removeEventListener(d.a.EXPORT_PNG,this.exportAsPNG),document.removeEventListener(d.a.MAP_PREVIEW,this.handlePreviewEvent)}},{key:"componentDidUpdate",value:function(){console.log("componentDidUpdate",this.state),this.draw(this.getContainer(),this.state)}},{key:"exportAsPNGUri",value:function(){var t=this;return new Promise(function(e,n){var r=950,i=890,a=document.createElement("canvas");a.setAttribute("width",r),a.setAttribute("height",i),u()(a,t.refs.vizcontainer.innerHTML,{ignoreDimensions:!0,scaleWidth:r,scaleHeight:i}),e(a.toDataURL("image/png;base64").split(",")[1])})}},{key:"exportAsPNG",value:function(t){if(t.detail.componentID==this.state.componentID){var e=950,n=890,r=document.createElement("canvas");r.setAttribute("width",e),r.setAttribute("height",n),u()(r,this.refs.vizcontainer.innerHTML,{ignoreDimensions:!0,scaleWidth:e,scaleHeight:n});var i,a=r,o="turnout-map(".concat(Object(g.h)(this.state),").png"),s=document.createElement("a");s.download=o,s.href=a.toDataURL("image/png;base64"),document.createEvent?((i=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(i)):s.fireEvent&&s.fireEvent("onclick")}}},{key:"handlePreviewEvent",value:function(t){var e=t.detail;this.setState(e)}},{key:"getContainer",value:function(){return a.o(this.refs.vizcontainer)}},{key:"getLoadingSpinner",value:function(){return a.o(this.refs.loading)}},{key:"render",value:function(){var t=this.state,e=(t.disableNavigation,t.stylesheetFor);return i.a.createElement("div",{className:A("map-container")+" "+C("stylesheet-".concat(e))},i.a.createElement("div",{className:C("map-title")},Object(g.h)(this.state)),i.a.createElement("div",{ref:"vizcontainer",className:A("map")}),i.a.createElement("div",{className:C("loading-spinner"),ref:"loading"},i.a.createElement(m.a,{type:"spin",color:"#777",height:100,width:100})))}},{key:"drawGraph",value:function(t,e){var n=this,r=this,i=l.a.DOMAIN+"/mapdata/"+Object(g.g)(r.state);r.getLoadingSpinner().style("display","block").transition().duration(200).style("opacity",1);var s=Object(g.a)(A),u=800;t.selectAll("svg").remove();var h=t.append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 950 "+(u+90)).classed("svg-content",!0),f=[a.i(i),Object(v.i)(e)];Promise.all(f).then(function(t){var n,l=t[0],f=Object(g.p)(t[1],e);function p(t){return t>65?"#39711D":t>=60?"#458923":t>=55?"#53B025":t>=50?"#4BDC02":t>=45?"#7CE547":t>=40?"#93E968":t>=35?"#A6ED83":t>=30?"#C5F3AF":"#D3F6C3"}function y(t,e){var n,i=r.state.regionType;if("national"===i){var a=t.properties.SPROVINCE;n=f[a]}else if("province"===i){var o=Object(g.d)(t.properties);n=f[o]}else if("municipality"===i){var s=Object(g.e)(t.properties);n=f[s]}else{s=Object(g.e)(t.properties);n=f[s]}return n}if(-1!==i.indexOf(".topojson"))if("municipality"==(x=r.state.regionType)){if(!l.objects[r.state.muniCode])return;l=o.a(l,l.objects[r.state.muniCode])}else{if(!l.objects[r.state.iecId])return;l=o.a(l,l.objects[r.state.iecId])}n=l.features;var m=a.f().fitSize([900,u],l),v=a.g().projection(m);h.selectAll(".".concat(A("region"))).data(n).enter().append("path").attr("class",A("region")).attr("stroke","#eeeeee").attr("fill",function(t,e){return p(y(t))}).attr("id",function(t,e){return"region-".concat(e)}).attr("d",v);var b=h.selectAll(".".concat(A("legend"))).data([{text:"More than 65%",turnout:66},{text:"60% - 65%",turnout:60},{text:"55% - 60%",turnout:55},{text:"50% - 55%",turnout:50},{text:"45% - 50%",turnout:45},{text:"40% - 45%",turnout:40},{text:"35% - 40%",turnout:35},{text:"30% - 35%",turnout:30},{text:"Less than 30%",turnout:15}]).enter().append("g").attr("class",A("legend")).attr("transform",function(t,e){return"translate("+function(t){return[t%5*170,u+10+40*parseInt(t/5)]}(e)+")"});if(b.append("rect").attr("width",20).attr("height",20).attr("x",0).attr("y",0).attr("fill",function(t){return p(t.turnout)}),b.append("text").attr("x",30).attr("y",16).text(function(t){return t.text}),"municipality"!==r.state.regionType&&h.selectAll(".place-label").data(n).enter().append("text").attr("class","place-label").attr("font-size","12px").attr("transform",function(t){var e,n;return"Polygon"===t.geometry.type?(e=c()(t.geometry.coordinates),(n=m(e))[1]-=12,"translate("+n+")"):(e=c()(t.geometry.coordinates[0]),(n=m(e))[1]-=5,"translate("+n+")")}).attr("dy",".35em").style("text-anchor","middle").text(function(t){return Object(g.i)(t.properties,r.state)}),"municipality"!==r.state.regionType&&Object(g.b)(),h.selectAll(".eventLayer").data(n).enter().append("path").attr("d",v).attr("class","eventLayer").attr("id",function(t,e){return"eventLayer-".concat(e)}).attr("fill","transparent").on("mouseover",function(t,e){a.o("#region-".concat(e)).attr("stroke-width",3).style("fill-opacity",.8)}).on("mousemove",function(t,e){s.transition().duration(200).style("opacity",1),s.html(Object(g.i)(t.properties,r.state)+" : "+y(t)+"%").style("left",a.d.pageX+"px").style("top",a.d.pageY-28+"px")}).on("mouseout",function(t,e){a.o("#region-".concat(e)).attr("stroke-width",1).style("fill-opacity",1),"municipality"!==r.state.regionType&&s.transition().duration(200).style("opacity",0)}).on("click",function(t,e){if(!r.state.disableNavigation){s.transition().duration(200).style("opacity",0);var n=r.state.regionType;if("national"===n)i={regionType:"province",provinceName:t.properties.SPROVINCE},Object(g.u)(d.a.REGION_CHANGE,i),r.setState(i);else if("province"===n)i={regionType:"municipality",provinceName:r.state.provinceName,muniName:t.properties.smunicipal,muniCode:Object(g.d)(t.properties)},Object(g.u)(d.a.REGION_CHANGE,i),r.setState(i);else{var i={regionType:"municipality-vd",provinceName:r.state.provinceName,muniName:r.state.muniName,muniCode:r.state.muniCode,iecId:Object(g.e)(t.properties)};Object(g.u)(d.a.REGION_CHANGE,i),r.setState(i)}}}),!r.state.disableNavigation){var x,w=function(t,e,n){n&&t.append("span").html(" > "),t.append("span").style("height","30px").style("cursor","default").html(e)},E=function(t,e,n,i){i&&t.append("span").html(" > "),t.append("a").style("height","30px").style("cursor","pointer").html(e).on("click",function(){!function(t){var e;(e={regionType:r.state.regionType,provinceName:r.state.provinceName,muniName:r.state.muniName,muniImuniCodeD:r.state.muniCode,iecId:r.state.iecId}).regionType=t,Object(g.u)(d.a.REGION_CHANGE,e),r.setState(e)}(n)})},P=h.append("foreignObject").attr("x",0).attr("y",10).attr("width",500).attr("height",30).attr("class","map-controls").append("xhtml:div");"national"==(x=r.state.regionType)?w(P,"South Africa",!1):(E(P,"South Africa","national",!1),"province"==x?w(P,r.state.provinceName,!0):(E(P,r.state.provinceName,"province",!0),"municipality"==x?w(P,r.state.muniCode,!0):(E(P,r.state.muniCode,"municipality",!0),w(P,r.state.iecId,!0))))}r.getLoadingSpinner().style("display","none")}).catch(function(t){console.error(t),r.getLoadingSpinner().style("display","none");var e=Object(g.h)(n.state),i=r.state.regionType,a={regionType:r.state.regionType,provinceName:r.state.provinceName,muniName:r.state.muniName,muniImuniCodeD:r.state.muniCode,iecId:r.state.iecId};"province"===i?a.regionType="national":"municipality"===i?a.regionType="province":"municipality-vd"===i&&(a.regionType="municipality"),Object(g.u)(d.a.REGION_CHANGE,a),r.setState(a),setTimeout(function(){alert("".concat(e," has been disestablished"))},300)})}}]),e}();e.a=O},89:function(t,e,n){"use strict";var r=n(1),i=n.n(r),a=n(5),o=n(18),s=n.n(o),u=n(20),l=n(10),h=n.n(l),c=n(2),f=n(9),p=n(8),d=n(4);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var x={chartType:"Turnout Barchart",yAxisLabel:"PERCENTAGE",noXaxisByParty:!0,yValue:function(t){return t.percVoterTurnout},yValueFormat:function(t){return t+"%"}};function w(t){return s.a[t]||t}function E(t){return w(f.a.CSS_PREFIX+t)}var P=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);b(b(n=function(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?b(t):e}(this,v(e).call(this,t))));return n.state={eventType:"national",regionType:"national",provinceName:"",muniName:"",muniCode:"",iecId:"",stylesheetFor:"web",componentID:10},t.regionType&&(n.state.regionType=t.regionType),t.provinceName&&(n.state.provinceName=t.provinceName),t.muniName&&(n.state.muniName=t.muniName),t.muniCode&&(n.state.muniCode=t.muniCode),t.iecId&&(n.state.iecId=t.iecId),t.componentID&&(n.state.componentID=t.componentID),n.chart=null,n.refreshIntervalID=0,n.exportAsPNG=n.exportAsPNG.bind(b(b(n))),n.exportAsPNGUri=n.exportAsPNGUri.bind(b(b(n))),n.handleRegionChange=n.handleRegionChange.bind(b(b(n))),n.handlePreviewEvent=n.handlePreviewEvent.bind(b(b(n))),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(e,r["Component"]),function(t,e,n){e&&m(t.prototype,e),n&&m(t,n)}(e,[{key:"componentDidMount",value:function(){var t=this;this.draw(this.getContainer(),this.state),this.refreshIntervalID=setInterval(function(){t.draw(t.getContainer(),t.state)},3e4),document.addEventListener(c.a.EXPORT_PNG,this.exportAsPNG),document.addEventListener(c.a.REGION_CHANGE,this.handleRegionChange),document.addEventListener(c.a.CHART_PREVIEW,this.handlePreviewEvent)}},{key:"componentDidUpdate",value:function(){this.draw(this.getContainer(),this.state)}},{key:"componentWillUnmount",value:function(){this.chart=null,document.removeEventListener(c.a.EXPORT_PNG,this.exportAsPNG),document.removeEventListener(c.a.REGION_CHANGE,this.handleRegionChange),document.removeEventListener(c.a.CHART_PREVIEW,this.handlePreviewEvent),clearInterval(this.refreshIntervalID)}},{key:"handleRegionChange",value:function(t){var e=t.detail;this.setState(e)}},{key:"exportAsPNGUri",value:function(){var t=this;return new Promise(function(e,n){h.a.svgAsPngUri(t.refs.vizcontainer.childNodes[0],{},function(t){e(t.split(",")[1])})})}},{key:"exportAsPNG",value:function(t){t.detail.componentID==this.state.componentID&&h.a.saveSvgAsPng(this.refs.vizcontainer.childNodes[0],"turnout-barchart(".concat(Object(d.h)(this.state),").png"))}},{key:"handlePreviewEvent",value:function(t){var e=t.detail;this.chart&&this.chart.destroy(),this.chart=new u.a(this.getContainer(),null,null,w,x),this.setState(e)}},{key:"getContainer",value:function(){return a.o(this.refs.vizcontainer)}},{key:"render",value:function(){var t=this.state.stylesheetFor;return i.a.createElement("div",{className:w("barchart")+" "+E("stylesheet-".concat(t))},i.a.createElement("div",{className:E("chart-title")},x.chartType," (",Object(d.h)(this.state),"): "),i.a.createElement("div",{ref:"vizcontainer",className:w("chart-body")}))}},{key:"draw",value:function(t,e){var n=this,r=[Object(p.j)(e)];Promise.all(r).then(function(r){var i=r[0];n.drawGraph(t,e,i,"rgb(157,51,55)")}).catch(function(t){return console.error(t)})}},{key:"drawGraph",value:function(t,e,n,r){var i=Object(d.q)(n,e);this.chart||(this.chart=new u.a(t,null,null,w,x)),this.chart.draw(i,r)}}]),e}();e.a=P},9:function(t,e,n){"use strict";e.a={DOMAIN:"https://sabc-eds.github.io/elections-dataviz",CSS_PREFIX:"ELVIZ_"}},91:function(t,e,n){"use strict";function r(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}(function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n})(3),function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Math.PI;(function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n})(1.70158),function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158);var i=2*Math.PI;(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=i);function a(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return a.amplitude=function(e){return t(e,n*i)},a.period=function(n){return t(e,n)},a})(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=i);function a(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return a.amplitude=function(e){return t(e,n*i)},a.period=function(n){return t(e,n)},a}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=i);function a(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return a.amplitude=function(e){return t(e,n*i)},a.period=function(n){return t(e,n)},a}(1,.3);n.d(e,"a",function(){return r})},93:function(t,e,n){"use strict";var r=n(12),i=n(0);n(43);function a(t,e,n,a,s,u){if(n){var l=Object(i.g)(e),h=Object(i.t)(e),c=a*n;null==s?(s=e+a*i.w,u=e-c/2):(s=o(l,s),u=o(l,u),(a>0?s<u:s>u)&&(s+=a*i.w));for(var f,p=s;a>0?p>u:p<u;p-=c)f=Object(r.g)([l,-h*Object(i.g)(p),-h*Object(i.t)(p)]),t.point(f[0],f[1])}}function o(t,e){(e=Object(r.a)(e))[0]-=t,Object(r.e)(e);var n=Object(i.b)(-e[1]);return((-e[2]<0?-n:n)+i.w-i.i)%i.w}n.d(e,"a",function(){return a})},94:function(t,e,n){"use strict";var r=n(95),i=n(96),a=n(0),o=n(97),s=n(6);function u(t){return t.length>1}function l(t,e){return((t=t.x)[0]<0?t[1]-a.l-a.i:a.l-t[1])-((e=e.x)[0]<0?e[1]-a.l-a.i:a.l-e[1])}e.a=function(t,e,n,a){return function(h){var c,f,p,d=e(h),y=Object(r.a)(),m=e(y),v=!1,g={point:b,lineStart:w,lineEnd:E,polygonStart:function(){g.point=P,g.lineStart=A,g.lineEnd=C,f=[],c=[]},polygonEnd:function(){g.point=b,g.lineStart=w,g.lineEnd=E,f=Object(s.f)(f);var t=Object(o.a)(c,a);f.length?(v||(h.polygonStart(),v=!0),Object(i.a)(f,l,t,n,h)):t&&(v||(h.polygonStart(),v=!0),h.lineStart(),n(null,null,1,h),h.lineEnd()),v&&(h.polygonEnd(),v=!1),f=c=null},sphere:function(){h.polygonStart(),h.lineStart(),n(null,null,1,h),h.lineEnd(),h.polygonEnd()}};function b(e,n){t(e,n)&&h.point(e,n)}function x(t,e){d.point(t,e)}function w(){g.point=x,d.lineStart()}function E(){g.point=b,d.lineEnd()}function P(t,e){p.push([t,e]),m.point(t,e)}function A(){m.lineStart(),p=[]}function C(){P(p[0][0],p[0][1]),m.lineEnd();var t,e,n,r,i=m.clean(),a=y.result(),o=a.length;if(p.pop(),c.push(p),p=null,o)if(1&i){if((e=(n=a[0]).length-1)>0){for(v||(h.polygonStart(),v=!0),h.lineStart(),t=0;t<e;++t)h.point((r=n[t])[0],r[1]);h.lineEnd()}}else o>1&&2&i&&a.push(a.pop().concat(a.shift())),f.push(a.filter(u))}return g}}},95:function(t,e,n){"use strict";var r=n(14);e.a=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:r.a,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}},96:function(t,e,n){"use strict";var r=n(63);function i(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function a(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}e.a=function(t,e,n,o,s){var u,l,h=[],c=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,a=t[0],o=t[e];if(Object(r.a)(a,o)){for(s.lineStart(),u=0;u<e;++u)s.point((a=t[u])[0],a[1]);s.lineEnd()}else h.push(n=new i(a,t,null,!0)),c.push(n.o=new i(a,null,n,!1)),h.push(n=new i(o,t,null,!1)),c.push(n.o=new i(o,null,n,!0))}}),h.length){for(c.sort(e),a(h),a(c),u=0,l=c.length;u<l;++u)c[u].e=n=!n;for(var f,p,d=h[0];;){for(var y=d,m=!0;y.v;)if((y=y.n)===d)return;f=y.z,s.lineStart();do{if(y.v=y.o.v=!0,y.e){if(m)for(u=0,l=f.length;u<l;++u)s.point((p=f[u])[0],p[1]);else o(y.x,y.n.x,1,s);y=y.n}else{if(m)for(f=y.p.z,u=f.length-1;u>=0;--u)s.point((p=f[u])[0],p[1]);else o(y.x,y.p.x,-1,s);y=y.p}f=(y=y.o).z,m=!m}while(!y.v);s.lineEnd()}}}}}]);