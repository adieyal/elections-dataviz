{"version":3,"sources":["components/BarChart/d3barchart.js","events/index.js","config/index.js","api/index.js","components/BarChart/barchart.js","components/BarChart/barchartEmbed.js","components/Map/map.js","components/Map/mapEmbed.js","App.js","components/Box/Box.js","serviceWorker.js","index.js"],"names":["Chart","container","width","height","className","tooltipDiv","predefColors","svg","append","attr","parseInt","document","getElementsByClassName","d3","style","x","rangeRound","y","YaxisOffset","text","barSvg","barTextSvg","this","draw","chartData","domain","map","d","name","select","transition","duration","call","ticks","tickFormat","bars","selectAll","concat","data","exit","remove","enter","bandwidth","i","length","on","html","partyInfo","split","toLowerCase","replace","l","toUpperCase","percOfVotes","pageX","pageY","Number","barTexts","destroy","events","config","DOMAIN","ApolloClient","link","HttpLink","uri","useGETForQueries","headers","Content-Type","cache","InMemoryCache","chart","dataRefreshTime","originName","styles","BarChart","props","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","self","assertThisInitialized","state","numParties","regionName","regionType","setInterval","getContainer","handleRegionChange","bind","handlePreviewEvent","redrawChart","addEventListener","window","removeEventListener","modifW","Math","min","body","clientWidth","modifH","setState","event","newState","detail","console","log","refs","vizcontainer","react_default","a","createElement","ref","options","fullRouteVoteResultsFile","voteResultLoader","Promise","resolve","reject","then","results","filter","edge","indexOf","slice","catch","error","getVotesDataT","drawGraph","edges","node","el","validVotes","Component","originClassName","bootstrapStyles","BarChartEmbed","elementId","e","target","value","CustomEvent","dispatchEvent","_this2","_this$state","type","placeholder","onChange","onRegionTypeChange","disabled","onClick","onPreview","Map","parentProvinceName","nationalMapFile","fullRouteGeoJsonFile","Limpopo","Mpumalanga","Gauteng","KwaZulu-Natal","North West","Free State","Eastern Cape","Northern Cape","Western Cape","getRegionFileName","getLoadingSpinner","process","classed","w","geoJsonLoader","all","values","getJsonDataFeatures","geoJsonData","topojson","objects","features","projection","fitSize","path","center","projectionCenter","geometry","polylabel","coordinates","properties","SPROVINCE","smunicipal","SMUNICIPAL","labelElements","regions","overlapCnt","getBoundingClientRect","j","rect1","rect2","right","left","bottom","top","setAttribute","innerHTML","loading","react_loading_default","color","MapEmbed","locationName","App","BarChart_barchart","Map_map","BarChart_barchartEmbed","Map_mapEmbed","id","Boolean","location","hostname","match","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f92b875f.chunk.js","sourcesContent":["import * as d3 from \"d3\";\n\nexport function Chart(container, width, height, className) {\n    var XaxisOffset = 70;\n    var YaxisOffset = 20;\n    var predefColors = [\"blue\", \"yellow\", \"red\"];\n    var svg = container.append(\"svg\")\n        .attr(\"width\", parseInt(width) + XaxisOffset)\n        .attr(\"height\", parseInt(height) + YaxisOffset);\n  \n    var tooltipDiv;\n    if (document.getElementsByClassName(\"tooltip\")[0]) {\n      tooltipDiv = d3.select(\".tooltip\");\n    } else {\n      tooltipDiv = d3.select(\"body\").append(\"div\")\t\n        .attr(\"class\", className(\"tooltip\"))\t\t\t\t\n        .style(\"opacity\", 0);\n    }\n  \n    var x = d3.scaleBand()\n      .rangeRound([XaxisOffset, width])\n  \n    var y = d3.scaleLinear()\n      .rangeRound([height, YaxisOffset]);\n  \n    svg.append(\"g\")\n      .attr(\"transform\", \"translate(20,\"+(height/2+YaxisOffset/2)+\")\")\n      .append(\"text\")\n      .attr(\"class\", className(\"percentage-label\"))\n      .attr(\"transform\", \"rotate(-90)\")\n      .text(\"PERCENTAGE VOTES\")\n      .attr(\"text-anchor\", \"middle\");\n  \n    svg.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n  \n    svg.append(\"g\")\n      .attr(\"class\", \"y axis\")\n      .attr(\"transform\", \"translate(\" + XaxisOffset +\", 0)\")\n  \n    var barSvg = svg.append(\"g\")\n      .attr(\"class\", className(\"bar-container\"));\n    var barTextSvg = svg.append(\"g\")\n      .attr(\"class\", className(\"bartext-container\"));\n  \n    this.draw = function(chartData) {\n      x.domain(chartData.map(function (d) {\n          return d.name;\n        }));\n      y.domain([0, 100]);\n  \n          svg.select(\".x.axis\").transition().duration(300).call(d3.axisBottom(x));\n          svg.select(\".y.axis\").transition().duration(300).call(d3.axisLeft(y)\n        .ticks(6)\n        .tickFormat(function(d) { return d + \"%\"; })\n      )\n  \n      var bars = barSvg.selectAll(`.${className(\"bar\")}`).data(chartData);\n  \n      bars.exit()\n        .transition()\n        .duration(300)\n        .attr(\"y\", function(d) {\n          return y(0);\n        })\n        .attr(\"height\", 0)\n        .style(\"fill-opacity\", 1e-6)\n        .remove();\n  \n      bars.enter()\n          .append(\"rect\")\n          .attr(\"class\", className(\"bar\"))\n          .attr(\"x\", function (d) {\n            return x(d.name)+x.bandwidth()/20;\n          })\n          .attr(\"width\", x.bandwidth()*9/10)\n          .attr(\"fill\", (d,i) => predefColors[i%predefColors.length])\n          .on(\"mousemove\", function(d) {\t\t\n              d3.select(this)\n                .attr(\"opacity\", 0.8);\n              tooltipDiv.transition()\t\t\n                  .duration(200)\t\t\n                  .style(\"opacity\", .9);\t\t\n              function formatPartyName(name) {\n                return name.split(\"/\")[0].toLowerCase().replace(/\\b\\w/g, function(l){ return l.toUpperCase() })\n              }\n              tooltipDiv.html(formatPartyName(d.partyInfo.name) + \" : \" + d.percOfVotes + \"%\")\n                  .style(\"left\", (d3.event.pageX) + \"px\")\t\t\n                  .style(\"top\", (d3.event.pageY - 28) + \"px\");\t\n              })\t\t\t\t\t\n          .on(\"mouseout\", function(d) {\t\t\n              d3.select(this)\n                .attr(\"opacity\", 1);\n              tooltipDiv.transition()\t\t\n                  .duration(200)\t\t\n                  .style(\"opacity\", 0);\t\n          })\n          .attr(\"y\", function(d) {\n            return y(0);\n          })\n          .attr(\"height\", 0)        \n  \n        barSvg.selectAll(`.${className(\"bar\")}`).data(chartData)\n          .transition()\n          .duration(300)\n          .attr(\"y\", function (d) {\n            return y(Number(d.percOfVotes));\n          })\n          .attr(\"height\", function (d) {\n            return height - y(Number(d.percOfVotes));\n          })\n          \n        var barTexts = barTextSvg.selectAll(`.${className(\"bartext\")}`).data(chartData);\n  \n        barTexts.exit()\n          .transition()\n          .duration(300)\n          .attr(\"y\", function(d) {\n            return y(0) - 5;\n          })\n          .style(\"fill-opacity\", 1e-6)\n          .remove();\n  \n        barTexts.enter().append(\"text\")\n          .attr(\"class\", className(\"bartext\"))\n          .attr(\"x\", function (d) {\n            return x(d.name)+x.bandwidth()/2;\n          })\n          .attr(\"text-anchor\", \"middle\")\n          .attr(\"font-size\", \"12px\")\n          .attr(\"y\", function(d) {\n            return y(0) - 5;\n          })\n        barTextSvg.selectAll(`.${className(\"bartext\")}`).data(chartData)\n          .text(function(d) {\n            return d.percOfVotes + \"%\";\n          })\n          .transition()\n          .duration(300)\n          .attr(\"y\", function (d) {\n            return y(Number(d.percOfVotes)) - 5;\n          })\n    }\n    this.destroy = function() {\n      svg.remove();\n    }\n  }","const REGION_CHANGE = \"region-change\";\nconst BARCHART_PREVIEW = \"barchart-preview\";\n\nexport default {\n    REGION_CHANGE,\n    BARCHART_PREVIEW\n};","var config = {\n    \"DOMAIN\": \"https://sabc-eds.github.io/elections-dataviz\"\n}\n\nexport default config;","import { ApolloClient } from \"apollo-client\"\nimport { HttpLink } from \"apollo-link-http\"\nimport { InMemoryCache } from \"apollo-cache-inmemory\"\nimport gql from \"graphql-tag\"\nimport * as d3 from \"d3\"\nimport config from \"../config\"\n\nconst client = new ApolloClient({\n  link: new HttpLink({ uri: \"http://elections2019.xyz/graphql\", useGETForQueries: true, headers: {\"Content-Type\" : \"application/graphql\" } }),\n  cache: new InMemoryCache()\n})\n\nexport function getVotesDataT(options) {\n\n  var fullRouteVoteResultsFile = config.DOMAIN + \"/votedata/\" + \"results.json\";\n  if (options.regionType == \"municipality\") {\n    fullRouteVoteResultsFile = config.DOMAIN + \"/votedata/\" + \"wc_munis.json\";\n  }\n  var voteResultLoader = d3.json(fullRouteVoteResultsFile);\n\n  return new Promise(function(resolve, reject) {\n    voteResultLoader.then(function(results) {\n      results[\"data\"][\"allProvincialBallots\"][\"edges\"] = results[\"data\"][\"allProvincialBallots\"][\"edges\"].filter(edge => {\n        if (options.regionType == \"national\") {\n          return (edge[\"node\"][\"location\"][\"name\"].indexOf(\"Country\") != -1);\n        } else if (options.regionType == \"province\") {\n          return (edge[\"node\"][\"location\"][\"name\"] == options.regionName);\n        } else {\n          return (edge[\"node\"][\"location\"][\"name\"].indexOf(options.regionName) != -1);\n        }\n      })\n      if (results[\"data\"][\"allProvincialBallots\"][\"edges\"].length) {\n        results[\"data\"][\"allProvincialBallots\"][\"edges\"][0][\"node\"][\"partyResults\"][\"edges\"] \n          = results[\"data\"][\"allProvincialBallots\"][\"edges\"][0][\"node\"][\"partyResults\"][\"edges\"].slice(0, options.numParties)\n      }\n      resolve(results);\n    }).catch(function(error) {\n      console.error(\"error\", error);\n      reject(error);\n    })\n  });\n}\n\nexport function getVotesDataM(options) {\n  return client.query({\n    query: gql`\n    {\n      allProvincialBallots{\n        edges{\n          node{\n            partyResults {\n              edges{\n                node{\n                  validVotes\n                  percOfVotes\n                  party {\n                    id\n                    name\n                    abbreviation\n                  }\n                }\n              }\n            }\n            location {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n    `\n  })\n}\n\nexport function getVotesData(options) {\n    return client.query({\n        query: gql`\n        {\n          allProvincialBallots(\n              event_Description_Icontains:\"2004\", \n            event_EventType_Description_Icontains:\"${options.regionType}\",\n            location_Name:\"${options.regionName}\"\n        \n          ) {\n            edges {\n              node {\n                topResult(validVotes_Gt:1000, last:${options.numParties}) {\n                  edges {\n                    node {\n                      validVotes\n                      party {\n                        name\n                        abbreviation\n                      }\n                    }\n                  }\n                }\n                location {\n                  name\n                }\n              }\n            }\n          }\n        }\n        `,\n      });\n}","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport styles from \"./barchart.css\";\nimport {Chart} from \"./d3barchart\";\n\nimport events from \"../../events\";\nimport {\n  getVotesData,\n  getVotesDataT\n} from \"../../api\";\n\nvar dataRefreshTime = 30 * 1000;\n\n\n// for the purposes of the proof of concept - production data should be live\nvar use_live_data = true;\n\nvar js = {\n    \"data\": {\n      \"allProvincialBallots\": {\n        \"edges\": [\n          {\n            \"node\": {\n              \"partyResults\": {\n                \"edges\": [\n                  {\n                    \"node\": {\n                      \"validVotes\": 15311,\n                      \"percOfVotes\": 84.44,\n                      \"party\": {\n                        \"id\": \"52\",\n                        \"name\": \"DEMOCRATIC ALLIANCE/DEMOKRATIESE ALLIANSIE\",\n                        \"abbreviation\": \"DA\"\n                      }\n                    }\n                  },\n                  {\n                    \"node\": {\n                      \"validVotes\": 1508,\n                      \"percOfVotes\": 8.32,\n                      \"party\": {\n                        \"id\": \"7\",\n                        \"name\": \"AFRICAN NATIONAL CONGRESS\",\n                        \"abbreviation\": \"ANC\"\n                      }\n                    }\n                  },\n                  {\n                    \"node\": {\n                      \"validVotes\": 328,\n                      \"percOfVotes\": 1.81,\n                      \"party\": {\n                        \"id\": \"938\",\n                        \"name\": \"AGANG SOUTH AFRICA\",\n                        \"abbreviation\": \"AGANG SA\"\n                      }\n                    }\n                  },\n                  {\n                    \"node\": {\n                      \"validVotes\": 255,\n                      \"percOfVotes\": 1.41,\n                      \"party\": {\n                        \"id\": \"945\",\n                        \"name\": \"ECONOMIC FREEDOM FIGHTERS\",\n                        \"abbreviation\": \"EFF\"\n                      }\n                    }\n                  },\n                  {\n                    \"node\": {\n                      \"validVotes\": 198,\n                      \"percOfVotes\": 1.09,\n                      \"party\": {\n                        \"id\": \"4\",\n                        \"name\": \"VRYHEIDSFRONT PLUS\",\n                        \"abbreviation\": \"VF Plus\"\n                      }\n                    }\n                  }\n                ]\n              },\n              \"location\": {\n                \"id\": \"UHJvdmluY2VUeXBlOjk5\",\n                \"name\": \"Out of Country\"\n              }\n            }\n          }\n        ]\n      }\n    }\n}\n\nfunction className(originName) {\n  return styles[originName] || originName;\n}\n\n\n\nvar chart;\n\nclass BarChart extends Component {\n\n    constructor(props) {\n      super(props);\n      var self = this;\n      this.state = {\n        numParties: 5,\n        regionName: \"SA\",\n        regionType: \"national\",\n        width: 600,\n        height: 220\n      }\n      if (props.numParties) {\n        this.state.numParties = props.numParties;\n      }\n      if (props.regionName) {\n        this.state.regionName = props.regionName;\n      }\n      if (props.width) {\n        this.state.width = props.width;\n      }\n      if (props.height) {\n        this.state.height = props.height;\n      }\n      setInterval(() => {\n        self.draw(self.getContainer(), self.state)\n      }, dataRefreshTime);\n      this.handleRegionChange = this.handleRegionChange.bind(this);\n      this.handlePreviewEvent = this.handlePreviewEvent.bind(this);\n      this.redrawChart = this.redrawChart.bind(this);\n    }\n  \n    componentDidMount() {\n      this.draw(this.getContainer(), this.state)\n      document.addEventListener(events.REGION_CHANGE, this.handleRegionChange);\n      document.addEventListener(events.BARCHART_PREVIEW, this.handlePreviewEvent);\n      window.addEventListener(\"resize\", this.redrawChart, 200);\n    }\n\n    componentDidUpdate() {\n      this.draw(this.getContainer(), this.state)\n    }\n\n    componentWillUnmount() {\n      document.removeEventListener(events.REGION_CHANGE, this.handleRegionChange);\n      document.removeEventListener(events.BARCHART_PREVIEW, this.handlePreviewEvent);\n      window.removeEventListener(\"resize\", this.redrawChart);\n    }\n\n    redrawChart() {\n      var modifW = Math.min(810, document.body.clientWidth- 350), modifH = modifW/2.5;\n      if (chart)\n        chart.destroy();\n      chart = new Chart(this.getContainer(), modifW, modifH, className);\n      this.setState({width: modifW, height: modifH});\n    };\n\n    handleRegionChange(event) {\n      var newState = event.detail;\n      console.log(\"handleRegionChange\", newState);\n      this.setState({regionName: newState.regionName, regionType: newState.regionType})\n    }\n\n    handlePreviewEvent(event) {\n      var newState = event.detail;\n      console.log(\"handlePreviewEvent\", newState);\n      if (chart)\n        chart.destroy();\n      chart = new Chart(this.getContainer(), this.state.width, this.state.height, className);\n      this.setState({regionName: newState.regionName, regionType: newState.regionType, numParties: newState.numParties})\n    }\n\n    getContainer() {\n      return d3.select(this.refs.vizcontainer)\n    }\n      \n    render () {\n      return (\n          <div className=\"barchart\">\n            <div className={className(\"chart-title\")}>RACE FOR VOTES ({this.state.regionName}): </div>\n            <div ref=\"vizcontainer\" className={className(\"chart-body\")}></div>\n          </div>\n        )\n    }\n\n    draw(container, props) {\n      var self = this;\n      if (use_live_data) {\n        getVotesDataT({\n          numParties: props.numParties || 5,\n          regionName: props.regionName || \"Western Cape\",\n          regionType: props.regionType || \"province\"\n        }).then(function(data) {\n            self.drawGraph(container, props, data);\n        }).catch(error => console.error(error));\n      }\n      else {\n          self.drawGraph(container, props, js);\n      }\n    }\n\n    drawGraph(container, props, data) {\n        var chartData;\n        var results = data[\"data\"][\"allProvincialBallots\"].edges[0][\"node\"][\"partyResults\"][\"edges\"];\n        \n        chartData = results.map(function(node) {\n            var el = node[\"node\"];\n            return {\n                name: el[\"party\"][\"abbreviation\"],\n                validVotes: el[\"validVotes\"],\n                percOfVotes: el[\"percOfVotes\"],\n                partyInfo: el[\"party\"]\n            }\n        });\n\n        var width = parseInt(props.width);\n        var height = parseInt(props.height);\n        if (!chart)\n          chart = new Chart(container, width, height, className);\n        chart.draw(chartData);\n    }\n}\n\nexport default BarChart;\n","import React, { Component } from \"react\";\nimport config from \"../../config\";\nimport bootstrapStyles from \"bootstrap/dist/css/bootstrap.min.css\";\nimport styles from \"./barchartEmbed.css\";\nimport events from \"../../events\";\n\nfunction className(originClassName) {\n    return bootstrapStyles[originClassName] || styles[originClassName] || originClassName;\n}\n\nclass BarChartEmbed extends Component {\n    \n    constructor(props) {\n        super(props);\n        this.state = {\n            elementId: \"root\",\n            regionType: \"province\",\n            regionName: \"Western Cape\",\n            numParties: 5\n        }\n    }\n\n    componentDidMount() {\n    }\n\n    componentDidUpdate() {\n    }\n\n    onRegionTypeChange(e) {\n        var newState = {regionType: e.target.value};\n        if (newState.regionType == \"national\" ) {\n            newState.regionName = \"SA\";\n        } else {\n            newState.regionName = \"\";\n        }\n        this.setState(newState);\n    }\n\n    onPreview(e) {\n        var event = new CustomEvent(events.BARCHART_PREVIEW, { detail: this.state });\n        document.dispatchEvent(event);\n    }\n      \n    render () {\n        var DOMAIN = config.DOMAIN;\n        var {\n            elementId,\n            regionType,\n            regionName,\n            numParties\n        } = this.state;\n        return (\n          <div>\n            <h3> Barchart Embed Script Generation </h3>\n            <div className={className(\"form-group\")}>\n                <label>Element ID </label>\n                <input \n                    type=\"text\" \n                    className={className(\"form-control\")} \n                    placeholder=\"chart-container\"\n                    onChange={e => this.setState({elementId: e.target.value})}\n                    />\n            </div>\n              <div className={className(\"form-group\")}>\n                  <label>Region Type </label>\n                  <select className={className(\"form-control\")} \n                     value={regionType}\n                     onChange={this.onRegionTypeChange.bind(this)}>\n                        <option value=\"national\">national</option>\n                        <option value=\"province\">province</option>\n                  </select>\n              </div>\n                <div className={className(\"form-group\")}>\n                    <label>Region Name</label>\n                    <input \n                        type=\"text\" \n                        className={className(\"form-control\")} \n                        placeholder=\"Western Cape\"\n                        value={regionName}\n                        onChange={e => this.setState({regionName: e.target.value})} \n                        disabled={(regionType==\"national\")}/>\n                </div>\n              <div className={className(\"form-group\")}>\n                  <label>Number Of Parties</label>\n                  <input \n                    type=\"number\" \n                    className={className(\"form-control\")} \n                    placeholder=\"5\"\n                    value={numParties}\n                    onChange={e => this.setState({numParties: e.target.value})} />\n              </div>\n              <div className={className(\"form-group\")}>\n                <button type=\"button\" onClick={this.onPreview.bind(this)} className={className(\"btn\") + \" \" + className(\"btn-primary\") }>Preview</button>\n              </div>\n              <div className={className(\"form-group\")}>\n                  <label>Embed Code</label>\n                  <div className={className(\"embedcode\")}>\n                    <span>{`<script src=\"${DOMAIN}/embed/embed.js\"></script><script>showBarChart(document.getElementById(\"${elementId}\",\"${regionType}\",\"${regionName}\",${numParties}));</script>`}</span>\n                  </div>\n              </div>\n          </div>\n        )\n    }\n}\n\nexport default BarChartEmbed;\n\n\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson-client\";\nimport config from \"../../config\";\nimport polylabel from \"polylabel\";\nimport styles from \"./map.css\";\nimport events from \"../../events\";\nimport ReactLoading from \"react-loading\";\n\nvar regionColor = \"#9c9c9c\";\nvar regionBorderColor = \"#eeeeee\";\n\n\nfunction className(originName) {\n  return styles[originName] || originName;\n}\n\nclass Map extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n          regionType: \"national\",\n          regionName: \"SA\",\n          parentProvinceName: \"\"\n        }\n\n        if (props.regionType) {\n            this.state.regionType = props.regionType;\n        }\n        if (props.regionName) {\n            this.state.regionName = props.regionName;\n        }\n    }\n\n\n\n    drawGraph(container, props) {\n        var self = this;\n        var nationalMapFile = \"province_lo-res.geojson\";\n\n        function getRegionFileName() {\n            function getProvinceFileName(regionName) {\n                var provinceNameToFileMap = {\n                    \"Limpopo\": \"lim_lo-res.geojson\",\n                    \"Mpumalanga\": \"mp_lo-res.geojson\",\n                    \"Gauteng\": \"gt_lo-res.geojson\",\n                    \"KwaZulu-Natal\": \"kzn_lo-res.geojson\",\n                    \"North West\": \"nw_lo-res.geojson\",\n                    \"Free State\": \"fs_lo-res.geojson\",\n                    \"Eastern Cape\": \"ec_lo-res.geojson\",\n                    \"Northern Cape\": \"nc_lo-res.geojson\",\n                    \"Western Cape\": \"wc_lo-res.geojson\",\n                }\n                return provinceNameToFileMap[regionName];\n            }\n            switch(self.state.regionType) {\n                case \"national\":\n                    return nationalMapFile;\n                case \"province\":\n                    return getProvinceFileName(self.state.regionName);\n                case \"municipality\":\n                    return self.state.regionName + \".topojson\";\n                default:\n                    return null;\n            }\n        }\n\n        var fullRouteGeoJsonFile = config.DOMAIN + \"/mapdata/\" + getRegionFileName();\n\n        self.getLoadingSpinner()\n            .style(\"display\", \"block\")\n            .transition()\n            .duration(200)\n            .style(\"opacity\", 1);\n\n        var tooltipDiv;\n        if (document.getElementsByClassName(\"tooltip\")[0]) {\n          tooltipDiv = d3.select(\".tooltip\");\n        } else {\n          tooltipDiv = d3.select(\"body\").append(\"div\")\t\n            .attr(\"class\", className(\"tooltip\"))\t\t\t\t\n            .style(\"opacity\", 0);\n        }\n\n        console.log(\"process.env\", process.env)\n        console.log(\"fullRouteGeoJsonFile\", fullRouteGeoJsonFile);\n\n        var w = 900;\n        var h = 800;\n        container.selectAll(\"svg\").remove();\n        var svg = container.append(\"svg\")\n            .attr(\"preserveAspectRatio\", \"xMinYMin meet\").style(\"background-color\",\"#ffffff\")\n            .attr(\"viewBox\", \"0 0 \" + w + \" \" + h)\n            .classed(\"svg-content\", true);\n\n        var fo = svg.append(\"foreignObject\")\n            .attr(\"x\", w - 100)\n            .attr(\"y\", 10)\n            .attr(\"width\", 100)\n            .attr(\"height\", 30)\n            .attr(\"class\", \"map-controls\")\n        fo.append(\"xhtml:div\")\n            .append(\"button\")\n            .attr(\"class\", \"go-back\")\n            .html(\"go back\")\n            .on(\"click\", function() {\n                var regionType = self.state.regionType;\n                var newState, event;\n                if (regionType === \"province\") {\n                    newState = {regionType: \"national\", regionName: \"SA\"};\n                    event = new CustomEvent(events.REGION_CHANGE, { detail: newState });\n                    document.dispatchEvent(event);\n                    self.setState(newState);\n                } else if (regionType === \"municipality\") {\n                    function getProvinceFromMunicipality(municipalityName) {\n                        return self.state.parentProvinceName;\n                    }\n                    newState = {\n                        regionType: \"province\", \n                        regionName: getProvinceFromMunicipality(self.regionName)\n                    };\n                    event = new CustomEvent(events.REGION_CHANGE, { detail: newState });\n                    document.dispatchEvent(event);\n                    self.setState(newState);\n                }\n            });\n\n        var geoJsonLoader = d3.json(fullRouteGeoJsonFile);\n\n        Promise.all([geoJsonLoader]).then(function(values){ \n\n            console.log(\"json load Finished\");\n            var geoJsonData = values[0];\n\n            var getJsonDataFeatures;\n            if (fullRouteGeoJsonFile.indexOf(\".topojson\") !== -1) {\n                geoJsonData = topojson.feature(geoJsonData, geoJsonData.objects[self.state.regionName]);\n            }\n\n            getJsonDataFeatures = geoJsonData.features;\n\n            console.log(\"getJsonDataFeatures\", getJsonDataFeatures);\n\n\n            var projection = d3.geoMercator().fitSize([w, h], geoJsonData);\n            var path = d3.geoPath().projection(projection);\n\n            // fill region with regionColor\n            svg.selectAll(`.${className(\"region\")}`)\n                .data(getJsonDataFeatures)\n                .enter()\n                .append(\"path\")\n                .attr(\"class\", className(\"region\"))\n                .attr(\"stroke\", regionBorderColor)\n                .attr(\"fill\", regionColor)\n                .attr(\"id\", function(d, i) {\n                    return `region-${i}`;\n                })\n                .attr(\"d\", path);\n            \n            if (self.state.regionType !== \"municipality\") {\n                //show place label\n                svg.selectAll(\".place-label\")\n                    .data(getJsonDataFeatures)\n                .enter().append(\"text\")\n                    .attr(\"class\", \"place-label\")\n                    .attr(\"font-size\", \"12px\")\n                    .attr(\"transform\", function(d) { \n                        var center, projectionCenter;\n                        if (d.geometry.type === \"Polygon\") {\n                            center = polylabel(d.geometry.coordinates);\n                            projectionCenter = projection(center);\n                            projectionCenter[1] -= 12;\n                            return \"translate(\" + projectionCenter + \")\"; \n                        } else { //\"MultiPolygon\"\n                            center = polylabel(d.geometry.coordinates[0]);\n                            projectionCenter = projection(center);\n                            projectionCenter[1] -= 5;\n                            return \"translate(\" + projectionCenter + \")\"; \n                        }\n                    })\n                    .attr(\"dy\", \".35em\")\n                    .style(\"text-anchor\", \"middle\")\n                    .text(function(d) { \n                        if (self.state.regionType === \"national\") {\n                            return d.properties.SPROVINCE;\n                        } else if (self.state.regionType === \"province\") {\n                            return d.properties.smunicipal.split(\"-\")[1].split(\"[\")[0]; \n                        } else {//municipality\n                            return d.properties.SMUNICIPAL.split(\"-\")[1].split(\"[\")[0]; \n                        }\n                    })\n            }\n\n            if (self.state.regionType !== \"municipality\") {\n                var labelElements = document.getElementsByClassName(\"place-label\");\n\n                var regions = {};\n                var overlapCnt = {};\n                var i;\n\n                for (i = 0; i < getJsonDataFeatures.length; i ++) {\n                    regions[i] = labelElements[i].getBoundingClientRect();\n                }\n    \n                for (i = 0; i < getJsonDataFeatures.length; i ++) {\n                    for (var j = 0; j < i; j ++) {\n                        var rect1 = regions[i];\n                        var rect2 = regions[j];\n                        var overlap = !(rect1.right < rect2.left || \n                            rect1.left > rect2.right || \n                            rect1.bottom < rect2.top || \n                            rect1.top > rect2.bottom);\n                        if (overlap) {\n                            overlapCnt[i] = overlapCnt[i]? (overlapCnt[i] + 1): 1;\n                        }\n                    }\n                    if (overlapCnt[i] > 2) {\n                        labelElements[i].setAttribute(\"opacity\", 0)\n                    } else if (overlapCnt[i] > 0){\n                        labelElements[i].innerHTML = labelElements[i].innerHTML.slice(0, 3) + \"...\";\n                    } else {\n    \n                    }\n                }\n            }\n\n            \n\t\t\t\t\n            //hidden area for catching events\n            svg.selectAll(\".eventLayer\")\n                .data(getJsonDataFeatures)\n            .enter()\n                .append(\"path\")\n                .attr(\"d\", path)\n                .attr(\"class\", \"eventLayer\")\n                .attr(\"id\", function(d, i) {\n                    return `eventLayer-${i}`;\n                })\n                .attr(\"fill\", \"transparent\")\n                .on(\"mouseover\", function(d, i) {\n                    d3.select(`#region-${i}`)\n                        .attr(\"stroke-width\", 3)\n                        .style(\"fill-opacity\", 0.8);\n                })\n                .on(\"mousemove\", function(d) {\t\n                    if (self.state.regionType === \"municipality\") return;\n                    tooltipDiv.transition()\t\t\n                        .duration(200)\t\t\n                        .style(\"opacity\", 1);\n                    function regionName() {\n                        if (self.state.regionType === \"national\") {\n                            return d.properties.SPROVINCE;\n                        } else if (self.state.regionType === \"province\") {\n                            return d.properties.smunicipal.split(\"-\")[1].split(\"[\")[0]; \n                        } else {//municipality\n                            return d.properties.SMUNICIPAL.split(\"-\")[1].split(\"[\")[0]; \n                        }\n                    }\n                    tooltipDiv.html(regionName())\t\n                        .style(\"left\", (d3.event.pageX) + \"px\")\t\t\n                        .style(\"top\", (d3.event.pageY - 28) + \"px\");\t\n                })\n                .on(\"mouseout\", function(d, i) {\n                    d3.select(`#region-${i}`)\n                        .attr(\"stroke-width\", 1)\n                        .style(\"fill-opacity\", 1);\n                    \n                    if (self.state.regionType === \"municipality\") return;\n\n                    tooltipDiv.transition()\t\t\n                        .duration(200)\t\t\n                        .style(\"opacity\", 0);\t\n                })\n                .on(\"click\", function(d, i) {\n                    console.log(\"click event\", i, d.properties);\n                    tooltipDiv.transition()\t\t\n                        .duration(200)\t\t\n                        .style(\"opacity\", 0);\t\n                    \n                    var regionType = self.state.regionType;\n                    var newState, event;\n                    if (regionType === \"national\") {\n                        newState = {\n                            regionType: \"province\",\n                            regionName: d.properties.SPROVINCE\n                        }\n                        event = new CustomEvent(events.REGION_CHANGE, { detail: newState });\n                        document.dispatchEvent(event);\n                        self.setState(newState);\n                    } else if (regionType === \"province\") {\n                        function getMunicipalityName(properties) {\n                            return properties.smunicipal.split(\"-\")[0].replace(/\\s/g, \"\");\n                        }\n                        newState = {\n                            regionType: \"municipality\", \n                            regionName: getMunicipalityName(d.properties),\n                            parentProvinceName: self.state.regionName\n                        }\n                        console.log(\"newState.parentProvinceName\", newState.parentProvinceName);\n                        if (newState.parentProvinceName == \"Western Cape\") {\n                            event = new CustomEvent(events.REGION_CHANGE, { detail: newState });\n                            document.dispatchEvent(event);\n                        }\n\n                        self.setState(newState);\n                    } else {\n                        // function getMunicipalityRegionName(properties) {\n                        //     return properties.SMUNICIPAL.split(\"-\")[0].replace(/\\s/g, \"\");\n                        // }\n                        // var newState = {\n                        //     regionType: \"municipality-region\", \n                        //     regionName: getMunicipalityRegionName(d.properties),\n                        // }\n                        // var event = new CustomEvent(events.REGION_CHANGE, newState);\n                        // document.dispatchEvent(event);\n                    }\n                })\n            self.getLoadingSpinner()\n                .style(\"display\", \"none\");\n        })\n\n        var redrawChart = function() {\n\n        };\n\n        window.addEventListener(\"resize\", redrawChart, 200);\n    }\n\n    draw(container, props) {\n        this.drawGraph(container, props);\n    }\n\n    componentDidMount() {\n        this.draw(this.getContainer(), this.props)\n    }\n\n    componentDidUpdate() {\n        this.draw(this.getContainer(), this.props)\n    }\n\n    getContainer() {\n        return d3.select(this.refs.vizcontainer)\n    }\n\n    getLoadingSpinner() {\n        return d3.select(this.refs.loading)\n    }\n      \n    render () {\n        return (\n            <div className=\"map-container\">\n                <div>{this.state.regionName}</div>\n                <div className=\"loading-spinner\" ref=\"loading\">\n                    <ReactLoading type={\"spin\"} color={\"#777\"} height={100} width={100} />\n                </div>\n                <div ref=\"vizcontainer\" className=\"map\"></div>\n            </div>\n        )\n    }\n}\n\nexport default Map;\n","import React, { Component } from \"react\";\nimport bootstrapStyles from \"bootstrap/dist/css/bootstrap.min.css\";\nimport styles from \"./mapEmbed.css\";\nimport config from \"../../config\";\n\nfunction className(originClassName) {\n    return bootstrapStyles[originClassName] || styles[originClassName] || originClassName;\n}\n\nclass MapEmbed extends Component {\n    \n    constructor(props) {\n        super(props);\n        this.state = {\n            elementId: \"root\",\n            regionType: \"province\",\n            locationName: \"Western Cape\",\n            numParties: 5\n        }\n    }\n\n    componentDidMount() {\n    }\n\n    componentDidUpdate() {\n    }\n      \n    render () {\n        var DOMAIN = config.DOMAIN;\n        var {\n            elementId\n        } = this.state;\n        return (\n          <div>\n            <h3> Map Embed Script Generation </h3>\n            <div className={className(\"form-group\")}>\n                <label>Element ID </label>\n                <input \n                    type=\"text\" \n                    className={className(\"form-control\")} \n                    placeholder=\"chart-container\"\n                    onChange={e => this.setState({elementId: e.target.value})}\n                    />\n            </div>\n            <div className={className(\"form-group\")}>\n                <label>Embed Code</label>\n                <div className={className(\"embedcode\")}>\n                    <span>{`<script src=\"${DOMAIN}/embed/embed.js\"></script><script>showMap(document.getElementById(\"${elementId}\"));</script>`}</span>\n                </div>\n            </div>\n          </div>\n        )\n    }\n}\n\nexport default MapEmbed;\n\n\n","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport {\n  BarChart,\n  BarChartEmbed,\n  Map,\n  MapEmbed\n} from \"./components\";\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"leftContainer\">\n          <BarChart width=\"600\" height=\"220\" regionName=\"SA\" regionType=\"national\" numParties={3}/>\n          <Map />\n        </div>\n        <div className=\"rightContainer\">\n          <div className=\"barchartEmbed\">\n            <BarChartEmbed />\n          </div>\n          <div className=\"mapEmbed\">\n            <MapEmbed />\n          </div>\n        </div>\n        <div id=\"sales-data\"></div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport \"./Box.css\";\n\nclass Box extends Component {\n    draw() {\n        d3.select(this.refs.box)\n            .append(\"rect\")\n            .attr(\"height\", this.props.height)\n            .attr(\"width\", this.props.width)\n            .classed(this.props.className, true)\n            .classed(\"box\", true)\n    }\n\n    componentDidMount() {\n        this.draw()\n    }\n\n    componentDidUpdate() {\n        this.draw()\n    }\n      \n    render () {\n        return (\n          <svg width={this.props.width} height={this.props.height}>\n            <g ref=\"box\"></g>\n          </svg>\n        )\n    }\n}\n\nexport default Box;\n\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}