(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,n,a){},47:function(e,n,a){},50:function(e,n,a){},52:function(e,n,a){},57:function(e,n,a){e.exports=a(90)},62:function(e,n,a){},64:function(e,n,a){},90:function(e,n,a){"use strict";a.r(n);var t=a(0),i=a.n(t),o=a(19),r=a.n(o),m=(a(62),a(6)),u=a(7),l=a(9),c=a(8),s=a(10),N=(a(64),a(4)),p=a(2),d=a(41),v=a.n(d);function C(e,n,a,t){var i,o=["blue","yellow","red"],r=e.append("svg").attr("width",parseInt(n)+70).attr("height",parseInt(a)+20);i=document.getElementsByClassName("tooltip")[0]?p.i(".tooltip"):p.i("body").append("div").attr("class",t("tooltip")).style("opacity",0);var m=p.g().rangeRound([70,n]),u=p.h().rangeRound([a,20]);r.append("g").attr("transform","translate(20,"+(a/2+10)+")").append("text").attr("class",t("percentage-label")).attr("transform","rotate(-90)").text("PERCENTAGE VOTES").attr("text-anchor","middle"),r.append("g").attr("class","x axis").attr("transform","translate(0,"+a+")"),r.append("g").attr("class","y axis").attr("transform","translate(70, 0)");var l=r.append("g").attr("class",t("bar-container")),c=r.append("g").attr("class",t("bartext-container"));this.draw=function(e,n){var s={};function N(e,n){return s[e.split("/")[0]]||o[n%o.length]}n&&n.data.allParties.edges&&n.data.allParties.edges.forEach(function(e){s[e.node.name]=e.node.colour}),console.log("chartData",e),m.domain(e.map(function(e){return e.name})),u.domain([0,100]),r.select(".x.axis").transition().duration(300).call(p.a(m)),r.select(".y.axis").transition().duration(300).call(p.b(u).ticks(6).tickFormat(function(e){return e+"%"}));var d=l.selectAll(".".concat(t("bar"))).data(e);d.exit().transition().duration(300).attr("y",function(e){return u(0)}).attr("height",0).style("fill-opacity",1e-6).remove(),d.enter().append("rect").attr("class",t("bar")).attr("x",function(e){return m(e.name)+m.bandwidth()/20}).attr("width",9*m.bandwidth()/10).attr("fill",function(e,n){return console.log("partyColor check",s,e.partyInfo.name.split("/")[0]),N(e.partyInfo.name,n)}).on("mousemove",function(e){var n;p.i(this).attr("opacity",.8),i.transition().duration(200).style("opacity",.9),i.html((n=e.partyInfo.name,n.split("/")[0].toLowerCase().replace(/\b\w/g,function(e){return e.toUpperCase()})+" : "+e.percOfVotes+"%")).style("left",p.c.pageX+"px").style("top",p.c.pageY-28+"px")}).on("mouseout",function(e){p.i(this).attr("opacity",1),i.transition().duration(200).style("opacity",0)}).attr("y",function(e){return u(0)}).attr("height",0),l.selectAll(".".concat(t("bar"))).data(e).attr("fill",function(e,n){return N(e.partyInfo.name,n)}).transition().duration(300).attr("y",function(e){return u(Number(e.percOfVotes))}).attr("height",function(e){return a-u(Number(e.percOfVotes))});var v=c.selectAll(".".concat(t("bartext"))).data(e);v.exit().transition().duration(300).attr("y",function(e){return u(0)-5}).style("fill-opacity",1e-6).remove(),v.enter().append("text").attr("class",t("bartext")).attr("x",function(e){return m(e.name)+m.bandwidth()/2}).attr("text-anchor","middle").attr("font-size","12px").attr("y",function(e){return u(0)-5}),c.selectAll(".".concat(t("bartext"))).data(e).text(function(e){return e.percOfVotes+"%"}).transition().duration(300).attr("y",function(e){return u(Number(e.percOfVotes))-5})},this.destroy=function(){r.remove()}}var h="region-change",g="barchart-preview",E="map-preview",y=a(13),b=a(97),f=a(54),M=a(98),w=a(14),K=a.n(w);function W(){var e=Object(y.a)(['\n        {\n          allVotingDistrictBallots( \n          event_Description:"','",\n          location_Ward_Municipality_Name_Icontains:"','") {\n            edges{\n              node{\n                location {\n                  vdNumber\n                }\n                topResult(first:1) {\n                  edges{\n                    node{\n                      party{\n                        name\n                        abbreviation\n                      }\n                    }\n                  }  \n                }\n              }\n            }\n          }\n        }\n        ']);return W=function(){return e},e}function S(){var e=Object(y.a)(['\n      {\n        allMunicipalBallots(\n          event_Description:"','",\n          location_Province_Name:"','"\n        ) {\n          edges{\n            node {\n              topResult(first:1){\n                edges{\n                  node{\n                    party {               \n                      name\n                      abbreviation\n                    }\n                    validVotes\n                    percOfVotes\n                  }\n                }\n                \n              }\n              location {\n                code\n                name\n                longName\n              }\n            }\n          }\n        }\n      }\n      ']);return S=function(){return e},e}function Z(){var e=Object(y.a)(['\n      {\n        allProvincialBallots(\n          event_Description:"','"\n        ){\n          edges{\n            node{\n              topResult(first:1) {\n                edges{\n                  node{\n                    validVotes\n                    percOfVotes\n                    party {\n                      id\n                      name\n                      abbreviation\n                    }\n                  }\n                }\n              }\n              location {\n                id\n                name\n              }\n            }\n          }\n        }\n      }\n      ']);return Z=function(){return e},e}function k(){var e=Object(y.a)(['\n      {\n        allVotingDistrictBallots(\n        event_Description:"','",\n        location_Id:"','", \n        location_Ward_Municipality_Name_Icontains:"','") {\n          edges{\n            node{\n              location {\n                vdNumber\n              }\n              topResult(first:',") {\n                edges{\n                  node{\n                    party{\n                      name\n                    }\n                    percOfVotes\n                  }\n                }  \n              }\n            }\n          }\n        }\n      }\n      "]);return k=function(){return e},e}function P(){var e=Object(y.a)(['\n      {\n        allMunicipalBallots(\n          event_Description:"','",\n          location_Province_Name:"','", \n          location_Code: "','"\n        ) {\n          edges{\n            node {\n              topResult(first:',"){\n                edges{\n                  node{\n                    party {               \n                      name\n                      abbreviation\n                    }\n                    validVotes\n                    percOfVotes\n                  }\n                }\n                \n              }\n              location {\n                code\n                name\n                longName\n              }\n            }\n          }\n        }\n      }\n      "]);return P=function(){return e},e}function L(){var e=Object(y.a)(['\n      {\n        allProvincialBallots(\n          event_Description:"','",\n          location_Name_Icontains:"','"\n        ){\n          edges{\n            node{\n              topResult(first:',") {\n                edges{\n                  node{\n                    validVotes\n                    percOfVotes\n                    party {\n                      id\n                      name\n                      abbreviation\n                    }\n                  }\n                }\n              }\n              location {\n                id\n                name\n              }\n            }\n          }\n        }\n      }\n      "]);return L=function(){return e},e}function T(){var e=Object(y.a)(['\n      {\n        allBallots(\n          event_Description:"','"\n        ){\n          edges{\n            node{\n              topResult(first:',") {\n                edges{\n                  node{\n                    validVotes\n                    percOfVotes\n                    party {\n                      id\n                      name\n                      abbreviation\n                    }\n                  }\n                }\n                \n              }\n              location {\n                id\n                name\n              }\n            }\n          }\n        }\n      }\n      "]);return T=function(){return e},e}function I(){var e=Object(y.a)(["\n    {\n      allParties {\n        edges{\n          node{\n            name\n            colour\n          }\n        }\n      }\n    }\n    "]);return I=function(){return e},e}function O(){var e=Object(y.a)(["\n    {\n      allEvents {\n        description\n      }\n    }\n    "]);return O=function(){return e},e}var B=new b.a({link:new f.a({uri:"https://elections2019.xyz/graphql",useGETForQueries:!0,headers:{"Content-Type":"application/graphql"}}),cache:new M.a});function F(){return B.query({query:K()(I())})}var R,j,G=3e4;function A(e){return v.a[e]||e}var D=0,z=function(e){function n(e){var a;Object(m.a)(this,n),a=Object(l.a)(this,Object(c.a)(n).call(this,e));var t=Object(N.a)(Object(N.a)(a));if(a.state={numParties:5,eventDescription:"2014 National Election",regionType:"national",provinceName:"",muniName:"",muniCode:"",vdNumber:""},e.numParties&&(a.state.numParties=e.numParties),e.regionType&&(a.state.regionType=e.regionType),e.provinceName&&(a.state.provinceName=e.provinceName),e.muniName&&(a.state.muniName=e.muniName),e.muniCode&&(a.state.muniCode=e.muniCode),e.vdNumber&&(a.state.vdNumber=e.vdNumber),e.width&&e.height)a.state.width=e.width,a.state.height=e.height;else{var i=a.getWidthHeightByScreenSize(),o=i.modifW,r=i.modifH;a.state.width=o,a.state.height=r}return D=setInterval(function(){t.draw(t.getContainer(),t.state)},G),a.handleRegionChange=a.handleRegionChange.bind(Object(N.a)(Object(N.a)(a))),a.handlePreviewEvent=a.handlePreviewEvent.bind(Object(N.a)(Object(N.a)(a))),a.redrawChart=a.redrawChart.bind(Object(N.a)(Object(N.a)(a))),a}return Object(s.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){this.draw(this.getContainer(),this.state),document.addEventListener(h,this.handleRegionChange),document.addEventListener(g,this.handlePreviewEvent),window.addEventListener("resize",this.redrawChart,200)}},{key:"componentDidUpdate",value:function(){this.draw(this.getContainer(),this.state)}},{key:"componentWillUnmount",value:function(){document.removeEventListener(h,this.handleRegionChange),document.removeEventListener(g,this.handlePreviewEvent),window.removeEventListener("resize",this.redrawChart),clearInterval(D)}},{key:"getWidthHeightByScreenSize",value:function(){var e=Math.min(810,document.body.clientWidth-350);return document.body.clientWidth<775&&(e=document.body.clientWidth-50),{modifW:e,modifH:e/3.5}}},{key:"redrawChart",value:function(){var e=this.getWidthHeightByScreenSize(),n=e.modifW,a=e.modifH;R&&R.destroy(),R=new C(this.getContainer(),n,a,A),this.setState({width:n,height:a})}},{key:"handleRegionChange",value:function(e){var n=e.detail;console.log("handleRegionChange",n),this.setState(n)}},{key:"handlePreviewEvent",value:function(e){var n=e.detail;console.log("handlePreviewEvent",n),R&&R.destroy(),R=new C(this.getContainer(),this.state.width,this.state.height,A),this.setState(n)}},{key:"getContainer",value:function(){return p.i(this.refs.vizcontainer)}},{key:"getRegionName",value:function(){return"national"==this.state.regionType?"SA":"province"==this.state.regionType?this.state.provinceName:"municipality"==this.state.regionType?this.state.muniName:"municipality-vd"==this.state.regionType?this.state.muniName+"-"+this.state.vdNumber:void 0}},{key:"render",value:function(){return i.a.createElement("div",{className:"barchart"},i.a.createElement("div",{className:A("chart-title")},"RACE FOR VOTES (",this.getRegionName(),"): "),i.a.createElement("div",{ref:"vizcontainer",className:A("chart-body"),style:{width:this.state.width,height:this.state.height}}))}},{key:"draw",value:function(e,n){var a=this,t=[function(e){var n=e.eventDescription;if(n){if("national"==e.regionType)return B.query({query:K()(T(),n,e.numParties)});if("province"==e.regionType)return B.query({query:K()(L(),n,e.provinceName,e.numParties)});if("municipality"==e.regionType){var a=e.muniName.split(" - ")[0];return B.query({query:K()(P(),n,e.provinceName,a,e.numParties)})}return"municipality-vd"==e.regionType?B.query({query:K()(k(),n,e.vdNumber,e.muniCode,e.numParties)}):void 0}}(n)];if(!j){var i=F();t.push(i)}Promise.all(t).then(function(t){var i=t[0];j=j||t[1],a.drawGraph(e,n,i,j)}).catch(function(e){return console.error(e)})}},{key:"drawGraph",value:function(e,n,a,t){var i=function(e,n){var a,t=n.regionType;if(!(a="national"==t?e.data.allBallots.edges[0]:"province"==t?e.data.allProvincialBallots.edges[0]:"municipality"==t?e.data.allMunicipalBallots.edges[0]:e.data.allVotingDistrictBallots.edges[0]))return console.error("party data is empty!!"),null;var i=a.node;return(i.partyResults||i.topResult).edges.map(function(e){var n=e.node;return{name:n.party.abbreviation,validVotes:n.validVotes,percOfVotes:n.percOfVotes,partyInfo:n.party}})}(a,n),o=parseInt(n.width),r=parseInt(n.height);R||(R=new C(e,o,r,A)),R.draw(i,t)}}]),n}(t.Component),V={DOMAIN:"https://sabc-eds.github.io/elections-dataviz"},x=a(22),H=a.n(x),U=a(47),_=a.n(U);function q(e){return H.a[e]||_.a[e]||e}var J,Y=function(e){function n(e){var a;Object(m.a)(this,n),a=Object(l.a)(this,Object(c.a)(n).call(this,e));var t=Object(N.a)(Object(N.a)(a));return a.state={elementId:"root",eventDescription:"2014 National Election",regionType:"province",provinceName:"Western Cape",muniName:"",muniCode:"",vdNumber:"",numParties:5,electionEvents:[]},B.query({query:K()(O())}).then(function(e){var n=e.data.allEvents.map(function(e){return e.description});t.setState({electionEvents:n})}).catch(function(e){return console.error(e)}),a}return Object(s.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"onEventDescriptionChange",value:function(e){this.setState({eventDescription:e.target.value})}},{key:"onRegionTypeChange",value:function(e){var n={regionType:e.target.value};this.setState(n)}},{key:"onPreview",value:function(e){var n=new CustomEvent(g,{detail:this.state});document.dispatchEvent(n)}},{key:"render",value:function(){var e=this,n=V.DOMAIN,a=this.state,t=a.elementId,o=a.eventDescription,r=a.regionType,m=a.provinceName,u=a.muniName,l=a.muniCode,c=a.vdNumber,s=a.numParties,N=a.electionEvents;return i.a.createElement("div",null,i.a.createElement("h3",null," Barchart Embed Script Generation "),i.a.createElement("div",{className:q("form-group")},i.a.createElement("label",null,"Element ID "),i.a.createElement("input",{type:"text",className:q("form-control"),placeholder:"chart-container",onChange:function(n){return e.setState({elementId:n.target.value})}})),i.a.createElement("div",{className:q("form-group")},i.a.createElement("label",null,"Event "),i.a.createElement("select",{className:q("form-control"),value:o,onChange:this.onEventDescriptionChange.bind(this)},N.map(function(e){return i.a.createElement("option",{key:e,value:e},e)}))),i.a.createElement("div",{className:q("form-group")},i.a.createElement("label",null,"Region Type "),i.a.createElement("select",{className:q("form-control"),value:r,onChange:this.onRegionTypeChange.bind(this)},i.a.createElement("option",{value:"national"},"national"),i.a.createElement("option",{value:"province"},"province"),i.a.createElement("option",{value:"municipality"},"municipality"),i.a.createElement("option",{value:"municipality-vd"},"voting district"))),"national"!=r&&i.a.createElement("div",{className:q("form-group")},i.a.createElement("label",null,"Province Name"),i.a.createElement("input",{type:"text",className:q("form-control"),placeholder:"Western Cape",value:m,onChange:function(n){return e.setState({provinceName:n.target.value})},disabled:"national"==r})),"municipality"==r&&i.a.createElement("div",{className:q("form-group")},i.a.createElement("label",null,"Municipality Name"),i.a.createElement("input",{type:"text",className:q("form-control"),placeholder:"City of Cape Town",value:u,onChange:function(n){return e.setState({muniName:n.target.value})},disabled:"national"==r})),"municipality-vd"==r&&i.a.createElement("div",{className:q("form-group")},i.a.createElement("label",null,"Municipality Code"),i.a.createElement("input",{type:"text",className:q("form-control"),placeholder:"CPT",value:l,onChange:function(n){return e.setState({muniCode:n.target.value})},disabled:"national"==r})),"municipality-vd"==r&&i.a.createElement("div",{className:q("form-group")},i.a.createElement("label",null,"Voting District Number"),i.a.createElement("input",{type:"text",className:q("form-control"),placeholder:"97860055",value:c,onChange:function(n){return e.setState({vdNumber:n.target.value})},disabled:"national"==r})),i.a.createElement("div",{className:q("form-group")},i.a.createElement("label",null,"Number Of Parties"),i.a.createElement("input",{type:"number",className:q("form-control"),placeholder:"5",value:s,onChange:function(n){return e.setState({numParties:n.target.value})}})),i.a.createElement("div",{className:q("form-group")},i.a.createElement("button",{type:"button",onClick:this.onPreview.bind(this),className:q("btn")+" "+q("btn-primary")},"Preview")),i.a.createElement("div",{className:q("form-group")},i.a.createElement("label",null,"Embed Code"),i.a.createElement("div",{className:q("embedcode")},i.a.createElement("span",null,'<script src="'.concat(n,'/embed/embed.js"><\/script>\n                    <script>showBarChart(\n                        document.getElementById("').concat(t,'"),\n                        {\n                            eventDescription: "').concat(o,'",\n                            regionType: "').concat(r,'",\n                            provinceName: "').concat(m,'",\n                            muniName: "').concat(u,'",\n                            muniCode: "').concat(l,'",\n                            vdNumber: "').concat(c,'",\n                            numParties: "').concat(s,'",\n                            width: 600,\n                            height: 220\n                        });<\/script>').replace(/(\r\n|\n|\r)/gm,"")))))}}]),n}(t.Component),Q=a(53),X=a(17),$=a(29),ee=a.n($),ne=a(50),ae=a.n(ne),te=a(51),ie=a.n(te),oe="#9c9c9c";function re(e){return ae.a[e]||e}var me=[{name:"Limpopo",abbreviation:"LIM",munis:[{provinceName:"Limpopo",muniName:"LIM331 - Greater Giyani [Giyani]",muniCode:"LIM331"},{provinceName:"Limpopo",muniName:"LIM332 - Greater Letaba [Duiwelskloof]",muniCode:"LIM332"},{provinceName:"Limpopo",muniName:"LIM333 - Greater Tzaneen [Tzaneen]",muniCode:"LIM333"},{provinceName:"Limpopo",muniName:"LIM334 - Ba-Phalaborwa [Phalaborwa]",muniCode:"LIM334"},{provinceName:"Limpopo",muniName:"LIM335 - Maruleng [Hoedspruit]",muniCode:"LIM335"},{provinceName:"Limpopo",muniName:"LIM341 - Musina [Messina]",muniCode:"LIM341"},{provinceName:"Limpopo",muniName:"LIM342 - Mutale [Mutale-Masisi]",muniCode:"LIM342"},{provinceName:"Limpopo",muniName:"LIM343 - Thulamela [Thohoyandou]",muniCode:"LIM343"},{provinceName:"Limpopo",muniName:"LIM344 - Makhado [Louis Trichardt]",muniCode:"LIM344"},{provinceName:"Limpopo",muniName:"LIM351 - Blouberg [Bochum/My Darling]",muniCode:"LIM351"},{provinceName:"Limpopo",muniName:"LIM352 - Aganang [Moletji/Matlala]",muniCode:"LIM352"},{provinceName:"Limpopo",muniName:"LIM353 - Molemole [Dendron/Dikgale]",muniCode:"LIM353"},{provinceName:"Limpopo",muniName:"LIM354 - Polokwane [Pietersburg]",muniCode:"LIM354"},{provinceName:"Limpopo",muniName:"LIM355 - Lepele-Nkumpi [Lebowakgomo]",muniCode:"LIM355"},{provinceName:"Limpopo",muniName:"LIM361 - Thabazimbi [Thabazimbi]",muniCode:"LIM361"},{provinceName:"Limpopo",muniName:"LIM362 - Lephalale [Ellisras]",muniCode:"LIM362"},{provinceName:"Limpopo",muniName:"LIM364 - Mookgopong [Naboomspruit]",muniCode:"LIM364"},{provinceName:"Limpopo",muniName:"LIM365 - Modimolle [Nylstroom]",muniCode:"LIM365"},{provinceName:"Limpopo",muniName:"LIM366 - Bela-Bela [Warmbad]",muniCode:"LIM366"},{provinceName:"Limpopo",muniName:"LIM367 - Mogalakwena [Potgietersrus]",muniCode:"LIM367"},{provinceName:"Limpopo",muniName:"LIM471 - Ephraim Mogale [Marble Hall]",muniCode:"LIM471"},{provinceName:"Limpopo",muniName:"LIM472 - Elias Motsoaledi [Groblersdal]",muniCode:"LIM472"},{provinceName:"Limpopo",muniName:"LIM473 - Makhuduthamaga [Ngwaritsi]",muniCode:"LIM473"},{provinceName:"Limpopo",muniName:"LIM474 - Fetakgomo [Fetakgomo ]",muniCode:"LIM474"},{provinceName:"Limpopo",muniName:"LIM475 - Greater Tubatse [Burgersfort/Ohrigstad/Eastern Tubatse]",muniCode:"LIM475"}]},{name:"Mpumalanga",abbreviation:"MP",munis:[{provinceName:"Mpumalanga",muniName:"MP301 - Albert Luthuli [Elukwatini/Carolina]",muniCode:"MP301"},{provinceName:"Mpumalanga",muniName:"MP302 - Msukaligwa [Ermelo]",muniCode:"MP302"},{provinceName:"Mpumalanga",muniName:"MP303 - Mkhondo [Piet Retief]",muniCode:"MP303"},{provinceName:"Mpumalanga",muniName:"MP304 - Pixley Ka Seme [Volksrust]",muniCode:"MP304"},{provinceName:"Mpumalanga",muniName:"MP305 - Lekwa [Standerton]",muniCode:"MP305"},{provinceName:"Mpumalanga",muniName:"MP306 - Dipaleseng [Balfour]",muniCode:"MP306"},{provinceName:"Mpumalanga",muniName:"MP307 - Govan Mbeki [Highveld Ridge]",muniCode:"MP307"},{provinceName:"Mpumalanga",muniName:"MP311 - Delmas [Delmas]",muniCode:"MP311"},{provinceName:"Mpumalanga",muniName:"MP312 - Emalahleni [Witbank]",muniCode:"MP312"},{provinceName:"Mpumalanga",muniName:"MP313 - Steve Tshwete [Middelburg]",muniCode:"MP313"},{provinceName:"Mpumalanga",muniName:"MP314 - Emakhazeni [Belfast]",muniCode:"MP314"},{provinceName:"Mpumalanga",muniName:"MP315 - Thembisile [KwaMhlanga]",muniCode:"MP315"},{provinceName:"Mpumalanga",muniName:"MP316 - Dr JS Moroka [Mdutjana]",muniCode:"MP316"},{provinceName:"Mpumalanga",muniName:"MP321 - Thaba Chweu [Sabie]",muniCode:"MP321"},{provinceName:"Mpumalanga",muniName:"MP322 - Mbombela [Nelspruit]",muniCode:"MP322"},{provinceName:"Mpumalanga",muniName:"MP323 - Umjindi [Barberton]",muniCode:"MP323"},{provinceName:"Mpumalanga",muniName:"MP324 - Nkomazi [Nkomazi]",muniCode:"MP324"},{provinceName:"Mpumalanga",muniName:"MP325 - Bushbuckridge [Bushbuckridge]",muniCode:"MP325"}]},{name:"Gauteng",abbreviation:"GT",munis:[{provinceName:"Gauteng",muniName:"EKU - Ekurhuleni [East Rand]",muniCode:"EKU"},{provinceName:"Gauteng",muniName:"GT421 - Emfuleni [Vereeniging]",muniCode:"GT421"},{provinceName:"Gauteng",muniName:"GT422 - Midvaal [Meyerton]",muniCode:"GT422"},{provinceName:"Gauteng",muniName:"GT423 - Lesedi [Heidelberg]",muniCode:"GT423"},{provinceName:"Gauteng",muniName:"GT481 - Mogale City [Krugersdorp]",muniCode:"GT481"},{provinceName:"Gauteng",muniName:"GT482 - Randfontein [Randfontein]",muniCode:"GT482"},{provinceName:"Gauteng",muniName:"GT483 - Westonaria [Westonaria]",muniCode:"GT483"},{provinceName:"Gauteng",muniName:"GT484 - Merafong City [Carletonville]",muniCode:"GT484"},{provinceName:"Gauteng",muniName:"JHB - City of Johannesburg [Johannesburg]",muniCode:"JHB"},{provinceName:"Gauteng",muniName:"TSH - Tshwane Metro [Pretoria]",muniCode:"TSH"}]},{name:"KwaZulu-Natal",abbreviation:"KZN",munis:[{provinceName:"KwaZulu-Natal",muniName:"ETH - eThekwini [Durban Metro]",muniCode:"ETH"},{provinceName:"KwaZulu-Natal",muniName:"KZN211 - Vulamehlo [Dududu]",muniCode:"KZN211"},{provinceName:"KwaZulu-Natal",muniName:"KZN212 - Umdoni [Scottburgh]",muniCode:"KZN212"},{provinceName:"KwaZulu-Natal",muniName:"KZN213 - Umzumbe [Umzumbe]",muniCode:"KZN213"},{provinceName:"KwaZulu-Natal",muniName:"KZN214 - UMuziwabantu [Harding]",muniCode:"KZN214"},{provinceName:"KwaZulu-Natal",muniName:"KZN215 - Ezinqoleni [Izinqolweni]",muniCode:"KZN215"},{provinceName:"KwaZulu-Natal",muniName:"KZN216 - Hibiscus Coast [Port Shepstone]",muniCode:"KZN216"},{provinceName:"KwaZulu-Natal",muniName:"KZN221 - uMshwathi [Wartburg]",muniCode:"KZN221"},{provinceName:"KwaZulu-Natal",muniName:"KZN222 - uMngeni [Howick]",muniCode:"KZN222"},{provinceName:"KwaZulu-Natal",muniName:"KZN223 - Mooi Mpofana [Mooirivier]",muniCode:"KZN223"},{provinceName:"KwaZulu-Natal",muniName:"KZN224 - Impendle [Impendle]",muniCode:"KZN224"},{provinceName:"KwaZulu-Natal",muniName:"KZN225 - Msunduzi [Pietermaritzburg]",muniCode:"KZN225"},{provinceName:"KwaZulu-Natal",muniName:"KZN226 - Mkhambathini [Camperdown]",muniCode:"KZN226"},{provinceName:"KwaZulu-Natal",muniName:"KZN227 - Richmond [Richmond]",muniCode:"KZN227"},{provinceName:"KwaZulu-Natal",muniName:"KZN232 - Emnambithi/Ladysmith [Ladysmith]",muniCode:"KZN232"},{provinceName:"KwaZulu-Natal",muniName:"KZN233 - Indaka [Waaihoek]",muniCode:"KZN233"},{provinceName:"KwaZulu-Natal",muniName:"KZN234 - Umtshezi [Estcourt]",muniCode:"KZN234"},{provinceName:"KwaZulu-Natal",muniName:"KZN235 - Okhahlamba [Bergville]",muniCode:"KZN235"},{provinceName:"KwaZulu-Natal",muniName:"KZN236 - Imbabazane [Loskop]",muniCode:"KZN236"},{provinceName:"KwaZulu-Natal",muniName:"KZN241 - Endumeni [Dundee]",muniCode:"KZN241"},{provinceName:"KwaZulu-Natal",muniName:"KZN242 - Nqutu [Nqutu]",muniCode:"KZN242"},{provinceName:"KwaZulu-Natal",muniName:"KZN244 - Msinga [Pomeroy]",muniCode:"KZN244"},{provinceName:"KwaZulu-Natal",muniName:"KZN245 - Umvoti [Greytown]",muniCode:"KZN245"},{provinceName:"KwaZulu-Natal",muniName:"KZN252 - Newcastle [Newcastle]",muniCode:"KZN252"},{provinceName:"KwaZulu-Natal",muniName:"KZN253 - eMadlangeni [Utrecht]",muniCode:"KZN253"},{provinceName:"KwaZulu-Natal",muniName:"KZN254 - Dannhauser [Durnacol]",muniCode:"KZN254"},{provinceName:"KwaZulu-Natal",muniName:"KZN261 - eDumbe [Paulpietersburg]",muniCode:"KZN261"},{provinceName:"KwaZulu-Natal",muniName:"KZN262 - UPhongolo [Pongola]",muniCode:"KZN262"},{provinceName:"KwaZulu-Natal",muniName:"KZN263 - Abaqulusi [Vryheid]",muniCode:"KZN263"},{provinceName:"KwaZulu-Natal",muniName:"KZN265 - Nongoma [Nongoma]",muniCode:"KZN265"},{provinceName:"KwaZulu-Natal",muniName:"KZN266 - Ulundi [Ulundi]",muniCode:"KZN266"},{provinceName:"KwaZulu-Natal",muniName:"KZN271 - Umhlabuyalingana [Emangusi]",muniCode:"KZN271"},{provinceName:"KwaZulu-Natal",muniName:"KZN272 - Jozini [Mkuze]",muniCode:"KZN272"},{provinceName:"KwaZulu-Natal",muniName:"KZN273 - The Big 5 False Bay [Hluhluwe]",muniCode:"KZN273"},{provinceName:"KwaZulu-Natal",muniName:"KZN274 - Hlabisa [Somkele]",muniCode:"KZN274"},{provinceName:"KwaZulu-Natal",muniName:"KZN275 - Mtubatuba [Mtubatuba]",muniCode:"KZN275"},{provinceName:"KwaZulu-Natal",muniName:"KZN281 - Mfolozi [KwaMbonambi]",muniCode:"KZN281"},{provinceName:"KwaZulu-Natal",muniName:"KZN282 - uMhlathuze [Richards Bay]",muniCode:"KZN282"},{provinceName:"KwaZulu-Natal",muniName:"KZN283 - Ntambana [Ntambana]",muniCode:"KZN283"},{provinceName:"KwaZulu-Natal",muniName:"KZN284 - uMlalazi [Eshowe]",muniCode:"KZN284"},{provinceName:"KwaZulu-Natal",muniName:"KZN285 - Mthonjaneni [Melmoth]",muniCode:"KZN285"},{provinceName:"KwaZulu-Natal",muniName:"KZN286 - Nkandla [Nkandla]",muniCode:"KZN286"},{provinceName:"KwaZulu-Natal",muniName:"KZN291 - Mandeni [Mandeni]",muniCode:"KZN291"},{provinceName:"KwaZulu-Natal",muniName:"KZN292 - KwaDukuza [Stanger]",muniCode:"KZN292"},{provinceName:"KwaZulu-Natal",muniName:"KZN293 - Ndwedwe [Ndwedwe]",muniCode:"KZN293"},{provinceName:"KwaZulu-Natal",muniName:"KZN294 - Maphumulo [Maphumulo]",muniCode:"KZN294"},{provinceName:"KwaZulu-Natal",muniName:"KZN431 - Ingwe [Creighton]",muniCode:"KZN431"},{provinceName:"KwaZulu-Natal",muniName:"KZN432 - Kwa Sani [Underberg]",muniCode:"KZN432"},{provinceName:"KwaZulu-Natal",muniName:"KZN433 - Greater Kokstad [Kokstad]",muniCode:"KZN433"},{provinceName:"KwaZulu-Natal",muniName:"KZN434 - Ubuhlebezwe [Ixopo]",muniCode:"KZN434"},{provinceName:"KwaZulu-Natal",muniName:"KZN435 - Umzimkhulu [Umzimkulu]",muniCode:"KZN435"}]},{name:"North West",abbreviation:"NW",munis:[{provinceName:"North West",muniName:"NW371 - Moretele [Makapanstad]",muniCode:"NW371"},{provinceName:"North West",muniName:"NW372 - Madibeng [Brits]",muniCode:"NW372"},{provinceName:"North West",muniName:"NW373 - Rustenburg [Rustenburg]",muniCode:"NW373"},{provinceName:"North West",muniName:"NW374 - Kgetlengrivier [Koster]",muniCode:"NW374"},{provinceName:"North West",muniName:"NW375 - Moses Kotane [Mogwase]",muniCode:"NW375"},{provinceName:"North West",muniName:"NW381 - Ratlou [Setlagole]",muniCode:"NW381"},{provinceName:"North West",muniName:"NW382 - Tswaing [Delareyville]",muniCode:"NW382"},{provinceName:"North West",muniName:"NW383 - Mafikeng [Mafikeng]",muniCode:"NW383"},{provinceName:"North West",muniName:"NW384 - Ditsobotla [Lichtenburg]",muniCode:"NW384"},{provinceName:"North West",muniName:"NW385 - Ramotshere Moiloa [Zeerust]",muniCode:"NW385"},{provinceName:"North West",muniName:"NW392 - Naledi [Vryburg]",muniCode:"NW392"},{provinceName:"North West",muniName:"NW393 - Mamusa [Schweizer-Reneke]",muniCode:"NW393"},{provinceName:"North West",muniName:"NW394 - Greater Taung [Reivilo]",muniCode:"NW394"},{provinceName:"North West",muniName:"NW396 - Lekwa-Teemane [Christiana]",muniCode:"NW396"},{provinceName:"North West",muniName:"NW397 - NW397 Local Municipality [Ganyesa/Pomfret]",muniCode:"NW397"},{provinceName:"North West",muniName:"NW401 - Ventersdorp [Ventersdorp]",muniCode:"NW401"},{provinceName:"North West",muniName:"NW402 - Tlokwe [Potchefstroom]",muniCode:"NW402"},{provinceName:"North West",muniName:"NW403 - Matlosana [Klerksdorp]",muniCode:"NW403"},{provinceName:"North West",muniName:"NW404 - Maquassi Hills [Wolmaransstad]",muniCode:"NW404"}]},{name:"Free State",abbreviation:"FS",munis:[{provinceName:"Free State",muniName:"FS161 - Letsemeng [Koffiefontein]",muniCode:"FS161"},{provinceName:"Free State",muniName:"FS162 - Kopanong [Trompsburg]",muniCode:"FS162"},{provinceName:"Free State",muniName:"FS163 - Mohokare [Zastron]",muniCode:"FS163"},{provinceName:"Free State",muniName:"FS164 - Naledi [Dewetsdorp]",muniCode:"FS164"},{provinceName:"Free State",muniName:"FS181 - Masilonyana [Theunissen]",muniCode:"FS181"},{provinceName:"Free State",muniName:"FS182 - Tokologo [Dealesville]",muniCode:"FS182"},{provinceName:"Free State",muniName:"FS183 - Tswelopele [Hoopstad]",muniCode:"FS183"},{provinceName:"Free State",muniName:"FS184 - Matjhabeng [Welkom]",muniCode:"FS184"},{provinceName:"Free State",muniName:"FS185 - Nala [Bothaville]",muniCode:"FS185"},{provinceName:"Free State",muniName:"FS191 - Setsoto [Senekal]",muniCode:"FS191"},{provinceName:"Free State",muniName:"FS192 - Dihlabeng [Bethlehem]",muniCode:"FS192"},{provinceName:"Free State",muniName:"FS193 - Nketoana [Reitz]",muniCode:"FS193"},{provinceName:"Free State",muniName:"FS194 - Maluti a Phofung [Qwa-Qwa]",muniCode:"FS194"},{provinceName:"Free State",muniName:"FS195 - Phumelela [Vrede]",muniCode:"FS195"},{provinceName:"Free State",muniName:"FS196 - Mantsopa [Ladybrand]",muniCode:"FS196"},{provinceName:"Free State",muniName:"FS201 - Moqhaka [Kroonstad]",muniCode:"FS201"},{provinceName:"Free State",muniName:"FS203 - Ngwathe [Parys]",muniCode:"FS203"},{provinceName:"Free State",muniName:"FS204 - Metsimaholo [Sasolburg]",muniCode:"FS204"},{provinceName:"Free State",muniName:"FS205 - Mafube [Frankfort]",muniCode:"FS205"},{provinceName:"Free State",muniName:"MAN - Mangaung [Bloemfontein]",muniCode:"MAN"}]},{name:"Eastern Cape",abbreviation:"EC",munis:[{provinceName:"Eastern Cape",muniName:"BUF - Buffalo City [East London]",muniCode:"BUF"},{provinceName:"Eastern Cape",muniName:"EC101 - Camdeboo [Graaff-Reinet]",muniCode:"EC101"},{provinceName:"Eastern Cape",muniName:"EC102 - Blue Crane Route [Somerset East]",muniCode:"EC102"},{provinceName:"Eastern Cape",muniName:"EC103 - Ikwezi [Jansenville]",muniCode:"EC103"},{provinceName:"Eastern Cape",muniName:"EC104 - Makana [Grahamstown]",muniCode:"EC104"},{provinceName:"Eastern Cape",muniName:"EC105 - Ndlambe [Port Alfred]",muniCode:"EC105"},{provinceName:"Eastern Cape",muniName:"EC106 - Sundays River Valley [Kirkwood]",muniCode:"EC106"},{provinceName:"Eastern Cape",muniName:"EC107 - Baviaans [Willowmore]",muniCode:"EC107"},{provinceName:"Eastern Cape",muniName:"EC108 - Kouga [Humansdorp]",muniCode:"EC108"},{provinceName:"Eastern Cape",muniName:"EC109 - Kou-Kamma [Kareedouw]",muniCode:"EC109"},{provinceName:"Eastern Cape",muniName:"EC121 - Mbhashe [Idutywa]",muniCode:"EC121"},{provinceName:"Eastern Cape",muniName:"EC122 - Mnquma [Butterworth]",muniCode:"EC122"},{provinceName:"Eastern Cape",muniName:"EC123 - Great Kei [Komga]",muniCode:"EC123"},{provinceName:"Eastern Cape",muniName:"EC124 - Amahlathi [Stutterheim]",muniCode:"EC124"},{provinceName:"Eastern Cape",muniName:"EC126 - Ngqushwa [Peddie]",muniCode:"EC126"},{provinceName:"Eastern Cape",muniName:"EC127 - Nkonkobe [Alice]",muniCode:"EC127"},{provinceName:"Eastern Cape",muniName:"EC128 - Nxuba [Adelaide]",muniCode:"EC128"},{provinceName:"Eastern Cape",muniName:"EC131 - Inxuba Yethemba [Cradock]",muniCode:"EC131"},{provinceName:"Eastern Cape",muniName:"EC132 - Tsolwana [Tarkastad]",muniCode:"EC132"},{provinceName:"Eastern Cape",muniName:"EC133 - Inkwanca [Molteno]",muniCode:"EC133"},{provinceName:"Eastern Cape",muniName:"EC134 - Lukhanji [Queenstown]",muniCode:"EC134"},{provinceName:"Eastern Cape",muniName:"EC135 - Intsika Yethu [Cofimvaba]",muniCode:"EC135"},{provinceName:"Eastern Cape",muniName:"EC136 - Emalahleni [Lady Frere]",muniCode:"EC136"},{provinceName:"Eastern Cape",muniName:"EC137 - Engcobo [Engcobo]",muniCode:"EC137"},{provinceName:"Eastern Cape",muniName:"EC138 - Sakhisizwe [Elliot]",muniCode:"EC138"},{provinceName:"Eastern Cape",muniName:"EC141 - Elundini [Mount Fletcher]",muniCode:"EC141"},{provinceName:"Eastern Cape",muniName:"EC142 - Senqu [Lady Grey]",muniCode:"EC142"},{provinceName:"Eastern Cape",muniName:"EC143 - Maletswai [Aliwal North]",muniCode:"EC143"},{provinceName:"Eastern Cape",muniName:"EC144 - Gariep [Burgersdorp]",muniCode:"EC144"},{provinceName:"Eastern Cape",muniName:"EC153 - Ngquza Hill [Flagstaff]",muniCode:"EC153"},{provinceName:"Eastern Cape",muniName:"EC154 - Port St Johns [Port St Johns]",muniCode:"EC154"},{provinceName:"Eastern Cape",muniName:"EC155 - Nyandeni [Libode]",muniCode:"EC155"},{provinceName:"Eastern Cape",muniName:"EC156 - Mhlontlo [Qumbu]",muniCode:"EC156"},{provinceName:"Eastern Cape",muniName:"EC157 - King Sabata Dalindyebo [Umtata]",muniCode:"EC157"},{provinceName:"Eastern Cape",muniName:"EC441 - Matatiele [Matatiele]",muniCode:"EC441"},{provinceName:"Eastern Cape",muniName:"EC442 - Umzimvubu [Mount Ayliff]",muniCode:"EC442"},{provinceName:"Eastern Cape",muniName:"EC443 - Mbizana [Bizana]",muniCode:"EC443"},{provinceName:"Eastern Cape",muniName:"EC444 - Ntabankulu [Ntabankulu]",muniCode:"EC444"},{provinceName:"Eastern Cape",muniName:"NMA - Nelson Mandela Bay [Port Elizabeth]",muniCode:"NMA"}]},{name:"Northern Cape",abbreviation:"NC",munis:[{provinceName:"Northern Cape",muniName:"NC061 - RICHTERSVELD [Port Nolloth]",muniCode:"NC061"},{provinceName:"Northern Cape",muniName:"NC062 - NAMA KHOI [Springbok]",muniCode:"NC062"},{provinceName:"Northern Cape",muniName:"NC064 - KAMIESBERG [Garies]",muniCode:"NC064"},{provinceName:"Northern Cape",muniName:"NC065 - HANTAM [Calvinia]",muniCode:"NC065"},{provinceName:"Northern Cape",muniName:"NC066 - KAROO HOOGLAND [Fraserburg]",muniCode:"NC066"},{provinceName:"Northern Cape",muniName:"NC067 - KH\x83I-MA [Pofadder]",muniCode:"NC067"},{provinceName:"Northern Cape",muniName:"NC071 - UBUNTU [Victoria West]",muniCode:"NC071"},{provinceName:"Northern Cape",muniName:"NC072 - UMSOBOMVU [Colesberg]",muniCode:"NC072"},{provinceName:"Northern Cape",muniName:"NC073 - EMTHANJENI [De Aar]",muniCode:"NC073"},{provinceName:"Northern Cape",muniName:"NC074 - KAREEBERG [Carnarvon]",muniCode:"NC074"},{provinceName:"Northern Cape",muniName:"NC075 - RENOSTERBERG [Phillipstown]",muniCode:"NC075"},{provinceName:"Northern Cape",muniName:"NC076 - THEMBELIHLE [Hopetown]",muniCode:"NC076"},{provinceName:"Northern Cape",muniName:"NC077 - SIYATHEMBA [Prieska]",muniCode:"NC077"},{provinceName:"Northern Cape",muniName:"NC078 - SIYANCUMA [Griekwastad]",muniCode:"NC078"},{provinceName:"Northern Cape",muniName:"NC081 - MIER [Mier]",muniCode:"NC081"},{provinceName:"Northern Cape",muniName:"NC082 - KAI !GARIB [Keimoes]",muniCode:"NC082"},{provinceName:"Northern Cape",muniName:"NC083 - KHARA HAIS [Upington]",muniCode:"NC083"},{provinceName:"Northern Cape",muniName:"NC084 - !KHEIS [Groblershoop]",muniCode:"NC084"},{provinceName:"Northern Cape",muniName:"NC085 - TSANTSABANE [Postmasburg]",muniCode:"NC085"},{provinceName:"Northern Cape",muniName:"NC086 - KGATELOPELE [Danielskuil]",muniCode:"NC086"},{provinceName:"Northern Cape",muniName:"NC091 - Sol Plaatje [Kimberley]",muniCode:"NC091"},{provinceName:"Northern Cape",muniName:"NC092 - Dikgatlong [Barkley West]",muniCode:"NC092"},{provinceName:"Northern Cape",muniName:"NC093 - Magareng [Warrenton]",muniCode:"NC093"},{provinceName:"Northern Cape",muniName:"NC094 - Phokwane [Hartswater]",muniCode:"NC094"},{provinceName:"Northern Cape",muniName:"NC451 - Joe Morolong [Kgalagadi]",muniCode:"NC451"},{provinceName:"Northern Cape",muniName:"NC452 - GA-SEGONYANA [Kuruman]",muniCode:"NC452"},{provinceName:"Northern Cape",muniName:"NC453 - GAMAGARA [Kathu]",muniCode:"NC453"}]},{name:"Western Cape",abbreviation:"WC",munis:[{provinceName:"Western Cape",muniName:"CPT - City of Cape Town [Cape Town]",muniCode:"CPT"},{provinceName:"Western Cape",muniName:"WC011 - Matzikama [Vredendal]",muniCode:"WC011"},{provinceName:"Western Cape",muniName:"WC012 - Cederberg [Citrusdal]",muniCode:"WC012"},{provinceName:"Western Cape",muniName:"WC013 - Bergrivier [Velddrif]",muniCode:"WC013"},{provinceName:"Western Cape",muniName:"WC014 - Saldanha Bay [West Coast Peninsula]",muniCode:"WC014"},{provinceName:"Western Cape",muniName:"WC015 - Swartland [Malmesbury]",muniCode:"WC015"},{provinceName:"Western Cape",muniName:"WC022 - Witzenberg [Ceres]",muniCode:"WC022"},{provinceName:"Western Cape",muniName:"WC023 - Drakenstein [Paarl]",muniCode:"WC023"},{provinceName:"Western Cape",muniName:"WC024 - Stellenbosch [Stellenbosch]",muniCode:"WC024"},{provinceName:"Western Cape",muniName:"WC025 - Breede Valley [Worcester]",muniCode:"WC025"},{provinceName:"Western Cape",muniName:"WC026 - Langeberg [Robertson]",muniCode:"WC026"},{provinceName:"Western Cape",muniName:"WC031 - Theewaterskloof [Caledon]",muniCode:"WC031"},{provinceName:"Western Cape",muniName:"WC032 - Overstrand [Greater Hermanus]",muniCode:"WC032"},{provinceName:"Western Cape",muniName:"WC033 - Cape Agulhas [Bredasdorp]",muniCode:"WC033"},{provinceName:"Western Cape",muniName:"WC034 - Swellendam [Barrydale/Swellendam ]",muniCode:"WC034"},{provinceName:"Western Cape",muniName:"WC041 - Kannaland [Ladismith]",muniCode:"WC041"},{provinceName:"Western Cape",muniName:"WC042 - Hessequa [Heidelberg/Riversdale]",muniCode:"WC042"},{provinceName:"Western Cape",muniName:"WC043 - Mossel Bay [Mossel Bay]",muniCode:"WC043"},{provinceName:"Western Cape",muniName:"WC044 - George [George]",muniCode:"WC044"},{provinceName:"Western Cape",muniName:"WC045 - Oudtshoorn [Oudtshoorn]",muniCode:"WC045"},{provinceName:"Western Cape",muniName:"WC047 - Bitou [Greater Plettenberg Bay]",muniCode:"WC047"},{provinceName:"Western Cape",muniName:"WC048 - Knysna [Knysna]",muniCode:"WC048"},{provinceName:"Western Cape",muniName:"WC051 - Laingsburg [Laingsburg]",muniCode:"WC051"},{provinceName:"Western Cape",muniName:"WC052 - Prince Albert [Prins Albert]",muniCode:"WC052"},{provinceName:"Western Cape",muniName:"WC053 - Beaufort West [Beaufort West]",muniCode:"WC053"}]}],ue=function(e){function n(e){var a;return Object(m.a)(this,n),(a=Object(l.a)(this,Object(c.a)(n).call(this,e))).state={disableNavigation:!1,eventDescription:"2014 National Election",regionType:"national",provinceName:"",muniName:"",muniCode:"",vdNumber:""},e.regionType&&(a.state.regionType=e.regionType),e.provinceName&&(a.state.provinceName=e.provinceName),e.muniName&&(a.state.muniName=e.muniName),e.disableNavigation&&(a.state.disableNavigation=e.disableNavigation),a.handlePreviewEvent=a.handlePreviewEvent.bind(Object(N.a)(Object(N.a)(a))),a}return Object(s.a)(n,e),Object(u.a)(n,[{key:"draw",value:function(e,n){this.drawGraph(e,n)}},{key:"componentDidMount",value:function(){this.draw(this.getContainer(),this.state),document.addEventListener(E,this.handlePreviewEvent)}},{key:"componentWillUnmount",value:function(){document.removeEventListener(E,this.handlePreviewEvent)}},{key:"componentDidUpdate",value:function(){this.draw(this.getContainer(),this.state)}},{key:"handlePreviewEvent",value:function(e){var n=e.detail;this.setState(n)}},{key:"handleNavBarSelection",value:function(e,n){var a;if("national"==e){if(a={regionType:e},this.state.regionType==a.regionType)return}else if("province"==e){if(a={regionType:e,provinceName:n.name},this.state.regionType==a.regionType&&this.state.provinceName==a.provinceName)return}else if("municipality"==e&&(a={regionType:e,provinceName:n.provinceName,muniName:n.muniName,muniCode:n.muniCode},this.state.regionType==a.regionType&&this.state.provinceName==a.provinceName&&this.state.newState==a.muniName))return;var t=new CustomEvent(h,{detail:a});document.dispatchEvent(t),this.setState(a)}},{key:"getRegionName",value:function(){return"national"==this.state.regionType?"SA":"province"==this.state.regionType?this.state.provinceName:"municipality"==this.state.regionType?this.state.muniName:"municipality-vd"==this.state.regionType?this.state.muniName+"-"+this.state.vdNumber:void 0}},{key:"getContainer",value:function(){return p.i(this.refs.vizcontainer)}},{key:"getLoadingSpinner",value:function(){return p.i(this.refs.loading)}},{key:"render",value:function(){var e=this,n=this.state.disableNavigation;return i.a.createElement("div",{className:"map-container"},!n&&i.a.createElement("div",{className:re("map-navbar")},i.a.createElement(X.SideNav,{defaultSelectedPath:"1",theme:{selectionColor:"#C51162"},onItemSelection:this.onItemSelection,className:re("map-navbar")},i.a.createElement(X.Nav,{id:"navbar-national",onClick:this.handleNavBarSelection.bind(this,"national")},"National"),me.map(function(n){return i.a.createElement(X.Nav,{key:n.abbreviation,id:"navbar-province-"+n.abbreviation,onClick:e.handleNavBarSelection.bind(e,"province",n)},n.name,n.munis.map(function(n){return i.a.createElement(X.Nav,{key:n.muniCode,id:"navbar-muni-"+n.muniCode,onClick:e.handleNavBarSelection.bind(e,"municipality",n)},n.muniName.split("-")[1].split("[")[0])}))}))),this.getRegionName(),i.a.createElement("div",{className:"loading-spinner",ref:"loading"},i.a.createElement(ie.a,{type:"spin",color:"#777",height:100,width:100})),i.a.createElement("div",{ref:"vizcontainer",className:"map"}))}},{key:"drawGraph",value:function(e,n){var a=this,t="province_lo-res.geojson";var i,o=V.DOMAIN+"/mapdata/"+function(){switch(a.state.regionType){case"national":return t;case"province":return{Limpopo:"lim_lo-res.geojson",Mpumalanga:"mp_lo-res.geojson",Gauteng:"gt_lo-res.geojson","KwaZulu-Natal":"kzn_lo-res.geojson","North West":"nw_lo-res.geojson","Free State":"fs_lo-res.geojson","Eastern Cape":"ec_lo-res.geojson","Northern Cape":"nc_lo-res.geojson","Western Cape":"wc_lo-res.geojson"}[a.state.provinceName];case"municipality":return a.state.muniCode+".topojson";default:return null}}();a.getLoadingSpinner().style("display","block").transition().duration(200).style("opacity",1),i=document.getElementsByClassName("tooltip")[0]?p.i(".tooltip"):p.i("body").append("div").attr("class",re("tooltip")).style("opacity",0),console.log("process.env",Object({NODE_ENV:"production",PUBLIC_URL:"."})),console.log("fullRouteGeoJsonFile",o);e.selectAll("svg").remove();var r=e.append("svg").attr("preserveAspectRatio","xMinYMin meet").style("background-color","#ffffff").attr("viewBox","0 0 900 800").classed("svg-content",!0),m=p.f(o),u=function(e){var n=e.eventDescription;if(n){if("national"==e.regionType)return B.query({query:K()(Z(),n)});if("province"==e.regionType)return B.query({query:K()(S(),n,e.provinceName)});if("municipality"==e.regionType){console.log("municipality",e);var a=e.muniName.split(" - ")[1];return B.query({query:K()(W(),n,a)})}}}(n);console.log("getMainParties",n);var l=[m,u];if(!J){var c=F();l.push(c)}Promise.all(l).then(function(e){console.log("dataLoaders values",e);var t=e[0],m=function(e,n){if(!e)return null;var a={},t=n.regionType;return console.log("parseMainPartyData",t,e),"national"===t?e.data.allProvincialBallots.edges.forEach(function(e){var n=e.node,t=n.location.name,i=n.topResult.edges[0].node.party.name;a[t]=i}):"province"===t?e.data.allMunicipalBallots.edges.forEach(function(e){var n=e.node,t=n.location.code,i=n.topResult.edges[0].node.party.name;a[t]=i}):e.data.allVotingDistrictBallots.edges.forEach(function(e){var n=e.node,t=n.location.vdNumber,i=n.topResult.edges[0].node.party.name;a[t]=i}),a}(e[1],n);J=J||e[2],console.log("locationToMainParty",m);var u,l={};J&&J.data.allParties.edges&&J.data.allParties.edges.forEach(function(e){l[e.node.name]=e.node.colour}),console.log("partyColorByName",l),-1!==o.indexOf(".topojson")&&(t=Q.a(t,t.objects[a.state.muniCode])),u=t.features;var c=p.d().fitSize([900,800],t),s=p.e().projection(c);if(r.selectAll(".".concat(re("region"))).data(u).enter().append("path").attr("class",re("region")).attr("stroke","#eeeeee").attr("fill",function(e,n){var t,i,o=a.state.regionType;if("national"===o){var r=e.properties.SPROVINCE;t=m[r]}else if("province"===o){var u=(i=e.properties).code||i.smunicipal.split("-")[0].replace(/\s/g,"");t=m[u]}else{var c=function(e){return e.PKLVDNUMBE}(e.properties);console.log("getFillColorFromPartyName",c),t=m[c]}return function(e){return e?(console.log("getFillColorFromPartyName",e,l[e.split("/")[0]]),l[e.split("/")[0]]||oe):oe}(t)}).attr("id",function(e,n){return"region-".concat(n)}).attr("d",s),"municipality"!==a.state.regionType&&r.selectAll(".place-label").data(u).enter().append("text").attr("class","place-label").attr("font-size","12px").attr("transform",function(e){var n,a;return"Polygon"===e.geometry.type?(n=ee()(e.geometry.coordinates),(a=c(n))[1]-=12,"translate("+a+")"):(n=ee()(e.geometry.coordinates[0]),(a=c(n))[1]-=5,"translate("+a+")")}).attr("dy",".35em").style("text-anchor","middle").text(function(e){return"national"===a.state.regionType?e.properties.SPROVINCE:"province"===a.state.regionType?e.properties.smunicipal.split("-")[1].split("[")[0]:e.properties.SMUNICIPAL.split("-")[1].split("[")[0]}),"municipality"!==a.state.regionType){var N,d=document.getElementsByClassName("place-label"),v={},C={};for(N=0;N<u.length;N++)v[N]=d[N].getBoundingClientRect();for(N=0;N<u.length;N++){for(var g=0;g<N;g++){var E=v[N],y=v[g];!(E.right<y.left||E.left>y.right||E.bottom<y.top||E.top>y.bottom)&&(C[N]=C[N]?C[N]+1:1)}C[N]>2?d[N].setAttribute("opacity",0):C[N]>0&&(d[N].innerHTML=d[N].innerHTML.slice(0,3)+"...")}}r.selectAll(".eventLayer").data(u).enter().append("path").attr("d",s).attr("class","eventLayer").attr("id",function(e,n){return"eventLayer-".concat(n)}).attr("fill","transparent").on("mouseover",function(e,n){p.i("#region-".concat(n)).attr("stroke-width",3).style("fill-opacity",.8)}).on("mousemove",function(e){"municipality"!==a.state.regionType&&(i.transition().duration(200).style("opacity",1),i.html("national"===a.state.regionType?e.properties.SPROVINCE:"province"===a.state.regionType?e.properties.smunicipal.split("-")[1].split("[")[0]:e.properties.SMUNICIPAL.split("-")[1].split("[")[0]).style("left",p.c.pageX+"px").style("top",p.c.pageY-28+"px"))}).on("mouseout",function(e,n){p.i("#region-".concat(n)).attr("stroke-width",1).style("fill-opacity",1),"municipality"!==a.state.regionType&&i.transition().duration(200).style("opacity",0)}).on("click",function(e,n){if(!a.state.disableNavigation){console.log("click event",n,e.properties),i.transition().duration(200).style("opacity",0);var t,o=a.state.regionType;if("national"===o)r={regionType:"province",provinceName:e.properties.SPROVINCE},m=new CustomEvent(h,{detail:r}),document.dispatchEvent(m),a.setState(r);else if("province"===o){r={regionType:"municipality",provinceName:a.state.provinceName,muniName:e.properties.smunicipal,muniCode:(t=e.properties,t.code||t.smunicipal.split("-")[0].replace(/\s/g,""))},m=new CustomEvent(h,{detail:r}),document.dispatchEvent(m),a.setState(r)}else{var r={regionType:"municipality-vd",provinceName:a.state.provinceName,muniName:a.state.muniName,muniCode:a.state.muniCode,vdNumber:function(e){return e.PKLVDNUMBE}(e.properties)},m=new CustomEvent(h,{detail:r});document.dispatchEvent(m)}}}),a.getLoadingSpinner().style("display","none")});window.addEventListener("resize",function(){},200)}}]),n}(t.Component),le=a(52),ce=a.n(le);function se(e){return H.a[e]||ce.a[e]||e}var Ne=function(e){function n(e){var a;return Object(m.a)(this,n),(a=Object(l.a)(this,Object(c.a)(n).call(this,e))).state={elementId:"root",disableNavigation:!1,regionType:"province",provinceName:"Western Cape",muniName:""},a}return Object(s.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"onRegionTypeChange",value:function(e){var n={regionType:e.target.value};this.setState(n)}},{key:"onPreview",value:function(e){var n=new CustomEvent(E,{detail:this.state});document.dispatchEvent(n)}},{key:"render",value:function(){var e=this,n=V.DOMAIN,a=this.state,t=a.elementId,o=a.disableNavigation,r=a.regionType,m=a.provinceName,u=a.muniName;return i.a.createElement("div",null,i.a.createElement("h3",null," Map Embed Script Generation "),i.a.createElement("div",{className:se("form-group")},i.a.createElement("label",null,"Element ID "),i.a.createElement("input",{type:"text",className:se("form-control"),placeholder:"chart-container",onChange:function(n){return e.setState({elementId:n.target.value})}})),i.a.createElement("div",{className:se("form-group")},i.a.createElement("label",null,"Region Type "),i.a.createElement("select",{className:se("form-control"),value:r,onChange:this.onRegionTypeChange.bind(this)},i.a.createElement("option",{value:"national"},"national"),i.a.createElement("option",{value:"province"},"province"),i.a.createElement("option",{value:"municipality"},"municipality"))),"national"!=r&&i.a.createElement("div",{className:se("form-group")},i.a.createElement("label",null,"Province Name"),i.a.createElement("input",{type:"text",className:se("form-control"),placeholder:"Western Cape",value:m,onChange:function(n){return e.setState({provinceName:n.target.value})}})),"municipality"==r&&i.a.createElement("div",{className:se("form-group")},i.a.createElement("label",null,"Municipality Name"),i.a.createElement("input",{type:"text",className:se("form-control"),placeholder:"City of Cape Town",value:u,onChange:function(n){return e.setState({muniName:n.target.value})}})),i.a.createElement("div",{className:se("form-check")},i.a.createElement("label",{className:se("form-check-label")},i.a.createElement("input",{type:"checkbox",className:se("form-check-input"),value:o,onChange:function(n){return e.setState({disableNavigation:n.target.checked})}}),"\xa0\xa0Disable Navigation")),i.a.createElement("div",{className:se("form-group")},i.a.createElement("button",{type:"button",onClick:this.onPreview.bind(this),className:se("btn")+" "+se("btn-primary")},"Preview")),i.a.createElement("div",{className:se("form-group")},i.a.createElement("label",null,"Embed Code"),i.a.createElement("div",{className:se("embedcode")},i.a.createElement("span",null,'<script src="'.concat(n,'/embed/embed.js"><\/script>\n                    <script>\n                        showMap(document.getElementById("').concat(t,'"),{\n                            disableNavigation: ').concat(o,',\n                            regionType: "').concat(r,'",\n                            provinceName: "').concat(m,'",\n                            muniName: "').concat(u,'",\n                        });<\/script>').replace(/(\r\n|\n|\r)/gm,"")))))}}]),n}(t.Component),pe=function(e){function n(){return Object(m.a)(this,n),Object(l.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(s.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"leftContainer"},i.a.createElement(z,{regionName:"SA",regionType:"national",numParties:3}),i.a.createElement(ue,{regionType:"province",provinceName:"Western Cape"})),i.a.createElement("div",{className:"rightContainer"},i.a.createElement("div",{className:"barchartEmbed"},i.a.createElement(Y,null)),i.a.createElement("div",{className:"mapEmbed"},i.a.createElement(Ne,null))),i.a.createElement("div",{id:"sales-data"}))}}]),n}(t.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[57,2,1]]]);
//# sourceMappingURL=main.8348f24f.chunk.js.map