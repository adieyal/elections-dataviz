(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,a,n){},47:function(e,a,n){},50:function(e,a,n){},52:function(e,a,n){},57:function(e,a,n){e.exports=n(92)},62:function(e,a,n){},64:function(e,a,n){},90:function(e,a,n){},92:function(e,a,n){"use strict";n.r(a);var t=n(0),i=n.n(t),o=n(18),r=n.n(o),m=(n(62),n(5)),u=n(6),l=n(8),N=n(7),c=n(9),s=(n(64),n(4)),p=n(2),d=n(41),C=n.n(d);function v(e,a,n,t){var i,o=["blue","yellow","red"],r=e.append("svg").attr("width",parseInt(a)+70).attr("height",parseInt(n)+20);i=document.getElementsByClassName("tooltip")[0]?p.i(".tooltip"):p.i("body").append("div").attr("class",t("tooltip")).style("opacity",0);var m=p.g().rangeRound([70,a]),u=p.h().rangeRound([n,20]);r.append("g").attr("transform","translate(20,"+(n/2+10)+")").append("text").attr("class",t("percentage-label")).attr("transform","rotate(-90)").text("PERCENTAGE VOTES").attr("text-anchor","middle"),r.append("g").attr("class","x axis").attr("transform","translate(0,"+n+")"),r.append("g").attr("class","y axis").attr("transform","translate(70, 0)");var l=r.append("g").attr("class",t("bar-container")),N=r.append("g").attr("class",t("bartext-container"));this.draw=function(e){m.domain(e.map(function(e){return e.name})),u.domain([0,100]),r.select(".x.axis").transition().duration(300).call(p.a(m)),r.select(".y.axis").transition().duration(300).call(p.b(u).ticks(6).tickFormat(function(e){return e+"%"}));var a=l.selectAll(".".concat(t("bar"))).data(e);a.exit().transition().duration(300).attr("y",function(e){return u(0)}).attr("height",0).style("fill-opacity",1e-6).remove(),a.enter().append("rect").attr("class",t("bar")).attr("x",function(e){return m(e.name)+m.bandwidth()/20}).attr("width",9*m.bandwidth()/10).attr("fill",function(e,a){return o[a%o.length]}).on("mousemove",function(e){var a;p.i(this).attr("opacity",.8),i.transition().duration(200).style("opacity",.9),i.html((a=e.partyInfo.name,a.split("/")[0].toLowerCase().replace(/\b\w/g,function(e){return e.toUpperCase()})+" : "+e.percOfVotes+"%")).style("left",p.c.pageX+"px").style("top",p.c.pageY-28+"px")}).on("mouseout",function(e){p.i(this).attr("opacity",1),i.transition().duration(200).style("opacity",0)}).attr("y",function(e){return u(0)}).attr("height",0),l.selectAll(".".concat(t("bar"))).data(e).transition().duration(300).attr("y",function(e){return u(Number(e.percOfVotes))}).attr("height",function(e){return n-u(Number(e.percOfVotes))});var c=N.selectAll(".".concat(t("bartext"))).data(e);c.exit().transition().duration(300).attr("y",function(e){return u(0)-5}).style("fill-opacity",1e-6).remove(),c.enter().append("text").attr("class",t("bartext")).attr("x",function(e){return m(e.name)+m.bandwidth()/2}).attr("text-anchor","middle").attr("font-size","12px").attr("y",function(e){return u(0)-5}),N.selectAll(".".concat(t("bartext"))).data(e).text(function(e){return e.percOfVotes+"%"}).transition().duration(300).attr("y",function(e){return u(Number(e.percOfVotes))-5})},this.destroy=function(){r.remove()}}var h="region-change",g="barchart-preview",E="map-preview",b=n(13),y=n(99),f=n(54),M=n(100),w=n(14),K=n.n(w);function W(){var e=Object(b.a)(['\n      {\n        allVotingDistrictBallots(location_Id:"','", \n        event_Description:"','",\n        location_Ward_Municipality_Name_Icontains:"','") {\n          edges{\n            node{\n              location {\n                vdNumber\n              }\n              topResult(last:',") {\n                edges{\n                  node{\n                    party{\n                      name\n                    }\n                    percOfVotes\n                  }\n                }  \n              }\n            }\n          }\n        }\n      }\n      "]);return W=function(){return e},e}function S(){var e=Object(b.a)(['\n      {\n        allMunicipalBallots(location_Province_Name:"','", \n          event_Description:"','",\n          location_Code: "','"\n        ) {\n          edges{\n            node {\n              topResult(last:',"){\n                edges{\n                  node{\n                    party {               \n                      name\n                      abbreviation\n                    }\n                    validVotes\n                    percOfVotes\n                  }\n                }\n                \n              }\n              location {\n                code\n                name\n                longName\n              }\n            }\n          }\n        }\n      }\n      "]);return S=function(){return e},e}function Z(){var e=Object(b.a)(['\n      {\n        allProvincialBallots(\n          location_Name_Icontains:"','",\n          event_Description:"','"\n        ){\n          edges{\n            node{\n              topResult(last:',") {\n                edges{\n                  node{\n                    validVotes\n                    percOfVotes\n                    party {\n                      id\n                      name\n                      abbreviation\n                    }\n                  }\n                }\n              }\n              location {\n                id\n                name\n              }\n            }\n          }\n        }\n      }\n      "]);return Z=function(){return e},e}function k(){var e=Object(b.a)(['\n      {\n        allBallots(\n          event_Description:"','"\n        ){\n          edges{\n            node{\n              topResult(last:',") {\n                edges{\n                  node{\n                    validVotes\n                    percOfVotes\n                    party {\n                      id\n                      name\n                      abbreviation\n                    }\n                  }\n                }\n                \n              }\n              location {\n                id\n                name\n              }\n            }\n          }\n        }\n      }\n      "]);return k=function(){return e},e}function L(){var e=Object(b.a)(["\n    {\n      allEvents {\n        description\n      }\n    }\n    "]);return L=function(){return e},e}var T=new y.a({link:new f.a({uri:"https://elections2019.xyz/graphql",useGETForQueries:!0,headers:{"Content-Type":"application/graphql"}}),cache:new M.a});var P,I=3e4;function O(e){return C.a[e]||e}var B=0,F=function(e){function a(e){var n;Object(m.a)(this,a),n=Object(l.a)(this,Object(N.a)(a).call(this,e));var t=Object(s.a)(Object(s.a)(n));if(n.state={numParties:5,eventDescription:"2014 National Election",regionType:"national",provinceName:"",muniName:"",muniCode:"",vdNumber:""},e.numParties&&(n.state.numParties=e.numParties),e.regionType&&(n.state.regionType=e.regionType),e.provinceName&&(n.state.provinceName=e.provinceName),e.muniName&&(n.state.muniName=e.muniName),e.muniCode&&(n.state.muniCode=e.muniCode),e.vdNumber&&(n.state.vdNumber=e.vdNumber),e.width&&e.height)n.state.width=e.width,n.state.height=e.height;else{var i=n.getWidthHeightByScreenSize(),o=i.modifW,r=i.modifH;n.state.width=o,n.state.height=r}return B=setInterval(function(){t.draw(t.getContainer(),t.state)},I),n.handleRegionChange=n.handleRegionChange.bind(Object(s.a)(Object(s.a)(n))),n.handlePreviewEvent=n.handlePreviewEvent.bind(Object(s.a)(Object(s.a)(n))),n.redrawChart=n.redrawChart.bind(Object(s.a)(Object(s.a)(n))),n}return Object(c.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){this.draw(this.getContainer(),this.state),document.addEventListener(h,this.handleRegionChange),document.addEventListener(g,this.handlePreviewEvent),window.addEventListener("resize",this.redrawChart,200)}},{key:"componentDidUpdate",value:function(){this.draw(this.getContainer(),this.state)}},{key:"componentWillUnmount",value:function(){document.removeEventListener(h,this.handleRegionChange),document.removeEventListener(g,this.handlePreviewEvent),window.removeEventListener("resize",this.redrawChart),clearInterval(B)}},{key:"getWidthHeightByScreenSize",value:function(){var e=Math.min(810,document.body.clientWidth-350);return document.body.clientWidth<775&&(e=document.body.clientWidth-50),{modifW:e,modifH:e/3.5}}},{key:"redrawChart",value:function(){var e=this.getWidthHeightByScreenSize(),a=e.modifW,n=e.modifH;P&&P.destroy(),P=new v(this.getContainer(),a,n,O),this.setState({width:a,height:n})}},{key:"handleRegionChange",value:function(e){var a=e.detail;console.log("handleRegionChange",a),this.setState(a)}},{key:"handlePreviewEvent",value:function(e){var a=e.detail;console.log("handlePreviewEvent",a),P&&P.destroy(),P=new v(this.getContainer(),this.state.width,this.state.height,O),this.setState(a)}},{key:"getContainer",value:function(){return p.i(this.refs.vizcontainer)}},{key:"getRegionName",value:function(){return"national"==this.state.regionType?"SA":"province"==this.state.regionType?this.state.provinceName:"municipality"==this.state.regionType?this.state.muniName:"municipality-vd"==this.state.regionType?this.state.muniName+"-"+this.state.vdNumber:void 0}},{key:"render",value:function(){return i.a.createElement("div",{className:"barchart"},i.a.createElement("div",{className:O("chart-title")},"RACE FOR VOTES (",this.getRegionName(),"): "),i.a.createElement("div",{ref:"vizcontainer",className:O("chart-body"),style:{width:this.state.width,height:this.state.height}}))}},{key:"draw",value:function(e,a){var n=this;(function(e){var a=e.eventDescription;if("national"==e.regionType)return T.query({query:K()(k(),a,e.numParties)});if("province"==e.regionType)return T.query({query:K()(Z(),e.provinceName,a,e.numParties)});if("municipality"==e.regionType){var n=e.muniName.split(" - ")[0];return T.query({query:K()(S(),e.provinceName,a,n,e.numParties)})}return"municipality-vd"==e.regionType?T.query({query:K()(W(),e.vdNumber,a,e.muniCode,e.numParties)}):void 0})(a).then(function(t){n.drawGraph(e,a,t)}).catch(function(e){return console.error(e)})}},{key:"drawGraph",value:function(e,a,n){var t,i,o=a.regionType;if(i="national"==o?n.data.allBallots.edges[0]:"province"==o?n.data.allProvincialBallots.edges[0]:"municipality"==o?n.data.allMunicipalBallots.edges[0]:n.data.allVotingDistrictBallots.edges[0]){var r=i.node;t=(r.partyResults||r.topResult).edges.map(function(e){var a=e.node;return{name:a.party.abbreviation,validVotes:a.validVotes,percOfVotes:a.percOfVotes,partyInfo:a.party}}).reverse();var m=parseInt(a.width),u=parseInt(a.height);P||(P=new v(e,m,u,O)),P.draw(t)}else console.error("party data is empty!!")}}]),a}(t.Component),G={DOMAIN:"https://sabc-eds.github.io/elections-dataviz"},A=n(21),R=n.n(A),j=n(47),D=n.n(j);function z(e){return R.a[e]||D.a[e]||e}var x=function(e){function a(e){var n;Object(m.a)(this,a),n=Object(l.a)(this,Object(N.a)(a).call(this,e));var t=Object(s.a)(Object(s.a)(n));return n.state={elementId:"root",eventDescription:"2014 National Election",regionType:"province",provinceName:"Western Cape",muniName:"",muniCode:"",vdNumber:"",numParties:5,electionEvents:[]},T.query({query:K()(L())}).then(function(e){var a=e.data.allEvents.map(function(e){return e.description});t.setState({electionEvents:a})}).catch(function(e){return console.error(e)}),n}return Object(c.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"onEventDescriptionChange",value:function(e){this.setState({eventDescription:e.target.value})}},{key:"onRegionTypeChange",value:function(e){var a={regionType:e.target.value};this.setState(a)}},{key:"onPreview",value:function(e){var a=new CustomEvent(g,{detail:this.state});document.dispatchEvent(a)}},{key:"render",value:function(){var e=this,a=G.DOMAIN,n=this.state,t=n.elementId,o=n.eventDescription,r=n.regionType,m=n.provinceName,u=n.muniName,l=n.muniCode,N=n.vdNumber,c=n.numParties,s=n.electionEvents;return i.a.createElement("div",null,i.a.createElement("h3",null," Barchart Embed Script Generation "),i.a.createElement("div",{className:z("form-group")},i.a.createElement("label",null,"Element ID "),i.a.createElement("input",{type:"text",className:z("form-control"),placeholder:"chart-container",onChange:function(a){return e.setState({elementId:a.target.value})}})),i.a.createElement("div",{className:z("form-group")},i.a.createElement("label",null,"Event "),i.a.createElement("select",{className:z("form-control"),value:o,onChange:this.onEventDescriptionChange.bind(this)},s.map(function(e){return i.a.createElement("option",{key:e,value:e},e)}))),i.a.createElement("div",{className:z("form-group")},i.a.createElement("label",null,"Region Type "),i.a.createElement("select",{className:z("form-control"),value:r,onChange:this.onRegionTypeChange.bind(this)},i.a.createElement("option",{value:"national"},"national"),i.a.createElement("option",{value:"province"},"province"),i.a.createElement("option",{value:"municipality"},"municipality"),i.a.createElement("option",{value:"municipality-vd"},"voting district"))),"national"!=r&&i.a.createElement("div",{className:z("form-group")},i.a.createElement("label",null,"Province Name"),i.a.createElement("input",{type:"text",className:z("form-control"),placeholder:"Western Cape",value:m,onChange:function(a){return e.setState({provinceName:a.target.value})},disabled:"national"==r})),"municipality"==r&&i.a.createElement("div",{className:z("form-group")},i.a.createElement("label",null,"Municipality Name"),i.a.createElement("input",{type:"text",className:z("form-control"),placeholder:"City of Cape Town",value:u,onChange:function(a){return e.setState({muniName:a.target.value})},disabled:"national"==r})),"municipality-vd"==r&&i.a.createElement("div",{className:z("form-group")},i.a.createElement("label",null,"Municipality Code"),i.a.createElement("input",{type:"text",className:z("form-control"),placeholder:"CPT",value:l,onChange:function(a){return e.setState({muniCode:a.target.value})},disabled:"national"==r})),"municipality-vd"==r&&i.a.createElement("div",{className:z("form-group")},i.a.createElement("label",null,"Voting District Number"),i.a.createElement("input",{type:"text",className:z("form-control"),placeholder:"97860055",value:N,onChange:function(a){return e.setState({vdNumber:a.target.value})},disabled:"national"==r})),i.a.createElement("div",{className:z("form-group")},i.a.createElement("label",null,"Number Of Parties"),i.a.createElement("input",{type:"number",className:z("form-control"),placeholder:"5",value:c,onChange:function(a){return e.setState({numParties:a.target.value})}})),i.a.createElement("div",{className:z("form-group")},i.a.createElement("button",{type:"button",onClick:this.onPreview.bind(this),className:z("btn")+" "+z("btn-primary")},"Preview")),i.a.createElement("div",{className:z("form-group")},i.a.createElement("label",null,"Embed Code"),i.a.createElement("div",{className:z("embedcode")},i.a.createElement("span",null,'<script src="'.concat(a,'/embed/embed.js"><\/script>\n                    <script>showBarChart(\n                        document.getElementById("').concat(t,'"),\n                        {\n                            eventDescription: "').concat(o,'",\n                            regionType: "').concat(r,'",\n                            provinceName: "').concat(m,'",\n                            muniName: "').concat(u,'",\n                            muniCode: "').concat(l,'",\n                            vdNumber: "').concat(N,'",\n                            numParties: "').concat(c,'",\n                            width: 600,\n                            height: 220\n                        });<\/script>').replace(/(\r\n|\n|\r)/gm,"")))))}}]),a}(t.Component),H=n(53),U=n(16),V=n(28),_=n.n(V),q=n(50),J=n.n(q),Y=n(51),Q=n.n(Y);function X(e){return J.a[e]||e}var $=[{name:"Limpopo",abbreviation:"LIM",munis:[{provinceName:"Limpopo",muniName:"LIM331 - Greater Giyani [Giyani]",muniCode:"LIM331"},{provinceName:"Limpopo",muniName:"LIM332 - Greater Letaba [Duiwelskloof]",muniCode:"LIM332"},{provinceName:"Limpopo",muniName:"LIM333 - Greater Tzaneen [Tzaneen]",muniCode:"LIM333"},{provinceName:"Limpopo",muniName:"LIM334 - Ba-Phalaborwa [Phalaborwa]",muniCode:"LIM334"},{provinceName:"Limpopo",muniName:"LIM335 - Maruleng [Hoedspruit]",muniCode:"LIM335"},{provinceName:"Limpopo",muniName:"LIM341 - Musina [Messina]",muniCode:"LIM341"},{provinceName:"Limpopo",muniName:"LIM342 - Mutale [Mutale-Masisi]",muniCode:"LIM342"},{provinceName:"Limpopo",muniName:"LIM343 - Thulamela [Thohoyandou]",muniCode:"LIM343"},{provinceName:"Limpopo",muniName:"LIM344 - Makhado [Louis Trichardt]",muniCode:"LIM344"},{provinceName:"Limpopo",muniName:"LIM351 - Blouberg [Bochum/My Darling]",muniCode:"LIM351"},{provinceName:"Limpopo",muniName:"LIM352 - Aganang [Moletji/Matlala]",muniCode:"LIM352"},{provinceName:"Limpopo",muniName:"LIM353 - Molemole [Dendron/Dikgale]",muniCode:"LIM353"},{provinceName:"Limpopo",muniName:"LIM354 - Polokwane [Pietersburg]",muniCode:"LIM354"},{provinceName:"Limpopo",muniName:"LIM355 - Lepele-Nkumpi [Lebowakgomo]",muniCode:"LIM355"},{provinceName:"Limpopo",muniName:"LIM361 - Thabazimbi [Thabazimbi]",muniCode:"LIM361"},{provinceName:"Limpopo",muniName:"LIM362 - Lephalale [Ellisras]",muniCode:"LIM362"},{provinceName:"Limpopo",muniName:"LIM364 - Mookgopong [Naboomspruit]",muniCode:"LIM364"},{provinceName:"Limpopo",muniName:"LIM365 - Modimolle [Nylstroom]",muniCode:"LIM365"},{provinceName:"Limpopo",muniName:"LIM366 - Bela-Bela [Warmbad]",muniCode:"LIM366"},{provinceName:"Limpopo",muniName:"LIM367 - Mogalakwena [Potgietersrus]",muniCode:"LIM367"},{provinceName:"Limpopo",muniName:"LIM471 - Ephraim Mogale [Marble Hall]",muniCode:"LIM471"},{provinceName:"Limpopo",muniName:"LIM472 - Elias Motsoaledi [Groblersdal]",muniCode:"LIM472"},{provinceName:"Limpopo",muniName:"LIM473 - Makhuduthamaga [Ngwaritsi]",muniCode:"LIM473"},{provinceName:"Limpopo",muniName:"LIM474 - Fetakgomo [Fetakgomo ]",muniCode:"LIM474"},{provinceName:"Limpopo",muniName:"LIM475 - Greater Tubatse [Burgersfort/Ohrigstad/Eastern Tubatse]",muniCode:"LIM475"}]},{name:"Mpumalanga",abbreviation:"MP",munis:[{provinceName:"Mpumalanga",muniName:"MP301 - Albert Luthuli [Elukwatini/Carolina]",muniCode:"MP301"},{provinceName:"Mpumalanga",muniName:"MP302 - Msukaligwa [Ermelo]",muniCode:"MP302"},{provinceName:"Mpumalanga",muniName:"MP303 - Mkhondo [Piet Retief]",muniCode:"MP303"},{provinceName:"Mpumalanga",muniName:"MP304 - Pixley Ka Seme [Volksrust]",muniCode:"MP304"},{provinceName:"Mpumalanga",muniName:"MP305 - Lekwa [Standerton]",muniCode:"MP305"},{provinceName:"Mpumalanga",muniName:"MP306 - Dipaleseng [Balfour]",muniCode:"MP306"},{provinceName:"Mpumalanga",muniName:"MP307 - Govan Mbeki [Highveld Ridge]",muniCode:"MP307"},{provinceName:"Mpumalanga",muniName:"MP311 - Delmas [Delmas]",muniCode:"MP311"},{provinceName:"Mpumalanga",muniName:"MP312 - Emalahleni [Witbank]",muniCode:"MP312"},{provinceName:"Mpumalanga",muniName:"MP313 - Steve Tshwete [Middelburg]",muniCode:"MP313"},{provinceName:"Mpumalanga",muniName:"MP314 - Emakhazeni [Belfast]",muniCode:"MP314"},{provinceName:"Mpumalanga",muniName:"MP315 - Thembisile [KwaMhlanga]",muniCode:"MP315"},{provinceName:"Mpumalanga",muniName:"MP316 - Dr JS Moroka [Mdutjana]",muniCode:"MP316"},{provinceName:"Mpumalanga",muniName:"MP321 - Thaba Chweu [Sabie]",muniCode:"MP321"},{provinceName:"Mpumalanga",muniName:"MP322 - Mbombela [Nelspruit]",muniCode:"MP322"},{provinceName:"Mpumalanga",muniName:"MP323 - Umjindi [Barberton]",muniCode:"MP323"},{provinceName:"Mpumalanga",muniName:"MP324 - Nkomazi [Nkomazi]",muniCode:"MP324"},{provinceName:"Mpumalanga",muniName:"MP325 - Bushbuckridge [Bushbuckridge]",muniCode:"MP325"}]},{name:"Gauteng",abbreviation:"GT",munis:[{provinceName:"Gauteng",muniName:"EKU - Ekurhuleni [East Rand]",muniCode:"EKU"},{provinceName:"Gauteng",muniName:"GT421 - Emfuleni [Vereeniging]",muniCode:"GT421"},{provinceName:"Gauteng",muniName:"GT422 - Midvaal [Meyerton]",muniCode:"GT422"},{provinceName:"Gauteng",muniName:"GT423 - Lesedi [Heidelberg]",muniCode:"GT423"},{provinceName:"Gauteng",muniName:"GT481 - Mogale City [Krugersdorp]",muniCode:"GT481"},{provinceName:"Gauteng",muniName:"GT482 - Randfontein [Randfontein]",muniCode:"GT482"},{provinceName:"Gauteng",muniName:"GT483 - Westonaria [Westonaria]",muniCode:"GT483"},{provinceName:"Gauteng",muniName:"GT484 - Merafong City [Carletonville]",muniCode:"GT484"},{provinceName:"Gauteng",muniName:"JHB - City of Johannesburg [Johannesburg]",muniCode:"JHB"},{provinceName:"Gauteng",muniName:"TSH - Tshwane Metro [Pretoria]",muniCode:"TSH"}]},{name:"KwaZulu-Natal",abbreviation:"KZN",munis:[{provinceName:"KwaZulu-Natal",muniName:"ETH - eThekwini [Durban Metro]",muniCode:"ETH"},{provinceName:"KwaZulu-Natal",muniName:"KZN211 - Vulamehlo [Dududu]",muniCode:"KZN211"},{provinceName:"KwaZulu-Natal",muniName:"KZN212 - Umdoni [Scottburgh]",muniCode:"KZN212"},{provinceName:"KwaZulu-Natal",muniName:"KZN213 - Umzumbe [Umzumbe]",muniCode:"KZN213"},{provinceName:"KwaZulu-Natal",muniName:"KZN214 - UMuziwabantu [Harding]",muniCode:"KZN214"},{provinceName:"KwaZulu-Natal",muniName:"KZN215 - Ezinqoleni [Izinqolweni]",muniCode:"KZN215"},{provinceName:"KwaZulu-Natal",muniName:"KZN216 - Hibiscus Coast [Port Shepstone]",muniCode:"KZN216"},{provinceName:"KwaZulu-Natal",muniName:"KZN221 - uMshwathi [Wartburg]",muniCode:"KZN221"},{provinceName:"KwaZulu-Natal",muniName:"KZN222 - uMngeni [Howick]",muniCode:"KZN222"},{provinceName:"KwaZulu-Natal",muniName:"KZN223 - Mooi Mpofana [Mooirivier]",muniCode:"KZN223"},{provinceName:"KwaZulu-Natal",muniName:"KZN224 - Impendle [Impendle]",muniCode:"KZN224"},{provinceName:"KwaZulu-Natal",muniName:"KZN225 - Msunduzi [Pietermaritzburg]",muniCode:"KZN225"},{provinceName:"KwaZulu-Natal",muniName:"KZN226 - Mkhambathini [Camperdown]",muniCode:"KZN226"},{provinceName:"KwaZulu-Natal",muniName:"KZN227 - Richmond [Richmond]",muniCode:"KZN227"},{provinceName:"KwaZulu-Natal",muniName:"KZN232 - Emnambithi/Ladysmith [Ladysmith]",muniCode:"KZN232"},{provinceName:"KwaZulu-Natal",muniName:"KZN233 - Indaka [Waaihoek]",muniCode:"KZN233"},{provinceName:"KwaZulu-Natal",muniName:"KZN234 - Umtshezi [Estcourt]",muniCode:"KZN234"},{provinceName:"KwaZulu-Natal",muniName:"KZN235 - Okhahlamba [Bergville]",muniCode:"KZN235"},{provinceName:"KwaZulu-Natal",muniName:"KZN236 - Imbabazane [Loskop]",muniCode:"KZN236"},{provinceName:"KwaZulu-Natal",muniName:"KZN241 - Endumeni [Dundee]",muniCode:"KZN241"},{provinceName:"KwaZulu-Natal",muniName:"KZN242 - Nqutu [Nqutu]",muniCode:"KZN242"},{provinceName:"KwaZulu-Natal",muniName:"KZN244 - Msinga [Pomeroy]",muniCode:"KZN244"},{provinceName:"KwaZulu-Natal",muniName:"KZN245 - Umvoti [Greytown]",muniCode:"KZN245"},{provinceName:"KwaZulu-Natal",muniName:"KZN252 - Newcastle [Newcastle]",muniCode:"KZN252"},{provinceName:"KwaZulu-Natal",muniName:"KZN253 - eMadlangeni [Utrecht]",muniCode:"KZN253"},{provinceName:"KwaZulu-Natal",muniName:"KZN254 - Dannhauser [Durnacol]",muniCode:"KZN254"},{provinceName:"KwaZulu-Natal",muniName:"KZN261 - eDumbe [Paulpietersburg]",muniCode:"KZN261"},{provinceName:"KwaZulu-Natal",muniName:"KZN262 - UPhongolo [Pongola]",muniCode:"KZN262"},{provinceName:"KwaZulu-Natal",muniName:"KZN263 - Abaqulusi [Vryheid]",muniCode:"KZN263"},{provinceName:"KwaZulu-Natal",muniName:"KZN265 - Nongoma [Nongoma]",muniCode:"KZN265"},{provinceName:"KwaZulu-Natal",muniName:"KZN266 - Ulundi [Ulundi]",muniCode:"KZN266"},{provinceName:"KwaZulu-Natal",muniName:"KZN271 - Umhlabuyalingana [Emangusi]",muniCode:"KZN271"},{provinceName:"KwaZulu-Natal",muniName:"KZN272 - Jozini [Mkuze]",muniCode:"KZN272"},{provinceName:"KwaZulu-Natal",muniName:"KZN273 - The Big 5 False Bay [Hluhluwe]",muniCode:"KZN273"},{provinceName:"KwaZulu-Natal",muniName:"KZN274 - Hlabisa [Somkele]",muniCode:"KZN274"},{provinceName:"KwaZulu-Natal",muniName:"KZN275 - Mtubatuba [Mtubatuba]",muniCode:"KZN275"},{provinceName:"KwaZulu-Natal",muniName:"KZN281 - Mfolozi [KwaMbonambi]",muniCode:"KZN281"},{provinceName:"KwaZulu-Natal",muniName:"KZN282 - uMhlathuze [Richards Bay]",muniCode:"KZN282"},{provinceName:"KwaZulu-Natal",muniName:"KZN283 - Ntambana [Ntambana]",muniCode:"KZN283"},{provinceName:"KwaZulu-Natal",muniName:"KZN284 - uMlalazi [Eshowe]",muniCode:"KZN284"},{provinceName:"KwaZulu-Natal",muniName:"KZN285 - Mthonjaneni [Melmoth]",muniCode:"KZN285"},{provinceName:"KwaZulu-Natal",muniName:"KZN286 - Nkandla [Nkandla]",muniCode:"KZN286"},{provinceName:"KwaZulu-Natal",muniName:"KZN291 - Mandeni [Mandeni]",muniCode:"KZN291"},{provinceName:"KwaZulu-Natal",muniName:"KZN292 - KwaDukuza [Stanger]",muniCode:"KZN292"},{provinceName:"KwaZulu-Natal",muniName:"KZN293 - Ndwedwe [Ndwedwe]",muniCode:"KZN293"},{provinceName:"KwaZulu-Natal",muniName:"KZN294 - Maphumulo [Maphumulo]",muniCode:"KZN294"},{provinceName:"KwaZulu-Natal",muniName:"KZN431 - Ingwe [Creighton]",muniCode:"KZN431"},{provinceName:"KwaZulu-Natal",muniName:"KZN432 - Kwa Sani [Underberg]",muniCode:"KZN432"},{provinceName:"KwaZulu-Natal",muniName:"KZN433 - Greater Kokstad [Kokstad]",muniCode:"KZN433"},{provinceName:"KwaZulu-Natal",muniName:"KZN434 - Ubuhlebezwe [Ixopo]",muniCode:"KZN434"},{provinceName:"KwaZulu-Natal",muniName:"KZN435 - Umzimkhulu [Umzimkulu]",muniCode:"KZN435"}]},{name:"North West",abbreviation:"NW",munis:[{provinceName:"North West",muniName:"NW371 - Moretele [Makapanstad]",muniCode:"NW371"},{provinceName:"North West",muniName:"NW372 - Madibeng [Brits]",muniCode:"NW372"},{provinceName:"North West",muniName:"NW373 - Rustenburg [Rustenburg]",muniCode:"NW373"},{provinceName:"North West",muniName:"NW374 - Kgetlengrivier [Koster]",muniCode:"NW374"},{provinceName:"North West",muniName:"NW375 - Moses Kotane [Mogwase]",muniCode:"NW375"},{provinceName:"North West",muniName:"NW381 - Ratlou [Setlagole]",muniCode:"NW381"},{provinceName:"North West",muniName:"NW382 - Tswaing [Delareyville]",muniCode:"NW382"},{provinceName:"North West",muniName:"NW383 - Mafikeng [Mafikeng]",muniCode:"NW383"},{provinceName:"North West",muniName:"NW384 - Ditsobotla [Lichtenburg]",muniCode:"NW384"},{provinceName:"North West",muniName:"NW385 - Ramotshere Moiloa [Zeerust]",muniCode:"NW385"},{provinceName:"North West",muniName:"NW392 - Naledi [Vryburg]",muniCode:"NW392"},{provinceName:"North West",muniName:"NW393 - Mamusa [Schweizer-Reneke]",muniCode:"NW393"},{provinceName:"North West",muniName:"NW394 - Greater Taung [Reivilo]",muniCode:"NW394"},{provinceName:"North West",muniName:"NW396 - Lekwa-Teemane [Christiana]",muniCode:"NW396"},{provinceName:"North West",muniName:"NW397 - NW397 Local Municipality [Ganyesa/Pomfret]",muniCode:"NW397"},{provinceName:"North West",muniName:"NW401 - Ventersdorp [Ventersdorp]",muniCode:"NW401"},{provinceName:"North West",muniName:"NW402 - Tlokwe [Potchefstroom]",muniCode:"NW402"},{provinceName:"North West",muniName:"NW403 - Matlosana [Klerksdorp]",muniCode:"NW403"},{provinceName:"North West",muniName:"NW404 - Maquassi Hills [Wolmaransstad]",muniCode:"NW404"}]},{name:"Free State",abbreviation:"FS",munis:[{provinceName:"Free State",muniName:"FS161 - Letsemeng [Koffiefontein]",muniCode:"FS161"},{provinceName:"Free State",muniName:"FS162 - Kopanong [Trompsburg]",muniCode:"FS162"},{provinceName:"Free State",muniName:"FS163 - Mohokare [Zastron]",muniCode:"FS163"},{provinceName:"Free State",muniName:"FS164 - Naledi [Dewetsdorp]",muniCode:"FS164"},{provinceName:"Free State",muniName:"FS181 - Masilonyana [Theunissen]",muniCode:"FS181"},{provinceName:"Free State",muniName:"FS182 - Tokologo [Dealesville]",muniCode:"FS182"},{provinceName:"Free State",muniName:"FS183 - Tswelopele [Hoopstad]",muniCode:"FS183"},{provinceName:"Free State",muniName:"FS184 - Matjhabeng [Welkom]",muniCode:"FS184"},{provinceName:"Free State",muniName:"FS185 - Nala [Bothaville]",muniCode:"FS185"},{provinceName:"Free State",muniName:"FS191 - Setsoto [Senekal]",muniCode:"FS191"},{provinceName:"Free State",muniName:"FS192 - Dihlabeng [Bethlehem]",muniCode:"FS192"},{provinceName:"Free State",muniName:"FS193 - Nketoana [Reitz]",muniCode:"FS193"},{provinceName:"Free State",muniName:"FS194 - Maluti a Phofung [Qwa-Qwa]",muniCode:"FS194"},{provinceName:"Free State",muniName:"FS195 - Phumelela [Vrede]",muniCode:"FS195"},{provinceName:"Free State",muniName:"FS196 - Mantsopa [Ladybrand]",muniCode:"FS196"},{provinceName:"Free State",muniName:"FS201 - Moqhaka [Kroonstad]",muniCode:"FS201"},{provinceName:"Free State",muniName:"FS203 - Ngwathe [Parys]",muniCode:"FS203"},{provinceName:"Free State",muniName:"FS204 - Metsimaholo [Sasolburg]",muniCode:"FS204"},{provinceName:"Free State",muniName:"FS205 - Mafube [Frankfort]",muniCode:"FS205"},{provinceName:"Free State",muniName:"MAN - Mangaung [Bloemfontein]",muniCode:"MAN"}]},{name:"Eastern Cape",abbreviation:"EC",munis:[{provinceName:"Eastern Cape",muniName:"BUF - Buffalo City [East London]",muniCode:"BUF"},{provinceName:"Eastern Cape",muniName:"EC101 - Camdeboo [Graaff-Reinet]",muniCode:"EC101"},{provinceName:"Eastern Cape",muniName:"EC102 - Blue Crane Route [Somerset East]",muniCode:"EC102"},{provinceName:"Eastern Cape",muniName:"EC103 - Ikwezi [Jansenville]",muniCode:"EC103"},{provinceName:"Eastern Cape",muniName:"EC104 - Makana [Grahamstown]",muniCode:"EC104"},{provinceName:"Eastern Cape",muniName:"EC105 - Ndlambe [Port Alfred]",muniCode:"EC105"},{provinceName:"Eastern Cape",muniName:"EC106 - Sundays River Valley [Kirkwood]",muniCode:"EC106"},{provinceName:"Eastern Cape",muniName:"EC107 - Baviaans [Willowmore]",muniCode:"EC107"},{provinceName:"Eastern Cape",muniName:"EC108 - Kouga [Humansdorp]",muniCode:"EC108"},{provinceName:"Eastern Cape",muniName:"EC109 - Kou-Kamma [Kareedouw]",muniCode:"EC109"},{provinceName:"Eastern Cape",muniName:"EC121 - Mbhashe [Idutywa]",muniCode:"EC121"},{provinceName:"Eastern Cape",muniName:"EC122 - Mnquma [Butterworth]",muniCode:"EC122"},{provinceName:"Eastern Cape",muniName:"EC123 - Great Kei [Komga]",muniCode:"EC123"},{provinceName:"Eastern Cape",muniName:"EC124 - Amahlathi [Stutterheim]",muniCode:"EC124"},{provinceName:"Eastern Cape",muniName:"EC126 - Ngqushwa [Peddie]",muniCode:"EC126"},{provinceName:"Eastern Cape",muniName:"EC127 - Nkonkobe [Alice]",muniCode:"EC127"},{provinceName:"Eastern Cape",muniName:"EC128 - Nxuba [Adelaide]",muniCode:"EC128"},{provinceName:"Eastern Cape",muniName:"EC131 - Inxuba Yethemba [Cradock]",muniCode:"EC131"},{provinceName:"Eastern Cape",muniName:"EC132 - Tsolwana [Tarkastad]",muniCode:"EC132"},{provinceName:"Eastern Cape",muniName:"EC133 - Inkwanca [Molteno]",muniCode:"EC133"},{provinceName:"Eastern Cape",muniName:"EC134 - Lukhanji [Queenstown]",muniCode:"EC134"},{provinceName:"Eastern Cape",muniName:"EC135 - Intsika Yethu [Cofimvaba]",muniCode:"EC135"},{provinceName:"Eastern Cape",muniName:"EC136 - Emalahleni [Lady Frere]",muniCode:"EC136"},{provinceName:"Eastern Cape",muniName:"EC137 - Engcobo [Engcobo]",muniCode:"EC137"},{provinceName:"Eastern Cape",muniName:"EC138 - Sakhisizwe [Elliot]",muniCode:"EC138"},{provinceName:"Eastern Cape",muniName:"EC141 - Elundini [Mount Fletcher]",muniCode:"EC141"},{provinceName:"Eastern Cape",muniName:"EC142 - Senqu [Lady Grey]",muniCode:"EC142"},{provinceName:"Eastern Cape",muniName:"EC143 - Maletswai [Aliwal North]",muniCode:"EC143"},{provinceName:"Eastern Cape",muniName:"EC144 - Gariep [Burgersdorp]",muniCode:"EC144"},{provinceName:"Eastern Cape",muniName:"EC153 - Ngquza Hill [Flagstaff]",muniCode:"EC153"},{provinceName:"Eastern Cape",muniName:"EC154 - Port St Johns [Port St Johns]",muniCode:"EC154"},{provinceName:"Eastern Cape",muniName:"EC155 - Nyandeni [Libode]",muniCode:"EC155"},{provinceName:"Eastern Cape",muniName:"EC156 - Mhlontlo [Qumbu]",muniCode:"EC156"},{provinceName:"Eastern Cape",muniName:"EC157 - King Sabata Dalindyebo [Umtata]",muniCode:"EC157"},{provinceName:"Eastern Cape",muniName:"EC441 - Matatiele [Matatiele]",muniCode:"EC441"},{provinceName:"Eastern Cape",muniName:"EC442 - Umzimvubu [Mount Ayliff]",muniCode:"EC442"},{provinceName:"Eastern Cape",muniName:"EC443 - Mbizana [Bizana]",muniCode:"EC443"},{provinceName:"Eastern Cape",muniName:"EC444 - Ntabankulu [Ntabankulu]",muniCode:"EC444"},{provinceName:"Eastern Cape",muniName:"NMA - Nelson Mandela Bay [Port Elizabeth]",muniCode:"NMA"}]},{name:"Northern Cape",abbreviation:"NC",munis:[{provinceName:"Northern Cape",muniName:"NC061 - RICHTERSVELD [Port Nolloth]",muniCode:"NC061"},{provinceName:"Northern Cape",muniName:"NC062 - NAMA KHOI [Springbok]",muniCode:"NC062"},{provinceName:"Northern Cape",muniName:"NC064 - KAMIESBERG [Garies]",muniCode:"NC064"},{provinceName:"Northern Cape",muniName:"NC065 - HANTAM [Calvinia]",muniCode:"NC065"},{provinceName:"Northern Cape",muniName:"NC066 - KAROO HOOGLAND [Fraserburg]",muniCode:"NC066"},{provinceName:"Northern Cape",muniName:"NC067 - KH\x83I-MA [Pofadder]",muniCode:"NC067"},{provinceName:"Northern Cape",muniName:"NC071 - UBUNTU [Victoria West]",muniCode:"NC071"},{provinceName:"Northern Cape",muniName:"NC072 - UMSOBOMVU [Colesberg]",muniCode:"NC072"},{provinceName:"Northern Cape",muniName:"NC073 - EMTHANJENI [De Aar]",muniCode:"NC073"},{provinceName:"Northern Cape",muniName:"NC074 - KAREEBERG [Carnarvon]",muniCode:"NC074"},{provinceName:"Northern Cape",muniName:"NC075 - RENOSTERBERG [Phillipstown]",muniCode:"NC075"},{provinceName:"Northern Cape",muniName:"NC076 - THEMBELIHLE [Hopetown]",muniCode:"NC076"},{provinceName:"Northern Cape",muniName:"NC077 - SIYATHEMBA [Prieska]",muniCode:"NC077"},{provinceName:"Northern Cape",muniName:"NC078 - SIYANCUMA [Griekwastad]",muniCode:"NC078"},{provinceName:"Northern Cape",muniName:"NC081 - MIER [Mier]",muniCode:"NC081"},{provinceName:"Northern Cape",muniName:"NC082 - KAI !GARIB [Keimoes]",muniCode:"NC082"},{provinceName:"Northern Cape",muniName:"NC083 - KHARA HAIS [Upington]",muniCode:"NC083"},{provinceName:"Northern Cape",muniName:"NC084 - !KHEIS [Groblershoop]",muniCode:"NC084"},{provinceName:"Northern Cape",muniName:"NC085 - TSANTSABANE [Postmasburg]",muniCode:"NC085"},{provinceName:"Northern Cape",muniName:"NC086 - KGATELOPELE [Danielskuil]",muniCode:"NC086"},{provinceName:"Northern Cape",muniName:"NC091 - Sol Plaatje [Kimberley]",muniCode:"NC091"},{provinceName:"Northern Cape",muniName:"NC092 - Dikgatlong [Barkley West]",muniCode:"NC092"},{provinceName:"Northern Cape",muniName:"NC093 - Magareng [Warrenton]",muniCode:"NC093"},{provinceName:"Northern Cape",muniName:"NC094 - Phokwane [Hartswater]",muniCode:"NC094"},{provinceName:"Northern Cape",muniName:"NC451 - Joe Morolong [Kgalagadi]",muniCode:"NC451"},{provinceName:"Northern Cape",muniName:"NC452 - GA-SEGONYANA [Kuruman]",muniCode:"NC452"},{provinceName:"Northern Cape",muniName:"NC453 - GAMAGARA [Kathu]",muniCode:"NC453"}]},{name:"Western Cape",abbreviation:"WC",munis:[{provinceName:"Western Cape",muniName:"CPT - City of Cape Town [Cape Town]",muniCode:"CPT"},{provinceName:"Western Cape",muniName:"WC011 - Matzikama [Vredendal]",muniCode:"WC011"},{provinceName:"Western Cape",muniName:"WC012 - Cederberg [Citrusdal]",muniCode:"WC012"},{provinceName:"Western Cape",muniName:"WC013 - Bergrivier [Velddrif]",muniCode:"WC013"},{provinceName:"Western Cape",muniName:"WC014 - Saldanha Bay [West Coast Peninsula]",muniCode:"WC014"},{provinceName:"Western Cape",muniName:"WC015 - Swartland [Malmesbury]",muniCode:"WC015"},{provinceName:"Western Cape",muniName:"WC022 - Witzenberg [Ceres]",muniCode:"WC022"},{provinceName:"Western Cape",muniName:"WC023 - Drakenstein [Paarl]",muniCode:"WC023"},{provinceName:"Western Cape",muniName:"WC024 - Stellenbosch [Stellenbosch]",muniCode:"WC024"},{provinceName:"Western Cape",muniName:"WC025 - Breede Valley [Worcester]",muniCode:"WC025"},{provinceName:"Western Cape",muniName:"WC026 - Langeberg [Robertson]",muniCode:"WC026"},{provinceName:"Western Cape",muniName:"WC031 - Theewaterskloof [Caledon]",muniCode:"WC031"},{provinceName:"Western Cape",muniName:"WC032 - Overstrand [Greater Hermanus]",muniCode:"WC032"},{provinceName:"Western Cape",muniName:"WC033 - Cape Agulhas [Bredasdorp]",muniCode:"WC033"},{provinceName:"Western Cape",muniName:"WC034 - Swellendam [Barrydale/Swellendam ]",muniCode:"WC034"},{provinceName:"Western Cape",muniName:"WC041 - Kannaland [Ladismith]",muniCode:"WC041"},{provinceName:"Western Cape",muniName:"WC042 - Hessequa [Heidelberg/Riversdale]",muniCode:"WC042"},{provinceName:"Western Cape",muniName:"WC043 - Mossel Bay [Mossel Bay]",muniCode:"WC043"},{provinceName:"Western Cape",muniName:"WC044 - George [George]",muniCode:"WC044"},{provinceName:"Western Cape",muniName:"WC045 - Oudtshoorn [Oudtshoorn]",muniCode:"WC045"},{provinceName:"Western Cape",muniName:"WC047 - Bitou [Greater Plettenberg Bay]",muniCode:"WC047"},{provinceName:"Western Cape",muniName:"WC048 - Knysna [Knysna]",muniCode:"WC048"},{provinceName:"Western Cape",muniName:"WC051 - Laingsburg [Laingsburg]",muniCode:"WC051"},{provinceName:"Western Cape",muniName:"WC052 - Prince Albert [Prins Albert]",muniCode:"WC052"},{provinceName:"Western Cape",muniName:"WC053 - Beaufort West [Beaufort West]",muniCode:"WC053"}]}],ee=function(e){function a(e){var n;return Object(m.a)(this,a),(n=Object(l.a)(this,Object(N.a)(a).call(this,e))).state={disableNavigation:!1,regionType:"national",provinceName:"",muniName:"",muniCode:"",vdNumber:""},e.regionType&&(n.state.regionType=e.regionType),e.provinceName&&(n.state.provinceName=e.provinceName),e.muniName&&(n.state.muniName=e.muniName),e.disableNavigation&&(n.state.disableNavigation=e.disableNavigation),n.handlePreviewEvent=n.handlePreviewEvent.bind(Object(s.a)(Object(s.a)(n))),n}return Object(c.a)(a,e),Object(u.a)(a,[{key:"draw",value:function(e,a){this.drawGraph(e,a)}},{key:"componentDidMount",value:function(){this.draw(this.getContainer(),this.props),document.addEventListener(E,this.handlePreviewEvent)}},{key:"componentWillUnmount",value:function(){document.removeEventListener(E,this.handlePreviewEvent)}},{key:"componentDidUpdate",value:function(){this.draw(this.getContainer(),this.props)}},{key:"handlePreviewEvent",value:function(e){var a=e.detail;this.setState(a)}},{key:"handleNavBarSelection",value:function(e,a){var n;if("national"==e){if(n={regionType:e},this.state.regionType==n.regionType)return}else if("province"==e){if(n={regionType:e,provinceName:a.name},this.state.regionType==n.regionType&&this.state.provinceName==n.provinceName)return}else if("municipality"==e&&(n={regionType:e,provinceName:a.provinceName,muniName:a.muniName,muniCode:a.muniCode},this.state.regionType==n.regionType&&this.state.provinceName==n.provinceName&&this.state.newState==n.muniName))return;var t=new CustomEvent(h,{detail:n});document.dispatchEvent(t),this.setState(n)}},{key:"getRegionName",value:function(){return"national"==this.state.regionType?"SA":"province"==this.state.regionType?this.state.provinceName:"municipality"==this.state.regionType?this.state.muniName:"municipality-vd"==this.state.regionType?this.state.muniName+"-"+this.state.vdNumber:void 0}},{key:"getContainer",value:function(){return p.i(this.refs.vizcontainer)}},{key:"getLoadingSpinner",value:function(){return p.i(this.refs.loading)}},{key:"render",value:function(){var e=this,a=this.state.disableNavigation;return i.a.createElement("div",{className:"map-container"},!a&&i.a.createElement("div",{className:X("map-navbar")},i.a.createElement(U.SideNav,{defaultSelectedPath:"1",theme:{selectionColor:"#C51162"},onItemSelection:this.onItemSelection,className:X("map-navbar")},i.a.createElement(U.Nav,{id:"navbar-national",onClick:this.handleNavBarSelection.bind(this,"national")},"National"),$.map(function(a){return i.a.createElement(U.Nav,{key:a.abbreviation,id:"navbar-province-"+a.abbreviation,onClick:e.handleNavBarSelection.bind(e,"province",a)},a.name,a.munis.map(function(a){return i.a.createElement(U.Nav,{key:a.muniCode,id:"navbar-muni-"+a.muniCode,onClick:e.handleNavBarSelection.bind(e,"municipality",a)},a.muniName.split("-")[1].split("[")[0])}))}))),this.getRegionName(),i.a.createElement("div",{className:"loading-spinner",ref:"loading"},i.a.createElement(Q.a,{type:"spin",color:"#777",height:100,width:100})),i.a.createElement("div",{ref:"vizcontainer",className:"map"}))}},{key:"drawGraph",value:function(e,a){var n=this,t="province_lo-res.geojson";var i,o=G.DOMAIN+"/mapdata/"+function(){switch(n.state.regionType){case"national":return t;case"province":return{Limpopo:"lim_lo-res.geojson",Mpumalanga:"mp_lo-res.geojson",Gauteng:"gt_lo-res.geojson","KwaZulu-Natal":"kzn_lo-res.geojson","North West":"nw_lo-res.geojson","Free State":"fs_lo-res.geojson","Eastern Cape":"ec_lo-res.geojson","Northern Cape":"nc_lo-res.geojson","Western Cape":"wc_lo-res.geojson"}[n.state.provinceName];case"municipality":return n.state.muniCode+".topojson";default:return null}}();n.getLoadingSpinner().style("display","block").transition().duration(200).style("opacity",1),i=document.getElementsByClassName("tooltip")[0]?p.i(".tooltip"):p.i("body").append("div").attr("class",X("tooltip")).style("opacity",0),console.log("process.env",Object({NODE_ENV:"production",PUBLIC_URL:"."})),console.log("fullRouteGeoJsonFile",o);e.selectAll("svg").remove();var r=e.append("svg").attr("preserveAspectRatio","xMinYMin meet").style("background-color","#ffffff").attr("viewBox","0 0 900 800").classed("svg-content",!0),m=p.f(o);Promise.all([m]).then(function(e){var a,t=e[0];-1!==o.indexOf(".topojson")&&(t=H.a(t,t.objects[n.state.muniCode])),a=t.features;var m=p.d().fitSize([900,800],t),u=p.e().projection(m);if(r.selectAll(".".concat(X("region"))).data(a).enter().append("path").attr("class",X("region")).attr("stroke","#eeeeee").attr("fill","#9c9c9c").attr("id",function(e,a){return"region-".concat(a)}).attr("d",u),"municipality"!==n.state.regionType&&r.selectAll(".place-label").data(a).enter().append("text").attr("class","place-label").attr("font-size","12px").attr("transform",function(e){var a,n;return"Polygon"===e.geometry.type?(a=_()(e.geometry.coordinates),(n=m(a))[1]-=12,"translate("+n+")"):(a=_()(e.geometry.coordinates[0]),(n=m(a))[1]-=5,"translate("+n+")")}).attr("dy",".35em").style("text-anchor","middle").text(function(e){return"national"===n.state.regionType?e.properties.SPROVINCE:"province"===n.state.regionType?e.properties.smunicipal.split("-")[1].split("[")[0]:e.properties.SMUNICIPAL.split("-")[1].split("[")[0]}),"municipality"!==n.state.regionType){var l,N=document.getElementsByClassName("place-label"),c={},s={};for(l=0;l<a.length;l++)c[l]=N[l].getBoundingClientRect();for(l=0;l<a.length;l++){for(var d=0;d<l;d++){var C=c[l],v=c[d];!(C.right<v.left||C.left>v.right||C.bottom<v.top||C.top>v.bottom)&&(s[l]=s[l]?s[l]+1:1)}s[l]>2?N[l].setAttribute("opacity",0):s[l]>0&&(N[l].innerHTML=N[l].innerHTML.slice(0,3)+"...")}}r.selectAll(".eventLayer").data(a).enter().append("path").attr("d",u).attr("class","eventLayer").attr("id",function(e,a){return"eventLayer-".concat(a)}).attr("fill","transparent").on("mouseover",function(e,a){p.i("#region-".concat(a)).attr("stroke-width",3).style("fill-opacity",.8)}).on("mousemove",function(e){"municipality"!==n.state.regionType&&(i.transition().duration(200).style("opacity",1),i.html("national"===n.state.regionType?e.properties.SPROVINCE:"province"===n.state.regionType?e.properties.smunicipal.split("-")[1].split("[")[0]:e.properties.SMUNICIPAL.split("-")[1].split("[")[0]).style("left",p.c.pageX+"px").style("top",p.c.pageY-28+"px"))}).on("mouseout",function(e,a){p.i("#region-".concat(a)).attr("stroke-width",1).style("fill-opacity",1),"municipality"!==n.state.regionType&&i.transition().duration(200).style("opacity",0)}).on("click",function(e,a){if(!n.state.disableNavigation){console.log("click event",a,e.properties),i.transition().duration(200).style("opacity",0);var t,o=n.state.regionType;if("national"===o)r={regionType:"province",provinceName:e.properties.SPROVINCE},m=new CustomEvent(h,{detail:r}),document.dispatchEvent(m),n.setState(r);else if("province"===o){r={regionType:"municipality",provinceName:n.state.provinceName,muniName:e.properties.smunicipal,muniCode:(t=e.properties,t.code||t.smunicipal.split("-")[0].replace(/\s/g,""))},m=new CustomEvent(h,{detail:r}),document.dispatchEvent(m),n.setState(r)}else{var r={regionType:"municipality-vd",provinceName:n.state.provinceName,muniName:n.state.muniName,muniCode:n.state.muniCode,vdNumber:function(e){return e.PKLVDNUMBE}(e.properties)},m=new CustomEvent(h,{detail:r});document.dispatchEvent(m)}}}),n.getLoadingSpinner().style("display","none")});window.addEventListener("resize",function(){},200)}}]),a}(t.Component),ae=n(52),ne=n.n(ae);function te(e){return R.a[e]||ne.a[e]||e}var ie=function(e){function a(e){var n;return Object(m.a)(this,a),(n=Object(l.a)(this,Object(N.a)(a).call(this,e))).state={elementId:"root",disableNavigation:!1,regionType:"province",provinceName:"Western Cape",muniName:""},n}return Object(c.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"onRegionTypeChange",value:function(e){var a={regionType:e.target.value};this.setState(a)}},{key:"onPreview",value:function(e){var a=new CustomEvent(E,{detail:this.state});document.dispatchEvent(a)}},{key:"render",value:function(){var e=this,a=G.DOMAIN,n=this.state,t=n.elementId,o=n.disableNavigation,r=n.regionType,m=n.provinceName,u=n.muniName;return i.a.createElement("div",null,i.a.createElement("h3",null," Map Embed Script Generation "),i.a.createElement("div",{className:te("form-group")},i.a.createElement("label",null,"Element ID "),i.a.createElement("input",{type:"text",className:te("form-control"),placeholder:"chart-container",onChange:function(a){return e.setState({elementId:a.target.value})}})),i.a.createElement("div",{className:te("form-group")},i.a.createElement("label",null,"Region Type "),i.a.createElement("select",{className:te("form-control"),value:r,onChange:this.onRegionTypeChange.bind(this)},i.a.createElement("option",{value:"national"},"national"),i.a.createElement("option",{value:"province"},"province"),i.a.createElement("option",{value:"municipality"},"municipality"))),"national"!=r&&i.a.createElement("div",{className:te("form-group")},i.a.createElement("label",null,"Province Name"),i.a.createElement("input",{type:"text",className:te("form-control"),placeholder:"Western Cape",value:m,onChange:function(a){return e.setState({provinceName:a.target.value})}})),"municipality"==r&&i.a.createElement("div",{className:te("form-group")},i.a.createElement("label",null,"Municipality Name"),i.a.createElement("input",{type:"text",className:te("form-control"),placeholder:"City of Cape Town",value:u,onChange:function(a){return e.setState({muniName:a.target.value})}})),i.a.createElement("div",{className:te("form-check")},i.a.createElement("label",{className:te("form-check-label")},i.a.createElement("input",{type:"checkbox",className:te("form-check-input"),value:o,onChange:function(a){return e.setState({disableNavigation:a.target.checked})}}),"\xa0\xa0Disable Navigation")),i.a.createElement("div",{className:te("form-group")},i.a.createElement("button",{type:"button",onClick:this.onPreview.bind(this),className:te("btn")+" "+te("btn-primary")},"Preview")),i.a.createElement("div",{className:te("form-group")},i.a.createElement("label",null,"Embed Code"),i.a.createElement("div",{className:te("embedcode")},i.a.createElement("span",null,'<script src="'.concat(a,'/embed/embed.js"><\/script>\n                    <script>\n                        showMap(document.getElementById("').concat(t,'"),{\n                            disableNavigation: ').concat(o,',\n                            regionType: "').concat(r,'",\n                            provinceName: "').concat(m,'",\n                            muniName: "').concat(u,'",\n                        });<\/script>').replace(/(\r\n|\n|\r)/gm,"")))))}}]),a}(t.Component),oe=(n(90),t.Component,function(e){function a(){return Object(m.a)(this,a),Object(l.a)(this,Object(N.a)(a).apply(this,arguments))}return Object(c.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"leftContainer"},i.a.createElement(F,{regionName:"SA",regionType:"national",numParties:3}),i.a.createElement(ee,{regionType:"province",provinceName:"Western Cape"})),i.a.createElement("div",{className:"rightContainer"},i.a.createElement("div",{className:"barchartEmbed"},i.a.createElement(x,null)),i.a.createElement("div",{className:"mapEmbed"},i.a.createElement(ie,null))),i.a.createElement("div",{id:"sales-data"}))}}]),a}(t.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[57,2,1]]]);
//# sourceMappingURL=main.dac1fed7.chunk.js.map